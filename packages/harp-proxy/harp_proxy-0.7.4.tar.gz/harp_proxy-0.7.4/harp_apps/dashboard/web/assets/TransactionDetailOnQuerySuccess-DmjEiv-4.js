import{u as w}from"./reactQuery-DeUOlYhS.js";import{u as m,c as b,n as p}from"./index-BlfZm-ns.js";import{r as l,a as y}from"./react-C1sqhVEE.js";import{j as t}from"./ui-DwUtvhni.js";import{d as k,P as S}from"./Pane-CByJ_bSV.js";import{T as C}from"./TpdexBadge-CeDVcQC1.js";import{a as N,b as R}from"./dateFns-BIEc_pgQ.js";import{S as T}from"./syntaxHighlighter-Bh-qY5cI.js";function E({title:e,titleId:o,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":o},r),e?l.createElement("title",{id:o},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const F=l.forwardRef(E);function B({title:e,titleId:o,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":o},r),e?l.createElement("title",{id:o},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const L=l.forwardRef(B);function M({title:e,titleId:o,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":o},r),e?l.createElement("title",{id:o},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const h=l.forwardRef(M);function ne(e){const o=m();return w(["transactions","detail",e],()=>o.fetch(`/transactions/${e}`).then(r=>r.json()),{enabled:!!e})}const P=e=>e&&e[0].toUpperCase()+e.slice(1)||"";function z({title:e,titleId:o,...r},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":o},r),e?l.createElement("title",{id:o},e):null,l.createElement("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"}))}const j=l.forwardRef(z);function x(){return t("span",{className:"h-4 w-4 relative"},t(h,{className:"absolute"}),t(j,{className:"absolute"}))}const D=({duration:e,tpdex:o,cached:r=!1,noCache:a=!1,verbose:n=!1,className:i=void 0})=>e!==null?t("div",{className:b("flex gap-x-0.5 items-center font-normal",i)},o!==null?t(C,{score:o}):null,t("span",null,N({seconds:e})),r?t("span",{className:"h-4 flex text-xs text-slate-800",title:"Response was cached."},t(h,null),n?"Cached":null):null,a?t("span",{className:"h-4 flex text-xs text-red-800",title:"Cache was bypassed."},t(x,null),n?"Bypassed":null):null):null;function f({open:e=!0,title:o,subtitle:r,children:a=void 0}){const[n,i]=l.useState(e);return t("div",{className:"px-4 py-3"},t(k,{padding:"pt-0",className:b("flex w-full whitespace-nowrap",a?"cursor-pointer":null),onClick:()=>i(!n)},t("div",{className:"grow font-normal truncate"},t("span",{className:"font-semibold"},o)),a?n?t(L,{className:"h-4 w-4 min-w-4 text-gray-600"}):t(F,{className:"h-4 w-4 min-w-4 text-gray-600"}):null),r??null,a?t("div",{className:"mt-2 space-y-2 overflow-x-auto "+(n?"":"hidden")}," ",a):null)}function v(e){const o=m();return w(["blobs",e],async()=>{if(e){const r=await o.fetch(`/blobs/${e}`),a=await r.arrayBuffer();return{id:e,content:a,contentType:r.headers.get("Content-Type")}}})}const q={'code[class*="language-"]':{color:"#393A34",fontFamily:'"Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",fontSize:".9em",lineHeight:"1.2em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"#393A34",fontFamily:'"Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",fontSize:".9em",lineHeight:"1.2em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",border:"1px solid #dddddd",backgroundColor:"white"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{background:"#C1DEF1"},'pre[class*="language-"] ::-moz-selection':{background:"#C1DEF1"},'code[class*="language-"]::-moz-selection':{background:"#C1DEF1"},'code[class*="language-"] ::-moz-selection':{background:"#C1DEF1"},'pre[class*="language-"]::selection':{background:"#C1DEF1"},'pre[class*="language-"] ::selection':{background:"#C1DEF1"},'code[class*="language-"]::selection':{background:"#C1DEF1"},'code[class*="language-"] ::selection':{background:"#C1DEF1"},':not(pre) > code[class*="language-"]':{padding:".2em",paddingTop:"1px",paddingBottom:"1px",background:"#f8f8f8",border:"1px solid #dddddd"},comment:{color:"#008000",fontStyle:"italic"},prolog:{color:"#008000",fontStyle:"italic"},doctype:{color:"#008000",fontStyle:"italic"},cdata:{color:"#008000",fontStyle:"italic"},namespace:{Opacity:".7"},string:{color:"#A31515"},punctuation:{color:"#393A34"},operator:{color:"#393A34"},url:{color:"#36acaa"},symbol:{color:"#36acaa"},number:{color:"#36acaa"},boolean:{color:"#36acaa"},variable:{color:"#36acaa"},constant:{color:"#36acaa"},inserted:{color:"#36acaa"},atrule:{color:"#0000ff"},keyword:{color:"#0000ff"},"attr-value":{color:"#0000ff"},".language-autohotkey .token.selector":{color:"#0000ff"},".language-json .token.boolean":{color:"#0000ff"},".language-json .token.number":{color:"#0000ff"},'code[class*="language-css"]':{color:"#0000ff"},function:{color:"#393A34"},deleted:{color:"#9a050f"},".language-autohotkey .token.tag":{color:"#9a050f"},selector:{color:"#800000"},".language-autohotkey .token.keyword":{color:"#00009f"},important:{color:"#e90",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},"class-name":{color:"#2B91AF"},".language-json .token.property":{color:"#2B91AF"},tag:{color:"#800000"},"attr-name":{color:"#ff0000"},property:{color:"#ff0000"},regex:{color:"#ff0000"},entity:{color:"#ff0000"},"directive.tag.tag":{background:"#ffff00",color:"#393A34"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#a5a5a5"},".line-numbers .line-numbers-rows > span:before":{color:"#2B91AF"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(193, 222, 241, 0.2) 70%, rgba(221, 222, 241, 0))"}},A={primary:p.button(()=>[{paddingLeft:"0.625rem",paddingRight:"0.625rem",paddingTop:"0.375rem",paddingBottom:"0.375rem"},{fontSize:"0.875rem",lineHeight:"1.25rem",fontWeight:"600"},{"--tw-bg-opacity":"1",backgroundColor:"rgb(37 99 235 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(59 130 246 / var(--tw-bg-opacity))"},":focus-visible":{outlineColor:"#3b82f6"}},{":focus-visible":{outlineStyle:"solid",outlineWidth:"2px",outlineOffset:"2px"}},{"--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-inset":"inset","--tw-ring-opacity":"1","--tw-ring-color":"rgb(29 78 216 / var(--tw-ring-opacity))"}]),secondary:p.button(()=>[{paddingLeft:"0.625rem",paddingRight:"0.625rem",paddingTop:"0.375rem",paddingBottom:"0.375rem"},{fontSize:"0.875rem",lineHeight:"1.25rem",fontWeight:"600"},{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(17 24 39 / var(--tw-text-opacity))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(249 250 251 / var(--tw-bg-opacity))"}},{"--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-inset":"inset","--tw-ring-opacity":"1","--tw-ring-color":"rgb(209 213 219 / var(--tw-ring-opacity))"}])},H=({children:e,variant:o="primary",...r})=>{const a=A[o];return t(a,r,e)},O={...q};function U({content:e=null,contentType:o=null}){const r=new TextDecoder("utf-8"),a=r.decode(e),[n,i]=l.useState(a==null?void 0:a.slice(0,8e3)),d=()=>i(a);switch(o){case"application/json":return t(y.Fragment,null,t(T,{language:"javascript",className:"w-fit overflow-x-auto text-black language-javascript max-w-full text-xs",children:n||"",style:O,customStyle:{padding:0,border:0}}),((n==null?void 0:n.length)??0)<((a==null?void 0:a.length)||0)&&t("div",{className:"flex w-full justify-end mb-2"},t(H,{variant:"secondary",onClick:d},"Load all")));case"image/png":case"image/svg+xml":case"image/webp":case"image/jpeg":if(e){const g=new Blob([e],{type:o}),u=URL.createObjectURL(g);return t("img",{src:u,alt:"Content"})}return null}return e?t("pre",{className:"max-w-full overflow-x-auto p-4 text-xs text-black",style:{padding:0,border:0}},r.decode(e)):null}function I({id:e}){const o=v(e);return o&&o.isSuccess&&o.data!==void 0&&o.data.content.byteLength?t("div",{className:"px-2"},t(U,{content:o.data.content,contentType:o.data.contentType})):null}function W({id:e}){const o=v(e),r=new TextDecoder("utf-8");if(o&&o.isSuccess&&o.data!==void 0)return t("table",{className:"mb-2 w-full text-xs font-mono"},t("tbody",null,r.decode(o.data.content).split(`
`).map((a,n)=>{const i=a.split(":",2);return t("tr",{key:n},t("td",{className:"px-2 w-1 text-blue-600 truncate"},i[0]),t("td",{className:"px-2 whitespace-nowrap"},i[0].toLowerCase()=="cache-control"&&i[1].toLowerCase().includes("no-cache")?t("span",{className:"h-4 flex text-xs",title:"Cache was bypassed."},t(x,null),i[1]):i[1]))})))}const c=p.span(({color:e="default"})=>[{display:"inline-flex",alignItems:"center"},{paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem"},{fontSize:"0.75rem",lineHeight:"1rem",fontWeight:"500"},{borderRadius:"0.375rem","--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-inset":"inset"},e=="default"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(249 250 251 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(55 65 81 / var(--tw-text-opacity))","--tw-ring-color":"rgb(75 85 99 / 0.2)"},e=="green"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(240 253 244 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(21 128 61 / var(--tw-text-opacity))","--tw-ring-color":"rgb(22 163 74 / 0.2)"},e=="yellow"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(254 252 232 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(161 98 7 / var(--tw-text-opacity))","--tw-ring-color":"rgb(202 138 4 / 0.2)"},e=="orange"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 247 237 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(194 65 12 / var(--tw-text-opacity))","--tw-ring-color":"rgb(234 88 12 / 0.2)"},e=="red"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(254 242 242 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(185 28 28 / var(--tw-text-opacity))","--tw-ring-color":"rgb(220 38 38 / 0.2)"},e=="blue"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(239 246 255 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(29 78 216 / var(--tw-text-opacity))","--tw-ring-color":"rgb(37 99 235 / 0.2)"},e=="purple"&&{"--tw-bg-opacity":"1",backgroundColor:"rgb(250 245 255 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(126 34 206 / var(--tw-text-opacity))","--tw-ring-color":"rgb(147 51 234 / 0.2)"}]),V=({method:e})=>{switch(e){case"GET":return t(c,{color:"green"},e);case"DELETE":return t(c,{color:"red"},e);case"PUT":return t(c,{color:"yellow"},e);case"POST":return t(c,{color:"orange"},e);case"PATCH":return t(c,{color:"purple"},e);case"OPTIONS":return t(c,{color:"blue"},e)}return t(c,null,e)};var $={202:"Accepted",502:"Bad Gateway",400:"Bad Request",409:"Conflict",100:"Continue",201:"Created",417:"Expectation Failed",424:"Failed Dependency",403:"Forbidden",504:"Gateway Timeout",410:"Gone",505:"HTTP Version Not Supported",418:"I'm a teapot",419:"Insufficient Space on Resource",507:"Insufficient Storage",500:"Internal Server Error",411:"Length Required",423:"Locked",420:"Method Failure",405:"Method Not Allowed",301:"Moved Permanently",302:"Moved Temporarily",207:"Multi-Status",300:"Multiple Choices",511:"Network Authentication Required",204:"No Content",203:"Non Authoritative Information",406:"Not Acceptable",404:"Not Found",501:"Not Implemented",304:"Not Modified",200:"OK",206:"Partial Content",402:"Payment Required",308:"Permanent Redirect",412:"Precondition Failed",428:"Precondition Required",102:"Processing",103:"Early Hints",426:"Upgrade Required",407:"Proxy Authentication Required",431:"Request Header Fields Too Large",408:"Request Timeout",413:"Request Entity Too Large",414:"Request-URI Too Long",416:"Requested Range Not Satisfiable",205:"Reset Content",303:"See Other",503:"Service Unavailable",101:"Switching Protocols",307:"Temporary Redirect",429:"Too Many Requests",401:"Unauthorized",451:"Unavailable For Legal Reasons",422:"Unprocessable Entity",415:"Unsupported Media Type",305:"Use Proxy",421:"Misdirected Request"};function G(e){var o=$[e.toString()];if(!o)throw new Error("Status code does not exist: "+e);return o}const Q=e=>e>=200&&e<300?"green":e>=300&&e<400?"blue":e>=400&&e<500?"orange":e>=500&&e<600?"red":e>=600?"purple":"default",_=({statusCode:e})=>{const o=Q(e);let r;try{r=G(e)}catch{r="Unknown"}return t(c,{color:o},e," ",r)};function K({kind:e,summary:o="",endpoint:r}){if(e=="request"){const[a,n]=o.split(" ");return t("span",{className:"font-normal"},t(V,{method:a}),r?t("span",{className:"inline-flex items-center bg-gray-50 px-1 ml-2 py-0.5 text-xs font-medium text-gray-700 ring-1 ring-inset ring-gray-600/20"},r):null,t("span",{className:"text-gray-500 font-mono text-xs",title:n},n))}if(e=="response"){const a=o.split(" ");return t("span",{className:"font-normal"},t(_,{statusCode:parseInt(a[1])}))}return e=="error"?t(c,{color:"red"},o):t("span",{className:"font-normal text-gray-500 font-mono text-xs"},"n/a")}function X({tags:e}){return t("div",{className:"flex gap-x-1"},e.map(([o,r])=>t("span",{key:o,className:"text-xs text-gray-500"},o,"=",r)))}function le({query:e}){var g,u;const o=e.data,[r,a,n,i]=[o.elapsed?Math.trunc(o.elapsed)/1e3:null,o.tpdex??null,!!((g=o.extras)!=null&&g.cached),!!((u=o.extras)!=null&&u.no_cache)],d=o.tags?Object.entries(o.tags):[];return t(S,{hasDefaultPadding:!1,className:"divide-y divide-gray-100 overflow-hidden text-gray-900 sm:text-sm"},t(f,{title:t("div",{className:"flex gap-x-0.5 items-center"},t("span",{className:"grow"},"Transaction"),t(D,{duration:r,tpdex:a,cached:n,noCache:i,verbose:!0,className:"pl-1 pr-2"})),children:d.length?t(X,{tags:d}):null}),(o.messages||[]).map(s=>t(f,{key:s.id,title:t(y.Fragment,null,t("span",{className:"mr-2"},P(s.kind)),t(K,{kind:s.kind,summary:s.summary,endpoint:o.endpoint})),subtitle:s.created_at?t("span",{className:"text-xs text-gray-500"},R(new Date(s.created_at),"PPPPpppp")):void 0,open:s.kind!="error"},t(W,{id:s.headers}),t(I,{id:s.body}))),null)}export{D,j as F,K as M,le as T,L as a,F as b,ne as u};
