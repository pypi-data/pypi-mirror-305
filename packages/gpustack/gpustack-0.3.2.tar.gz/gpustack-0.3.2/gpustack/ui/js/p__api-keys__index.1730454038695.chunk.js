"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[674],{56838:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(35453),a=n(50959),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},i=n(52273),s=function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,icon:o}))};var c=a.forwardRef(s)},42034:function(e,t,n){var r=n(26068),a=n.n(r),o=n(48305),i=n.n(o),s=n(5268),c=n(26268),l=n(99178),u=n(14251),d=n(45348),f=n(21363),p=n(99013),m=n.n(p),h=n(50959),x=n(11527);t.Z=function(e){var t=e.text,n=e.disabled,r=e.type,o=void 0===r?"text":r,p=e.shape,v=void 0===p?"default":p,g=e.fontSize,y=void 0===g?"14px":g,Z=e.style,j=e.size,b=void 0===j?"middle":j,k=(0,l.useIntl)(),w=(0,h.useState)(!1),M=i()(w,2),C=M[0],S=M[1],I=(0,h.useRef)(null),E=(0,h.useRef)(null);return(0,h.useEffect)((function(){return I.current&&(E.current=new(m())(I.current),E.current.on("success",(function(){S(!0),setTimeout((function(){S(!1)}),3e3)})),E.current.on("error",(function(e){u.ZP.success(k.formatMessage({id:"common.copy.fail"})),e.clearSelection()}))),function(){var e;null===(e=E.current)||void 0===e||e.destroy()}}),[I]),(0,x.jsx)(d.Z,{title:k.formatMessage({id:"common.button.copy"}),children:(0,x.jsx)(f.ZP,{className:"copy-button",ref:I,type:o,shape:v,size:b,disabled:!!n,"data-clipboard-text":t,icon:C?(0,x.jsx)(s.Z,{style:{color:"var(--ant-color-success)",fontSize:y}}):(0,x.jsx)(c.Z,{style:a()({fontSize:y},Z)})})})}},42779:function(e,t,n){var r=n(26068),a=n.n(r),o=n(48305),i=n.n(o),s=n(67825),c=n.n(s),l=n(71239),u=n(78681),d=n(84122),f=n(50959),p=n(36134),m=n(11527),h=["label","placeholder","children","required","description","isInFormItems"];t.Z=function(e){var t=e.label,n=(e.placeholder,e.children),r=e.required,o=e.description,s=e.isInFormItems,x=void 0===s||s,v=c()(e,h),g=(0,f.useState)(!1),y=i()(g,2),Z=y[0],j=y[1],b=(0,f.useRef)(null),k="";if(x){var w,M,C=null===u.Z||void 0===u.Z||null===(w=u.Z.Item)||void 0===w||null===(M=w.useStatus)||void 0===M?void 0:M.call(w);k=(null==C?void 0:C.status)||""}(0,f.useEffect)((function(){(0,l.JL)(e.value)&&j(!0)}),[e.value]);return(0,m.jsx)(p.Z,{status:k,label:t,isFocus:Z,required:r,description:o,disabled:e.disabled,onClick:function(){var t,n;e.disabled||Z||(null===(t=b.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t),j(!0))},children:(0,m.jsx)(d.default,a()(a()({},v),{},{ref:b,onFocus:function(t){var n;j(!0),null===(n=e.onFocus)||void 0===n||n.call(e,t)},onBlur:function(t){var n;e.value||j(!1),null===(n=e.onBlur)||void 0===n||n.call(e,t)},onChange:function(t,n){var r;(0,l.JL)(t)?j(!0):j(!1),null===(r=e.onChange)||void 0===r||r.call(e,t,n)},notFoundContent:null,children:n}))})}},85599:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var r=n(90228),a=n.n(r),o=n(87999),i=n.n(o),s=n(26068),c=n.n(s),l=n(48305),u=n.n(l),d=n(33883),f=n(94186),p=n(40198),m=n(12526),h=n(93495),x=n(34531),v=n(51980),g=n(71239),y=n(56838),Z=n(19019),j=n(69070),b=n(54562),k=n(99178),w=n(44901),M=n(30720),C=n(79302),S=n(21363),I=n(45348),E=n(7672),T=n.n(E),O=n(32699),P=n.n(O),z=n(50959),q=n(94299),F="/api-keys";function R(e){return A.apply(this,arguments)}function A(){return(A=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("".concat(F),{method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return K.apply(this,arguments)}function K(){return(K=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("".concat(F),{method:"POST",data:t.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return _.apply(this,arguments)}function _(){return(_=i()(a()().mark((function e(t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,k.request)("".concat(F,"/").concat(t),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(42034),D=n(7215),H=n(92233),J=n(42779),G=n(78681),N=n(95600),V=n(84122),W=n(92866),Q=[{label:"apikeys.form.expiration.7days",type:"day",value:7},{label:"apikeys.form.expiration.1month",type:"month",value:1},{label:"apikeys.form.expiration.6months",type:"month",value:6},{label:"apikeys.form.expiration.never",type:"never",value:-1}],U=n(11527),X=function(e){var t=e.title,n=e.action,r=e.open,o=e.onOk,s=e.onCancel,l=G.Z.useForm(),d=u()(l,1)[0],f=(0,k.useIntl)(),p=(0,z.useState)(!1),h=u()(p,2),x=h[0],v=h[1],g=(0,z.useState)(""),y=u()(g,2),Z=y[0],j=y[1],b=(0,z.useState)(!1),w=u()(b,2),M=w[0],C=w[1];(0,z.useEffect)((function(){n===m.Kd.CREATE&&r&&d.setFieldsValue({expires_in:1})}),[r]);var I=function(e){var t=e;if(-1===t)return 0;var n=Q.find((function(e){return t===e.value})),r=T()().add(null==n?void 0:n.value,"".concat(null==n?void 0:n.type)),a=T()();return r.diff(a,"second")},E=function(){var e=i()(a()().mark((function e(t){var n,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),n=c()(c()({},t),{},{expires_in:I(t.expires_in)}),e.next=5,Y({data:n});case 5:r=e.sent,j(r.value),v(!0),C(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C(!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){d.submit()};return(0,U.jsx)(N.Z,{title:x?f.formatMessage({id:"apikeys.title.save"}):t,open:r,centered:!0,onOk:O,onCancel:s,afterOpenChange:function(e){v(!1)},destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:600,styles:{},footer:x?(0,U.jsx)(S.ZP,{type:"primary",onClick:function(){o()},children:f.formatMessage({id:"common.button.done"})}):(0,U.jsx)(D.Z,{onOk:O,onCancel:s,loading:M}),children:(0,U.jsx)(G.Z,{name:"addAPIKey",form:d,onFinish:E,preserve:!1,children:x?(0,U.jsxs)(G.Z.Item,{children:[(0,U.jsx)("div",{children:(0,U.jsx)(W.Z,{bordered:!1,color:"error",style:{padding:"6px 8px",marginBottom:16},children:f.formatMessage({id:"apikeys.table.save.tips"})})}),(0,U.jsx)(H.Z.Input,{label:f.formatMessage({id:"apikeys.form.apikey"}),value:Z,addAfter:(0,U.jsx)(B.Z,{text:Z,shape:"default",size:"middle",type:"text"})})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(G.Z.Item,{name:"name",rules:[{required:!0,message:f.formatMessage({id:"common.form.rule.input"},{name:f.formatMessage({id:"common.table.name"})})}],children:(0,U.jsx)(H.Z.Input,{label:f.formatMessage({id:"common.table.name"}),required:!0})}),(0,U.jsx)(G.Z.Item,{name:"expires_in",rules:[{required:!0,message:f.formatMessage({id:"common.form.rule.select"},{name:f.formatMessage({id:"apikeys.form.expiretime"})})}],children:(0,U.jsx)(J.Z,{label:f.formatMessage({id:"apikeys.form.expiretime"}),required:!0,children:Q.map((function(e){return(0,U.jsx)(V.default.Option,{value:e.value,children:f.formatMessage({id:e.label})},e.value)}))})}),(0,U.jsx)(G.Z.Item,{name:"description",rules:[{required:!1}],children:(0,U.jsx)(H.Z.TextArea,{label:f.formatMessage({id:"common.table.description"})})})]})})})},$=w.Z.Column,ee=function(){var e=(0,x.Z)(),t=(0,v.Z)({defaultSortOrder:"descend"}),n=t.sortOrder,r=t.setSortOrder,o=(0,k.useIntl)(),s=(0,z.useRef)(null),l=(0,z.useState)({dataList:[],loading:!1,total:0}),E=u()(l,2),O=E[0],F=E[1],A=(0,z.useState)(!1),Y=u()(A,2),K=Y[0],_=Y[1],B=(0,z.useState)(m.Kd.CREATE),D=u()(B,2),H=D[0],J=D[1],G=(0,z.useState)({page:1,perPage:10,search:""}),N=u()(G,2),V=N[0],W=N[1],Q=function(){var e=i()(a()().mark((function e(){var t,n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F((function(e){return e.loading=!0,c()({},e)})),e.prev=1,t=c()({},P().pickBy(V,(function(e){return!!e}))),e.next=5,R(t);case 5:n=e.sent,F({dataList:n.items||[],loading:!1,total:n.pagination.total}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),F({dataList:[],loading:!1,total:O.total});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){_(!0),J(m.Kd.CREATE)},te=function(){var e=i()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q();case 3:_(!1),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,z.useEffect)((function(){Q()}),[V]),(0,q.y1)(h.ZP.CREATE,(function(){ee()}),{enabled:!K}),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(b._z,{ghost:!0,header:{title:o.formatMessage({id:"apikeys.title"})},extra:[],children:[(0,U.jsx)(p.Z,{marginBottom:22,left:(0,U.jsxs)(M.Z,{children:[(0,U.jsx)(C.Z,{placeholder:o.formatMessage({id:"common.filter.name"}),style:{width:300},allowClear:!0,onChange:function(e){W(c()(c()({},V),{},{search:e.target.value}))}}),(0,U.jsx)(S.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:function(e){Q()},icon:(0,U.jsx)(y.Z,{})})]}),right:(0,U.jsxs)(M.Z,{size:20,children:[(0,U.jsx)(S.ZP,{icon:(0,U.jsx)(Z.Z,{}),type:"primary",onClick:ee,children:o.formatMessage({id:"apikeys.button.create"})}),(0,U.jsx)(S.ZP,{icon:(0,U.jsx)(j.Z,{}),danger:!0,onClick:function(){s.current.show({content:"apikeys.table.apikeys",selection:!0,onOk:function(){return i()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.D6)(e.selectedRowKeys,L);case 2:e.clearSelections(),Q();case 4:case"end":return t.stop()}}),t)})))()}})},disabled:!e.selectedRowKeys.length,children:o.formatMessage({id:"common.button.delete"})})]})}),(0,U.jsxs)(w.Z,{dataSource:O.dataList,rowSelection:e,loading:O.loading,rowKey:"id",onChange:function(e,t,n){r(n.order)},pagination:{showSizeChanger:!0,pageSize:V.perPage,current:V.page,total:O.total,hideOnSinglePage:10===V.perPage,onChange:function(e,t){W(c()(c()({},V),{},{page:e,perPage:t||10}))}},children:[(0,U.jsx)($,{title:o.formatMessage({id:"common.table.name"}),dataIndex:"name",ellipsis:{showTitle:!1},render:function(e,t){return(0,U.jsx)(d.Z,{ghost:!0,style:{maxWidth:400},children:e})}},"name"),(0,U.jsx)($,{title:o.formatMessage({id:"apikeys.form.expiretime"}),dataIndex:"expires_at",ellipsis:{showTitle:!1},render:function(e,t){return(0,U.jsx)(d.Z,{ghost:!0,children:e?T()(e).format("YYYY-MM-DD HH:mm:ss"):o.formatMessage({id:"apikeys.form.expiration.never"})})}},"expiration"),(0,U.jsx)($,{title:o.formatMessage({id:"common.table.description"}),dataIndex:"description",ellipsis:{showTitle:!1},render:function(e,t){return(0,U.jsx)(d.Z,{ghost:!0,children:e})}},"description"),(0,U.jsx)($,{title:o.formatMessage({id:"common.table.createTime"}),dataIndex:"created_at",defaultSortOrder:"descend",sortOrder:n,showSorterTooltip:!1,sorter:!1,ellipsis:{showTitle:!1},render:function(e,t){return(0,U.jsx)(d.Z,{ghost:!0,children:T()(e).format("YYYY-MM-DD HH:mm:ss")})}},"createTime"),(0,U.jsx)($,{title:o.formatMessage({id:"common.table.operation"}),ellipsis:{showTitle:!1},render:function(e,t){return(0,U.jsx)(M.Z,{size:20,children:(0,U.jsx)(I.Z,{title:o.formatMessage({id:"common.button.delete"}),children:(0,U.jsx)(S.ZP,{onClick:function(){return e=t,void s.current.show({content:"apikeys.table.apikeys",name:e.name,onOk:function(){return i()(a()().mark((function t(){return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,L(e.id);case 3:Q();case 4:case"end":return t.stop()}}),t)})))()}});var e},size:"small",danger:!0,icon:(0,U.jsx)(j.Z,{})})})})}},"operation")]})]}),(0,U.jsx)(X,{open:K,action:H,title:o.formatMessage({id:"apikeys.button.create"}),onCancel:function(){_(!1)},onOk:te}),(0,U.jsx)(f.Z,{ref:s})]})}}}]);