#
# Author:  Geert De Paepe
# Email:   geert.de.paepe@vub.be
# License: MIT License
# Purpose: tox.ini: tox configuration file
# Usage:   tox [-e <env_name>] in directory with tox.ini file
#

[tox]
env_list=
    py311-tf212
	py311-tf213
	py311-tf214
	py311-tf215
	lint
	
[testenv]
deps=pytest>=7
commands=pytest {posargs:tests}

[testenv:py311-tf212]
deps={[testenv]deps}
    tensorflow>=2.12,<2.13
	tensorflow_probability>=0.20,<0.21
	
[testenv:py311-tf213]
deps={[testenv]deps}
    tensorflow>=2.13,<2.14
	tensorflow_probability>=0.21,<0.22

[testenv:py311-tf214]
deps={[testenv]deps}
    tensorflow>=2.14,<2.15
	tensorflow_probability>=0.22,<0.23

[testenv:py311-tf215]
deps={[testenv]deps}
    tensorflow>=2.15,<2.16
	tensorflow_probability>=0.23,<0.24
	
[testenv:py311-tf216]
deps={[testenv]deps}
    tensorflow>=2.16,<2.17
	tensorflow_probability>=0.24,<0.25
	tf_keras
	
[testenv:py311-tf217]
deps={[testenv]deps}
    tensorflow>=2.17,<2.18
	tensorflow_probability>=0.24
	tf_keras

[testenv:py311-tf218]
deps={[testenv]deps}
    tensorflow>=2.18,<2.19
	tensorflow_probability>=0.24
	tf_keras # needed for tfp

[testenv:lint]
skip-install=true
deps=flake8>=7
commands=flake8 --extend-ignore E501,W291,W293,W391 {posargs:src}

[testenv:docs]
skip-install=true
deps=
    sphinx
	sphinx-rtd-theme
	sphinx-copybutton
commands=sphinx-build -M html docs docs/_build/html

[testenv:build]
skip-install=true
deps=build
commands=python -m build

[testenv:publish]
skip-install=true
deps=twine
#commands=python -m twine upload --repository testpypi dist/*
commands=python -m twine upload dist/*