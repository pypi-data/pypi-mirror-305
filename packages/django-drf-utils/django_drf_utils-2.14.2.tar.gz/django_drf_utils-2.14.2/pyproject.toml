[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "django-drf-utils"
version = "2.14.2"
license = { text = "LGPL3" }
description = "Utilities for commonly used functionality in django and django-rest-framework among BIWG projects."
readme = "README.md"
authors = [
  { name = "Christian Ribeaud", email = "christian.ribeaud@karakun.com" },
  { name = "François Martin", email = "francois.martin@karakun.com" },
  { name = "Gerhard Bräunlich", email = "gerhard.braeunlich@id.ethz.ch" },
  { name = "Jarosław Surkont", email = "jaroslaw.surkont@unibas.ch" },
  { name = "Robin Engler", email = "robin.engler@sib.swiss" },
  { name = "Simone Guzzi", email = "simone.guzzi@sib.swiss" },
  { name = "Swen Vermeul", email = "swen@ethz.ch" },
]
requires-python = ">=3.10"
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)",
  "Operating System :: OS Independent",
]
dependencies = [
  "Django>=3.2",
  "djangorestframework>=3.12",
  "python-json-logger>=2",
]

[project.urls]
Repository = "https://gitlab.com/biomedit/django-drf-utils"

[project.optional-dependencies]
dev = [
  "ruff==0.7.1",
  "mypy==0.991",
  "pytest==8.3.3",
  "pytest-cov==5.0.0",
  "pytest-django==4.9.0",
  "pytest-randomly==3.16.0",
  "requests==2.32.3",
  "bandit==1.7.10",
  "django-stubs==5.1.1",
  "djangorestframework-stubs==3.15.1",
  "types-requests==2.32.0.20241016",
  "factory-boy==3.3.1",
  "types-factory-boy==0.4.1",
  "tox==4.23.2",
]

[tool.coverage.run]
branch = true
omit = ["*/tests/*"]
source = ["django_drf_utils"]

[tool.tox]
legacy_tox_ini = '''
[tox]
envlist = clean,py313,report
skipsdist = True

[testenv]
deps =
    .[dev]
depends =
    py313: clean
    report: py313
commands = pytest {posargs: --cov --cov-append --cov-report= .}

[testenv:report]
deps = coverage[toml]
skip_install = true
commands =
    coverage report

[testenv:clean]
deps = coverage[toml]
skip_install = true
commands = coverage erase
'''

[tool.django-stubs]
django_settings_module = "tests.settings"

[tool.mypy]
files = ["django_drf_utils", "tests"]
plugins = ["mypy_django_plugin.main", "mypy_drf_plugin.main"]

[[tool.mypy.overrides]]
ignore_missing_imports = true
module = ["pythonjsonlogger.*"]

[tool.ruff]
# Enable the pycodestyle (`E`) and Pyflakes (`F`) default rules.
# Additionally, add flake8-unused-arguments (ARG)
lint.select = ["E", "F", "ARG"]
target-version = "py313"
