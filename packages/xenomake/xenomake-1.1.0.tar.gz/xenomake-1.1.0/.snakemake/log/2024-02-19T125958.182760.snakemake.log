Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Job stats:
job                            count
---------------------------  -------
DGE_Human                          1
DGE_Mouse                          1
Expression_QC                      1
Extract_Xenograft_Readnames        1
Filter_MultiMapped_Human           1
Filter_MultiMapped_Mouse           1
Find_Overlap_Reads                 1
Generate_SE_Ubam                   1
H5ad_Human                         1
H5ad_Mouse                         1
HDF5_Human                         1
HDF5_Mouse                         1
Human_Downstream                   1
Human_Xenograft_BAM_Files          1
Make_Fastq                         1
Merge_Human                        1
Merge_Mouse                        1
Mouse_Downstream                   1
Mouse_Xenograft_BAM_Files          1
Preprocess                         1
Remove_Overlapped_Reads            1
STAR_Human                         1
STAR_Mouse                         1
Subset_Overlapped                  1
Xengsort_Clasify                   1
all                                1
create_tissue_file                 1
filter_mm_ambiguous                1
filter_mm_both                     1
total                             29

Select jobs to execute...

[Mon Feb 19 12:59:58 2024]
rule Preprocess:
    input: sub1.fq.gz, sub2.fq.gz
    output: test/sub/preprocess/tagged_polyA_adapter_trimmed.bam, test/sub/logs/Preprocess.summary
    log: test/sub/logs/Preprocess.log
    jobid: 7
    reason: Missing output files: test/sub/preprocess/tagged_polyA_adapter_trimmed.bam
    wildcards: OUTDIR=test, sample=sub
    resources: tmpdir=/tmp

[Mon Feb 19 13:04:35 2024]
Finished job 7.
1 of 29 steps (3%) done
Select jobs to execute...

[Mon Feb 19 13:04:35 2024]
rule Generate_SE_Ubam:
    input: test/sub/preprocess/tagged_polyA_adapter_trimmed.bam
    output: test/sub/preprocess/unaligned_bc_umi_tagged.bam, test/sub/preprocess/fixed_header.sam
    jobid: 6
    reason: Missing output files: test/sub/preprocess/unaligned_bc_umi_tagged.bam; Input files updated by another job: test/sub/preprocess/tagged_polyA_adapter_trimmed.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 13:05:04 2024]
Finished job 6.
2 of 29 steps (7%) done
Removing temporary output test/sub/preprocess/fixed_header.sam.
Select jobs to execute...

[Mon Feb 19 13:05:04 2024]
rule STAR_Human:
    input: test/sub/preprocess/unaligned_bc_umi_tagged.bam, species/human/star_index
    output: test/sub/mapping/human_Aligned.out.bam
    log: test/sub/mapping/human_Log.progress.out, test/sub/mapping/human_Log.out, test/sub/mapping/human_SJ.out.tab, test/sub/mapping/human_Log.final.out, test/sub/logs/human_TagGeneFunction.log
    jobid: 9
    reason: Missing output files: test/sub/mapping/human_Aligned.out.bam; Input files updated by another job: test/sub/preprocess/unaligned_bc_umi_tagged.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 13:05:25 2024]
Error in rule STAR_Human:
    jobid: 9
    input: test/sub/preprocess/unaligned_bc_umi_tagged.bam, species/human/star_index
    output: test/sub/mapping/human_Aligned.out.bam
    log: test/sub/mapping/human_Log.progress.out, test/sub/mapping/human_Log.out, test/sub/mapping/human_SJ.out.tab, test/sub/mapping/human_Log.final.out, test/sub/logs/human_TagGeneFunction.log (check log file(s) for error details)
    shell:
        
        STAR --genomeDir species/human/star_index             --readFilesIn test/sub/preprocess/unaligned_bc_umi_tagged.bam             --outFileNamePrefix test/sub/mapping/human_             --sjdbGTFfile species/human/annotation.gtf             --readFilesCommand samtools view -f 4 --readFilesType SAM SE --outSAMtype BAM Unsorted --genomeLoad NoSharedMemory --outSAMprimaryFlag AllBestScore --outSAMattributes All --outSAMunmapped None --outStd BAM_Unsorted --limitOutSJcollapsed 5000000             --runThreadN 4 |             python /home/bstrope/Documents/Xenomake/xenomake/scripts/splice_bam_header.py --in-ubam test/sub/preprocess/unaligned_bc_umi_tagged.bam --in-bam /dev/stdin --out-bam /dev/stdout |             sambamba sort -t 4 -n /dev/stdin -o /dev/stdout |             /home/bstrope/Documents/Xenomake/xenomake/data/Drop-seq_tools-2.5.3/TagReadWithGeneFunction I=/dev/stdin O=test/sub/mapping/human_Aligned.out.bam ANNOTATIONS_FILE=species/human/annotation.gtf &> test/sub/logs/human_TagGeneFunction.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Select jobs to execute...

[Mon Feb 19 13:05:25 2024]
rule STAR_Mouse:
    input: test/sub/preprocess/unaligned_bc_umi_tagged.bam, species/mouse/star_index
    output: test/sub/mapping/mouse_Aligned.out.bam
    log: test/sub/mapping/mouse_Log.progress.out, test/sub/mapping/mouse_Log.out, test/sub/mapping/mouse_SJ.out.tab, test/sub/mapping/mouse_Log.final.out, test/sub/logs/mouse_TagGeneFunction.log
    jobid: 5
    reason: Missing output files: test/sub/mapping/mouse_Aligned.out.bam; Input files updated by another job: test/sub/preprocess/unaligned_bc_umi_tagged.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 13:05:42 2024]
Error in rule STAR_Mouse:
    jobid: 5
    input: test/sub/preprocess/unaligned_bc_umi_tagged.bam, species/mouse/star_index
    output: test/sub/mapping/mouse_Aligned.out.bam
    log: test/sub/mapping/mouse_Log.progress.out, test/sub/mapping/mouse_Log.out, test/sub/mapping/mouse_SJ.out.tab, test/sub/mapping/mouse_Log.final.out, test/sub/logs/mouse_TagGeneFunction.log (check log file(s) for error details)
    shell:
        
        STAR --genomeDir species/mouse/star_index             --readFilesIn test/sub/preprocess/unaligned_bc_umi_tagged.bam             --outFileNamePrefix test/sub/mapping/mouse_             --sjdbGTFfile species/mouse/annotation.gtf             --readFilesCommand samtools view -f 4 --readFilesType SAM SE --outSAMtype BAM Unsorted --genomeLoad NoSharedMemory --outSAMprimaryFlag AllBestScore --outSAMattributes All --outSAMunmapped None --outStd BAM_Unsorted --limitOutSJcollapsed 5000000             --runThreadN 4 |             python /home/bstrope/Documents/Xenomake/xenomake/scripts/splice_bam_header.py --in-ubam test/sub/preprocess/unaligned_bc_umi_tagged.bam --in-bam /dev/stdin --out-bam /dev/stdout | 
            sambamba sort -t 4 -n /dev/stdin -o /dev/stdout |             /home/bstrope/Documents/Xenomake/xenomake/data/Drop-seq_tools-2.5.3/TagReadWithGeneFunction I=/dev/stdin O=test/sub/mapping/mouse_Aligned.out.bam ANNOTATIONS_FILE=species/mouse/annotation.gtf &> test/sub/logs/mouse_TagGeneFunction.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-02-19T125958.182760.snakemake.log
