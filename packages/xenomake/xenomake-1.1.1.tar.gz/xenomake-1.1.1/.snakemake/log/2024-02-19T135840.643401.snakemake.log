Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 4
Rules claiming more threads will be scaled down.
Job stats:
job                            count
---------------------------  -------
DGE_Human                          1
DGE_Mouse                          1
Expression_QC                      1
Extract_Xenograft_Readnames        1
Filter_MultiMapped_Human           1
Filter_MultiMapped_Mouse           1
Find_Overlap_Reads                 1
H5ad_Human                         1
H5ad_Mouse                         1
HDF5_Human                         1
HDF5_Mouse                         1
Human_Downstream                   1
Human_Xenograft_BAM_Files          1
Make_Fastq                         1
Merge_Human                        1
Merge_Mouse                        1
Mouse_Downstream                   1
Mouse_Xenograft_BAM_Files          1
Remove_Overlapped_Reads            1
STAR_Human                         1
STAR_Mouse                         1
Subset_Overlapped                  1
Xengsort_Clasify                   1
all                                1
create_tissue_file                 1
filter_mm_ambiguous                1
filter_mm_both                     1
total                             27

Select jobs to execute...

[Mon Feb 19 13:58:40 2024]
rule STAR_Human:
    input: test/sub/preprocess/unaligned_bc_umi_tagged.bam, species/human/star_index
    output: test/sub/mapping/human_Aligned.out.bam
    log: test/sub/mapping/human_Log.progress.out, test/sub/mapping/human_Log.out, test/sub/mapping/human_SJ.out.tab, test/sub/mapping/human_Log.final.out, test/sub/logs/human_TagGeneFunction.log
    jobid: 9
    reason: Missing output files: test/sub/mapping/human_Aligned.out.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 14:08:41 2024]
Finished job 9.
1 of 27 steps (4%) done
Select jobs to execute...

[Mon Feb 19 14:08:41 2024]
rule STAR_Mouse:
    input: test/sub/preprocess/unaligned_bc_umi_tagged.bam, species/mouse/star_index
    output: test/sub/mapping/mouse_Aligned.out.bam
    log: test/sub/mapping/mouse_Log.progress.out, test/sub/mapping/mouse_Log.out, test/sub/mapping/mouse_SJ.out.tab, test/sub/mapping/mouse_Log.final.out, test/sub/logs/mouse_TagGeneFunction.log
    jobid: 5
    reason: Missing output files: test/sub/mapping/mouse_Aligned.out.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 14:17:39 2024]
Finished job 5.
2 of 27 steps (7%) done
Removing temporary output test/sub/preprocess/unaligned_bc_umi_tagged.bam.
Select jobs to execute...

[Mon Feb 19 14:17:39 2024]
rule Find_Overlap_Reads:
    input: test/sub/mapping/mouse_Aligned.out.bam, test/sub/mapping/human_Aligned.out.bam
    output: test/sub/sorting/overlapped.txt
    jobid: 10
    reason: Missing output files: test/sub/sorting/overlapped.txt; Input files updated by another job: test/sub/mapping/human_Aligned.out.bam, test/sub/mapping/mouse_Aligned.out.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 14:17:54 2024]
Finished job 10.
3 of 27 steps (11%) done
Select jobs to execute...

[Mon Feb 19 14:17:54 2024]
rule Remove_Overlapped_Reads:
    input: test/sub/mapping/mouse_Aligned.out.bam, test/sub/mapping/human_Aligned.out.bam, test/sub/sorting/overlapped.txt
    output: test/sub/human_remaining.bam, test/sub/mouse_remaining.bam
    log: test/sub/logs/subset_unique_reads.log
    jobid: 4
    reason: Missing output files: test/sub/mouse_remaining.bam, test/sub/human_remaining.bam; Input files updated by another job: test/sub/mapping/human_Aligned.out.bam, test/sub/sorting/overlapped.txt, test/sub/mapping/mouse_Aligned.out.bam
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 14:19:52 2024]
Finished job 4.
4 of 27 steps (15%) done
Select jobs to execute...

[Mon Feb 19 14:19:52 2024]
rule Subset_Overlapped:
    input: test/sub/mapping/mouse_Aligned.out.bam, test/sub/mapping/human_Aligned.out.bam, test/sub/sorting/overlapped.txt
    output: test/sub/sorting/mouse_overlapped.bam, test/sub/sorting/human_overlapped.bam
    log: test/sub/logs/subset_overlapped_reads.log
    jobid: 12
    reason: Missing output files: test/sub/sorting/human_overlapped.bam, test/sub/sorting/mouse_overlapped.bam; Input files updated by another job: test/sub/mapping/human_Aligned.out.bam, test/sub/sorting/overlapped.txt, test/sub/mapping/mouse_Aligned.out.bam
    wildcards: OUTDIR=test, sample=sub
    resources: tmpdir=/tmp

[Mon Feb 19 14:21:12 2024]
Finished job 12.
5 of 27 steps (19%) done
Removing temporary output test/sub/mapping/human_Aligned.out.bam.
Removing temporary output test/sub/sorting/overlapped.txt.
Select jobs to execute...

[Mon Feb 19 14:21:12 2024]
rule Make_Fastq:
    input: test/sub/sorting/mouse_overlapped.bam
    output: test/sub/sorting/overlapped.fastq
    jobid: 15
    reason: Missing output files: test/sub/sorting/overlapped.fastq; Input files updated by another job: test/sub/sorting/mouse_overlapped.bam
    wildcards: OUTDIR=test, sample=sub
    resources: tmpdir=/tmp

[Mon Feb 19 14:21:22 2024]
Finished job 15.
6 of 27 steps (22%) done
Select jobs to execute...

[Mon Feb 19 14:21:22 2024]
rule Xengsort_Clasify:
    input: test/sub/sorting/overlapped.fastq, species/idx.info, species/idx.hash
    output: test/sub/xengsort/sub-host.fq.gz, test/sub/xengsort/sub-graft.fq.gz, test/sub/xengsort/sub-ambiguous.fq.gz, test/sub/xengsort/sub-neither.fq.gz, test/sub/xengsort/sub-both.fq.gz, test/sub/xengsort/sub-unclassified.fq.gz
    jobid: 14
    reason: Missing output files: test/sub/xengsort/sub-both.fq.gz, test/sub/xengsort/sub-graft.fq.gz, test/sub/xengsort/sub-host.fq.gz, test/sub/xengsort/sub-neither.fq.gz, test/sub/xengsort/sub-ambiguous.fq.gz; Input files updated by another job: test/sub/sorting/overlapped.fastq
    wildcards: OUTDIR=test, sample=sub
    threads: 4
    resources: tmpdir=/tmp

[Mon Feb 19 14:21:22 2024]
Error in rule Xengsort_Clasify:
    jobid: 14
    input: test/sub/sorting/overlapped.fastq, species/idx.info, species/idx.hash
    output: test/sub/xengsort/sub-host.fq.gz, test/sub/xengsort/sub-graft.fq.gz, test/sub/xengsort/sub-ambiguous.fq.gz, test/sub/xengsort/sub-neither.fq.gz, test/sub/xengsort/sub-both.fq.gz, test/sub/xengsort/sub-unclassified.fq.gz
    shell:
        
        xengsort -DD classify         --index species/idx         --fastq test/sub/sorting/overlapped.fastq         --out test/sub/xengsort/sub         --threads 4         --chunksize 16.0 &> test/sub/logs/xengsort_classify.log
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-02-19T135840.643401.snakemake.log
