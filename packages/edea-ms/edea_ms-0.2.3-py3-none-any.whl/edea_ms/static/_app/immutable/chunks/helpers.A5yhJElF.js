import{f as $,e as L}from"./index.wrO0Lkaj.js";import{b as W,a as J,p as X}from"./entry.3G61wjjA.js";import{a0 as Y,I as G}from"./scheduler.rpzzQWFm.js";function Q(e){return e.toString().split(/[[\].]+/).filter(t=>t)}function z(e){return e.reduce((t,n)=>{const i=String(n);return typeof n=="number"||/^\d+$/.test(i)?t+=`[${i}]`:t?t+=`.${i}`:t+=i,t},"")}class w extends Error{constructor(t){super(t),Object.setPrototypeOf(this,w.prototype)}}function T(e,t,n){return e[t]=n,"skip"}function ee(e,t){return t.value!==void 0&&typeof t.value!="object"&&t.path.length<e.length}function Oe(e,t,n={}){n.modifier||(n.modifier=r=>ee(t,r)?void 0:r.value);const i=k(e,t,n.modifier);if(i)return n.value===void 0||n.value(i.value)?i:void 0}function k(e,t,n){if(!t.length||!e)return;const i=[t[0]];let r=e;for(;i.length<t.length;){const s=i[i.length-1],a=n?n({parent:r,key:String(s),value:r[s],path:i.map(f=>String(f)),isLeaf:!1,set:f=>T(r,s,f)}):r[s];if(a===void 0)return;r=a,i.push(t[i.length])}if(!r)return;const o=t[t.length-1];return{parent:r,key:String(o),value:r[o],path:t.map(s=>String(s)),isLeaf:!0,set:s=>T(r,o,s)}}function N(e,t,n=[]){for(const i in e){const r=e[i],o=r===null||typeof r!="object",s={parent:e,key:i,value:r,path:n.map(String).concat([i]),isLeaf:o,set:f=>T(e,i,f)},a=t(s);if(a==="abort")return a;if(a==="skip")continue;if(!o){const f=N(r,t,s.path);if(f==="abort")return f}}}async function je(e,t,n=[]){for(const i in e){const r=e[i],o=r===null||typeof r!="object",s={parent:e,key:i,value:r,path:n.map(String).concat([i]),isLeaf:o,set:f=>T(e,i,f)},a=await t(s);if(a==="abort")return a;if(a==="skip")break;if(!o){const f=N(r,t,s.path);if(f==="abort")return f}}}function te(e,t){return e===t||e.size===t.size&&[...e].every(n=>t.has(n))}function Ze(e,t){const n=new Map;function i(r,o){const s=k(o,r.path);function a(){n.set(r.path.join(" "),r.path)}r.isLeaf?s?r.value!==s.value&&a():a():s&&(r.value instanceof Date&&s.value instanceof Date&&r.value.getTime()!=s.value.getTime()||r.value instanceof Set&&s.value instanceof Set&&!te(r.value,s.value))&&a()}return N(e,r=>i(r,t)),N(t,r=>i(r,e)),Array.from(n.values())}function ne(e,t,n){for(const i of t){const r=k(e,i,({parent:o,key:s,value:a})=>((a===void 0||typeof a!="object")&&(o[s]={}),o[s]));r&&(r.parent[r.key]=n)}}function V(e,t,n){typeof n.value=="object"&&(n.value=S(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function S(e){if(typeof e!="object")return e;var t=0,n,i,r,o=Object.prototype.toString.call(e);if(o==="[object Object]"?r=Object.create(e.__proto__||null):o==="[object Array]"?r=Array(e.length):o==="[object Set]"?(r=new Set,e.forEach(function(s){r.add(S(s))})):o==="[object Map]"?(r=new Map,e.forEach(function(s,a){r.set(S(a),S(s))})):o==="[object Date]"?r=new Date(+e):o==="[object RegExp]"?r=new RegExp(e.source,e.flags):o==="[object DataView]"?r=new e.constructor(S(e.buffer)):o==="[object ArrayBuffer]"?r=e.slice(0):o.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)V(r,i[t],Object.getOwnPropertyDescriptor(e,i[t]));for(t=0,i=Object.getOwnPropertyNames(e);t<i.length;t++)Object.hasOwnProperty.call(r,n=i[t])&&r[n]===e[n]||V(r,n,Object.getOwnPropertyDescriptor(e,n))}return r||e}function v(e){return S(e)}function O(e){const t=e;let n=!0,i=!1,r=!1,o=!1,s,a;for(;n;)switch(e._def.typeName){case"ZodNullable":i=!0,e=e.unwrap();break;case"ZodDefault":o=!0,a=e._def.defaultValue(),e=e._def.innerType;break;case"ZodOptional":r=!0,e=e.unwrap();break;case"ZodEffects":s||(s=e),e=e._def.schema;break;case"ZodPipeline":e=e._def.out;break;case"ZodBranded":e=e.unwrap();break;default:n=!1}return{zodType:e,originalType:t,isNullable:i,isOptional:r,hasDefault:o,defaultValue:a,effects:s}}function re(e){let t=0;for(let n=0,i=e.length;n<i;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t<0&&(t=t>>>0),t.toString(36)}function ie(e){return re(D(e))}function D(e){let t="";const n=O(e);switch(n.zodType._def.typeName){case"ZodObject":{for(const[i,r]of Object.entries(n.zodType.shape))t+="ZodObject:"+i+":"+D(r);break}case"ZodArray":{const i=n.zodType;t+="ZodArray:"+D(i.element);break}default:t+=n.zodType._def.typeName}return t}function oe(e,t){const n=ae(e);if(n)return n;const i={typeInfo:F(e),defaultEntity:U(e),constraints:C(e,t),keys:Object.keys(e.keyof().Values),hash:ie(e),errorShape:fe(e)};return se(e,i),i}function se(e,t){R.set(e,t)}function ae(e){return R.get(e)}const R=new WeakMap;function F(e){return q(e,t=>O(t))}function B(e,t){if(e)return e;const{zodType:n,isNullable:i,isOptional:r,hasDefault:o,defaultValue:s}=t;if(o)return s;if(i)return null;if(!r){if(n._def.typeName=="ZodString")return"";if(n._def.typeName=="ZodNumber")return 0;if(n._def.typeName=="ZodBoolean")return!1;if(n._def.typeName=="ZodArray")return[];if(n._def.typeName=="ZodObject")return U(n);if(n._def.typeName=="ZodSet")return new Set;if(n._def.typeName=="ZodRecord")return{};if(n._def.typeName=="ZodBigInt")return BigInt(0);if(n._def.typeName=="ZodSymbol")return Symbol()}}function U(e){for(;e._def.typeName=="ZodEffects";)e=e._def.schema;if(e._def.typeName!="ZodObject")throw new w("Only Zod schema objects can be used with defaultValues. Define the schema with z.object({ ... }) and optionally refine/superRefine/transform at the end.");const t=e,n=Object.keys(t.keyof().Values),i=F(t);return Object.fromEntries(n.map(r=>{const o=i[r],s=B(void 0,o);return[r,s]}))}function C(e,t){function n(r,o,s){const a={};if(o._def.typeName=="ZodString"){const f=o,l=f._def.checks.filter(c=>c.kind=="regex");l.length>1&&(t==null?void 0:t.multipleRegexps)!==!1&&console.warn(`Field "${r}" has more than one regexp, only the first one will be used in constraints. Set the warnings.multipleRegexps option to false to disable this warning.`);const u=l.length>0&&l[0].kind=="regex"?l[0].regex.source:void 0;u&&(a.pattern=u),f.minLength!==null&&(a.minlength=f.minLength),f.maxLength!==null&&(a.maxlength=f.maxLength)}else if(o._def.typeName=="ZodNumber"){const f=o,l=f._def.checks.filter(c=>c.kind=="multipleOf");l.length>1&&(t==null?void 0:t.multipleSteps)!==!1&&console.warn(`Field "${r}" has more than one step, only the first one will be used in constraints. Set the warnings.multipleSteps option to false to disable this warning.`);const u=l.length>0&&l[0].kind=="multipleOf"?l[0].value:null;f.minValue!==null&&(a.min=f.minValue),f.maxValue!==null&&(a.max=f.maxValue),u!==null&&(a.step=u)}else if(o._def.typeName=="ZodDate"){const f=o;f.minDate&&(a.min=f.minDate.toISOString()),f.maxDate&&(a.max=f.maxDate.toISOString())}else o._def.typeName=="ZodArray"&&(o._def.minLength&&(a.min=o._def.minLength.value),o._def.maxLength&&(a.max=o._def.maxLength.value),o._def.exactLength&&(a.min=a.max=o._def.exactLength.value));return!s.isNullable&&!s.isOptional&&(a.required=!0),Object.keys(a).length>0?a:void 0}function i(r,o){const s=O(o);return o=s.zodType,o._def.typeName=="ZodArray"?i(r,o._def.type):o._def.typeName=="ZodObject"?C(o,t):n(r,o,s)}return q(e,(r,o)=>i(o,r),r=>!!r)}function q(e,t,n){const i=e.keyof().Values;return Object.fromEntries(Object.keys(i).map(r=>[r,t(e.shape[r],r)]).filter(r=>n?n(r[1]):!0))}const A=new WeakMap;function fe(e){return A.has(e)||A.set(e,Z(e)),A.get(e)}function Z(e){const t=O(e).zodType;if(t._def.typeName=="ZodObject")return Object.fromEntries(Object.entries(t.shape).map(([n,i])=>[n,Z(i)]).filter(n=>n[1]!==void 0));if(t._def.typeName=="ZodArray")return Z(t._def.type)??{};if(t._def.typeName=="ZodRecord")return Z(t._def.valueType)??{};if(t._def.typeName=="ZodUnion")return t._def.options.reduce((i,r)=>{const o=Z(r);return o&&(i={...i??{},...o}),i},void 0)}function P(e,t,n=!0){const i={},r=Object.entries(e);if("_errors"in e&&e._errors.length){if(!t||!n)return e._errors;i._errors=e._errors}for(const[o,s]of r.filter(([a])=>a!=="_errors")){const a=/^\d+$/.test(o);i[o]=P(s,t?a?t:t[o]:void 0,!!(t!=null&&t[o]))}return i}function Ne(e){return M(e,[])}function M(e,t){return Object.entries(e).filter(([,i])=>i!==void 0).flatMap(([i,r])=>{if(Array.isArray(r)&&r.length>0){const o=t.concat([i]);return{path:z(o),messages:r}}else return M(e[i],t.concat([i]))})}function Te(e,t){e.update(n=>(N(n,i=>{if(!(i.path.length==1&&i.path[0]=="_errors"&&!t.clearFormLevelErrors)&&Array.isArray(i.value))return i.set(void 0)}),t.undefinePath&&ne(n,[t.undefinePath],void 0),n))}const ue=(e,t=0)=>{const n=e.getBoundingClientRect();return n.top>=t&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},le=(e,t=1.125,n="smooth")=>{const o=e.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*t);window.scrollTo({left:0,top:o,behavior:n})};var y;(function(e){e[e.Idle=0]="Idle",e[e.Submitting=1]="Submitting",e[e.Delayed=2]="Delayed",e[e.Timeout=3]="Timeout"})(y||(y={}));const ce=new Set;let x=!1;function ke(e,t,n){let i=y.Idle,r,o,s=!1;const a=ce;function f(){l(),c(i!=y.Delayed?y.Submitting:y.Delayed),r=window.setTimeout(()=>{r&&i==y.Submitting&&c(y.Delayed)},n.delayMs),o=window.setTimeout(()=>{o&&i==y.Delayed&&c(y.Timeout)},n.timeoutMs),a.add(l)}function l(){clearTimeout(r),clearTimeout(o),r=o=0,a.delete(l),c(y.Idle)}function u(){a.forEach(p=>p()),a.clear()}function c(p){i=p,t.submitting.set(i>=y.Submitting),t.delayed.set(i>=y.Delayed),t.timeout.set(i>=y.Timeout)}const b=e;function g(p){const h=p.target;n.selectErrorText&&h.select()}function d(){n.selectErrorText&&b.querySelectorAll("input").forEach(p=>{p.addEventListener("invalid",g)})}function m(){n.selectErrorText&&b.querySelectorAll("input").forEach(p=>p.removeEventListener("invalid",g))}const E=e;function K(p){return typeof n.autoFocusOnError=="boolean"?n.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(p)}const I=async()=>{if(n.scrollToError=="off")return;const p=n.errorSelector;if(!p)return;await G();let h;if(h=E.querySelector(p),!h)return;h=h.querySelector(p)??h;const j=n.stickyNavbar?document.querySelector(n.stickyNavbar):null;if(typeof n.scrollToError!="string"?h.scrollIntoView(n.scrollToError):ue(h,(j==null?void 0:j.offsetHeight)??0)||le(h,void 0,n.scrollToError),!K(navigator.userAgent))return;let _;if(_=h,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(_.tagName)||(_=_.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),_)try{_.focus({preventScroll:!0}),n.selectErrorText&&_.tagName=="INPUT"&&_.select()}catch{}};{d();const p=(h,j=!1)=>{l(),h||setTimeout(I),j&&!s&&u()};return Y(()=>{m(),p(!0)}),x||(W(()=>{s=!0}),J(h=>{h.type!="enter"&&(s=!1,u())}),x=!0),{submitting:()=>{s=!1,f()},completed:p,scrollToFirstError:()=>{setTimeout(I)},isSubmitting:()=>i===y.Submitting||i===y.Delayed}}}function de(e,t,n,i){(n==null||typeof n!="string"&&!Array.isArray(n))&&(i=n,n=t,t=""),i===void 0&&(i={});const r=Array.isArray(n)?n:[n];if(e.errors||(e.errors={}),t===null||t==="")e.errors._errors||(e.errors._errors=[]),e.errors._errors=i.overwrite?r:e.errors._errors.concat(r);else{const o=Q(t),s=k(e.errors,o,({parent:a,key:f,value:l})=>(l===void 0&&(a[f]={}),a[f]));s&&(s.parent[s.key]=Array.isArray(s.value)&&!i.overwrite?s.value.concat(r):r)}return e.valid=!1,$(i.status??400,{form:e})}function me(e,t,n){const i={},r={},{schemaKeys:o,entityInfo:s}=t;for(const l of o){const u=s.typeInfo[l],c=e.getAll(l);if(u.zodType._def.typeName!="ZodArray")r[l]=a(l,c[0],u);else{const b=O(u.zodType._def.type);r[l]=c.map(g=>a(l,g,b))}!c.length&&!u.isOptional?i[l]=void 0:i[l]=r[l]}for(const l of Object.keys(i))i[l]===void 0&&delete i[l];return{parsed:r,partial:i};function a(l,u,c){if(n&&n.includes(l))return u;if(!(u&&typeof u!="string"))return f(l,u,c)}function f(l,u,c){const b=B(u,c),g=c.zodType,d=g._def.typeName;if(!u&&d!="ZodBoolean")return b;if(d=="ZodString")return u;if(d=="ZodNumber")return g.isInt?parseInt(u??"",10):parseFloat(u??"");if(d=="ZodBoolean")return(!!(u!="false"&&u)).valueOf();if(d=="ZodDate")return new Date(u??"");if(d=="ZodArray"){const m=O(g._def.type);return f(l,u,m)}else if(d=="ZodBigInt")try{return BigInt(u??".")}catch{return NaN}else if(d=="ZodLiteral"){const m=typeof g.value;if(m==="string")return u;if(m==="number")return parseFloat(u??"");if(m==="boolean")return(!!u).valueOf();throw new w("Unsupported ZodLiteral type: "+m)}else{if(d=="ZodUnion"||d=="ZodEnum"||d=="ZodAny")return u;if(d=="ZodNativeEnum"){const m=g;if(u!==null&&u in m.enum){const E=m.enum[u];if(typeof E=="number")return E;if(E in m.enum)return m.enum[E]}else if(u!==null&&Object.values(m.enum).includes(u))return u;return}else if(d=="ZodSymbol")return Symbol(String(u))}throw d=="ZodObject"?new w(`Object found in form field "${l}". Set the dataType option to "json" and add use:enhance on the client to use nested data structures. More information: https://superforms.rocks/concepts/nested-data`):new w("Unsupported Zod default type: "+g.constructor.name)}}function pe(e,t){var i;const n=((i=t.opts)==null?void 0:i.strict)??!1;return e.data?n&&e.partialData?e.partialData:e.data:t.hasEffects||t.opts.errors===!0?t.entityInfo.defaultEntity:void 0}function H(e,t,n){var a;function i(){if(e.has("__superform_json"))try{const f=X(e.getAll("__superform_json").join("")??"");if(typeof f=="object")return f}catch{}return null}const r=i(),o=((a=e.get("__superform_id"))==null?void 0:a.toString())??void 0;if(r)return{id:o,data:r,posted:!0,partialData:null};const s=me(e,t,n);return{id:o,data:s.parsed,partialData:s.partial,posted:!0}}function ye(e,t,n){e instanceof URL&&(e=e.searchParams);const i=new FormData;for(const[o,s]of e.entries())i.append(o,s);const r=H(i,t,n);return r.posted=!1,r}function he(e,t,n){const{opts:i,entityInfo:r}=t,o=e.posted,s=e.data?i.id??e.id??r.hash:i.id??r.hash;if(e.data){const{opts:a,schemaKeys:f,entityInfo:l,unwrappedSchema:u}=t;if(!n)throw new w("Validation data exists without validation result.");if(n.success)return{id:s,valid:!0,posted:o,errors:{},data:n.data,constraints:l.constraints};{const c=e.data,b=a.errors!==!1?P(n.error.format(),l.errorShape):{},g=u._def.unknownKeys;let d;return a.strict?d=e.data:g=="passthrough"?d={...v(l.defaultEntity),...c}:d=Object.fromEntries(f.map(m=>[m,m in c?c[m]:v(l.defaultEntity[m])])),{id:s,valid:!1,posted:o,errors:b,data:d,constraints:l.constraints}}}else{let a,f={};const l=(n==null?void 0:n.success)??!1,u=i.errors??i.strict;return n&&(n.success?a=n.data:u&&(f=P(n.error.format(),r.errorShape))),{id:s,valid:l,posted:o,errors:f,data:a??v(r.defaultEntity),constraints:r.constraints}}}function ge(e,t){const n=e;let i=e,r=!1;for(;i._def.typeName=="ZodEffects";)r=!0,i=i._def.schema;if(i._def.typeName!="ZodObject")throw new w("Only Zod schema objects can be used with superValidate. Define the schema with z.object({ ... }) and optionally refine/superRefine/transform at the end.");const o=oe(i,t==null?void 0:t.warnings);return{originalSchema:n,unwrappedSchema:i,hasEffects:r,entityInfo:o,schemaKeys:o.keys,opts:t??{}}}function ve(e,t,n){e&&typeof e=="object"&&"safeParse"in e&&(n=t,t=e,e=null);const i=ge(t,n),r=e instanceof FormData?H(e,i,n==null?void 0:n.preprocessed):e instanceof URL||e instanceof URLSearchParams?ye(e,i):{id:void 0,data:e,partialData:e,posted:!1},o=pe(r,i),s=o?i.originalSchema.safeParse(o):void 0;return he(r,i,s)}async function Ae(e,t){const n=await e("/api/testruns/"+t).then(r=>(r.ok||L(r.status,r.statusText),r.json())),i=await e("/api/testruns/measurements/"+n.id).then(r=>(r.ok||L(r.status,r.statusText),r.json()));return{run:n,measurements:i}}async function De(e,t,n){let i="POST";return t.data.id&&(e+="/"+t.data.id,i="PUT"),await be(i,e,t,n)}async function be(e,t,n,i){let r="/api/"+t;const o=await fetch(r,{headers:{"Content-Type":"application/json"},method:e,body:JSON.stringify(i||n.data)}),s=await o.json();if(console.log(o),!o.ok)if(o.status==422)"error"in s&&"type"in s.error&&(s.error.type=="unique_violation"?de(n,s.error.field,"An entry with this value already exists"):console.log("TODO: implement this error type"));else throw new Error("TODO");return s}export{ke as F,w as S,je as a,N as b,ne as c,v as d,fe as e,Te as f,Ae as g,z as h,ee as i,Ne as j,Ze as k,ve as l,P as m,De as n,be as o,Oe as p,Q as s,k as t};
