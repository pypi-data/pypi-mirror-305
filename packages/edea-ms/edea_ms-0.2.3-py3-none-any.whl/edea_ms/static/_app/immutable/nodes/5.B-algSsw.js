import{g as W}from"../chunks/helpers.-wUFodJy.js";import{e as X}from"../chunks/index.CDaw0oyz.js";import{s as Z,e as T,a as B,c as j,b as D,p as x,g as H,f as b,q as I,i as V,h as m,u as L,k as ee,v as te,t as C,d as P,j as z,r as N,n as Y}from"../chunks/scheduler.C2stUBFB.js";import{S as ae,i as re,a as O,c as Q,t as M,g as U,b as le,d as ne,m as oe,e as se}from"../chunks/index.DZ7RTCBW.js";import{e as q,m as ie,g as ue}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.B34LZcCf.js";import{w as ce}from"../chunks/entry.B0jkFxvj.js";import{V as fe}from"../chunks/VegaLite.DXYyoW-9.js";const _e=async({fetch:u,url:e})=>{var f;let r=e.searchParams.get("id"),l=(f=e.searchParams.get("testruns"))==null?void 0:f.split(",").sort();const d=await u("/api/projects/"+r).then(a=>(a.ok||X(a.status,a.statusText),a.json()));let i=[];if(l)for(var n of l){const{run:a,measurements:s}=await W(u,n);i.push({run:a,measurements:s})}return{project:d,runs:i}},Ce=Object.freeze(Object.defineProperty({__proto__:null,load:_e},Symbol.toStringTag,{value:"Module"}));function F(u,e,r){const l=u.slice();return l[4]=e[r],l}function G(u,e,r){const l=u.slice();return l[4]=e[r],l}function J(u){let e,r,l=u[4].run.id+"",d,i,n=u[4].run.short_code+"",f;return{c(){e=T("th"),r=C("ID: "),d=C(l),i=C(", SC: "),f=C(n)},l(a){e=j(a,"TH",{});var s=D(e);r=P(s,"ID: "),d=P(s,l),i=P(s,", SC: "),f=P(s,n),s.forEach(b)},m(a,s){V(a,e,s),m(e,r),m(e,d),m(e,i),m(e,f)},p(a,s){s&1&&l!==(l=a[4].run.id+"")&&z(d,l),s&1&&n!==(n=a[4].run.short_code+"")&&z(f,n)},d(a){a&&b(e)}}}function de(u){let e,r,l=u[4].run.id+"",d;return{c(){e=T("p"),r=C("no viz for "),d=C(l)},l(i){e=j(i,"P",{});var n=D(e);r=P(n,"no viz for "),d=P(n,l),n.forEach(b)},m(i,n){V(i,e,n),m(e,r),m(e,d)},p(i,n){n&1&&l!==(l=i[4].run.id+"")&&z(d,l)},i:Y,o:Y,d(i){i&&b(e)}}}function he(u){var A;let e,r,l,d,i=u[4].run.id+"",n,f,a,s,k,E=u[4].run.started_at+"",p,S,c=u[4].run.completed_at+"",$,o,_,t,g;return _=new fe({props:{data:{measurements:u[4].measurements},spec:(A=u[4].run.data)==null?void 0:A.vega_lite,options:u[1]}}),{c(){e=T("td"),r=T("p"),l=T("a"),d=C("Run "),n=C(i),a=B(),s=T("p"),k=C("Started at "),p=C(E),S=C(", completed at "),$=C(c),o=B(),le(_.$$.fragment),t=B(),this.h()},l(v){e=j(v,"TD",{});var h=D(e);r=j(h,"P",{});var y=D(r);l=j(y,"A",{href:!0});var w=D(l);d=P(w,"Run "),n=P(w,i),w.forEach(b),y.forEach(b),a=H(h),s=j(h,"P",{});var R=D(s);k=P(R,"Started at "),p=P(R,E),S=P(R,", completed at "),$=P(R,c),R.forEach(b),o=H(h),ne(_.$$.fragment,h),t=H(h),h.forEach(b),this.h()},h(){I(l,"href",f="/testruns/"+u[4].run.id)},m(v,h){V(v,e,h),m(e,r),m(r,l),m(l,d),m(l,n),m(e,a),m(e,s),m(s,k),m(s,p),m(s,S),m(s,$),m(e,o),oe(_,e,null),m(e,t),g=!0},p(v,h){var w;(!g||h&1)&&i!==(i=v[4].run.id+"")&&z(n,i),(!g||h&1&&f!==(f="/testruns/"+v[4].run.id))&&I(l,"href",f),(!g||h&1)&&E!==(E=v[4].run.started_at+"")&&z(p,E),(!g||h&1)&&c!==(c=v[4].run.completed_at+"")&&z($,c);const y={};h&1&&(y.data={measurements:v[4].measurements}),h&1&&(y.spec=(w=v[4].run.data)==null?void 0:w.vega_lite),h&2&&(y.options=v[1]),_.$set(y)},i(v){g||(O(_.$$.fragment,v),g=!0)},o(v){M(_.$$.fragment,v),g=!1},d(v){v&&b(e),se(_)}}}function K(u){let e,r,l,d;const i=[he,de],n=[];function f(a,s){var k;return(k=a[4].run.data)!=null&&k.vega_lite?0:1}return e=f(u),r=n[e]=i[e](u),{c(){r.c(),l=N()},l(a){r.l(a),l=N()},m(a,s){n[e].m(a,s),V(a,l,s),d=!0},p(a,s){let k=e;e=f(a),e===k?n[e].p(a,s):(U(),M(n[k],1,1,()=>{n[k]=null}),Q(),r=n[e],r?r.p(a,s):(r=n[e]=i[e](a),r.c()),O(r,1),r.m(l.parentNode,l))},i(a){d||(O(r),d=!0)},o(a){M(r),d=!1},d(a){a&&b(l),n[e].d(a)}}}function me(u){let e,r,l="Compare testruns",d,i,n,f,a,s,k,E=q(u[0].runs),p=[];for(let o=0;o<E.length;o+=1)p[o]=J(G(u,E,o));let S=q(u[0].runs),c=[];for(let o=0;o<S.length;o+=1)c[o]=K(F(u,S,o));const $=o=>M(c[o],1,1,()=>{c[o]=null});return{c(){e=T("div"),r=T("h2"),r.textContent=l,d=B(),i=T("table"),n=T("thead");for(let o=0;o<p.length;o+=1)p[o].c();f=B(),a=T("tbody"),s=T("tr");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=j(o,"DIV",{class:!0});var _=D(e);r=j(_,"H2",{class:!0,"data-svelte-h":!0}),x(r)!=="svelte-2ihjxu"&&(r.textContent=l),d=H(_),i=j(_,"TABLE",{class:!0});var t=D(i);n=j(t,"THEAD",{});var g=D(n);for(let h=0;h<p.length;h+=1)p[h].l(g);g.forEach(b),f=H(t),a=j(t,"TBODY",{});var A=D(a);s=j(A,"TR",{});var v=D(s);for(let h=0;h<c.length;h+=1)c[h].l(v);v.forEach(b),A.forEach(b),t.forEach(b),_.forEach(b),this.h()},h(){I(r,"class","h2"),I(i,"class","table table-hover"),I(e,"class","container mx-auto p-8 space-y-8")},m(o,_){V(o,e,_),m(e,r),m(e,d),m(e,i),m(i,n);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(n,null);m(i,f),m(i,a),m(a,s);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(s,null);k=!0},p(o,[_]){if(_&1){E=q(o[0].runs);let t;for(t=0;t<E.length;t+=1){const g=G(o,E,t);p[t]?p[t].p(g,_):(p[t]=J(g),p[t].c(),p[t].m(n,null))}for(;t<p.length;t+=1)p[t].d(1);p.length=E.length}if(_&3){S=q(o[0].runs);let t;for(t=0;t<S.length;t+=1){const g=F(o,S,t);c[t]?(c[t].p(g,_),O(c[t],1)):(c[t]=K(g),c[t].c(),O(c[t],1),c[t].m(s,null))}for(U(),t=S.length;t<c.length;t+=1)$(t);Q()}},i(o){if(!k){for(let _=0;_<S.length;_+=1)O(c[_]);k=!0}},o(o){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)M(c[_]);k=!1},d(o){o&&b(e),L(p,o),L(c,o)}}}function pe(u,e,r){let l,{data:d}=e,n=ce({theme:void 0,actions:{export:!0,source:!1,compiled:!0,editor:!1}});return ee(u,n,f=>r(1,l=f)),te(async()=>{n.update(f=>(f.theme=ue()?void 0:"dark",f))}),ie.subscribe(f=>{n.update(a=>(a.theme=f?void 0:"dark",a))}),u.$$set=f=>{"data"in f&&r(0,d=f.data)},[d,l,n]}class Pe extends ae{constructor(e){super(),re(this,e,pe,me,Z,{data:0})}}export{Pe as component,Ce as universal};
