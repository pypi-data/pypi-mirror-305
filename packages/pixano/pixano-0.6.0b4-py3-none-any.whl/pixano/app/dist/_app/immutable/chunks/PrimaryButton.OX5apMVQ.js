import{D as ae,b as se,d as ne,c as I,e as J}from"./command.DIJoRAQP.js";import{J as le,s as w,p as k,i as D,f as y,y as S,m as v,z as L,P as h,l as E,e as Q,c as R,b as V,Q as T,I as p,u as j,v as z,w as N,L as q,N as oe,R as ie}from"./environment.DPxj9qQT.js";import{S as P,i as A,g as re,a as b,e as ue,t as g,c as F,b as G,m as H,d as K}from"./index.Blx_sngE.js";import{g as O,a as fe}from"./datasetStores.DZ0F3XM7.js";async function je(){let l,e;try{const s=await fetch("/datasets/info");s.ok?(l=await s.json(),e=l.map(n=>new ne(n))):(e=[],console.log("api.getDatasetsInfo -",s.status,s.statusText,await s.text()))}catch(s){e=[],console.log("api.getDatasetsInfo -",s)}return e}async function ze(l){let e;try{const s=await fetch(`/datasets/${l}`);s.ok?e=await s.json():(e={},console.log("api.getDataset -",s.status,s.statusText,await s.text()))}catch(s){e={},console.log("api.getDataset -",s)}return e}async function Ne(l,e=1,s=100,n){let t,a,i="";n&&n.model!==""&&n.search!==""&&(i=`&query=${n.search}&table=${n.model}`);try{const u=await fetch(`/browser/${l}/?skip=${(e-1)*s}&limit=${s}${i}`);u.ok?(a=await u.json(),t=new ae(a)):(t={},console.log("api.getBrowser -",u.status,u.statusText,await u.text()))}catch(u){t={},console.log("api.getBrowser -",u)}return t}async function Be(l){const e=[];for(let n=0;;n+=1e3)try{const t=await fetch(`/items/${l}/?limit=1000&skip=${n}`);if(t.ok){const a=await t.json();if(e.push(...a.map(i=>i.id)),a&&a.length<1e3)break}else{t.status!=404&&console.log("api.getDatasetItemsIds -",t.status,t.statusText,await t.text());break}}catch(t){console.log("api.getDatasetItemsIds -",t)}return e}async function Ce(l,e){let s,n;const t=Date.now();try{const a=await fetch(`/dataset_items/${l}/${e}`);a.ok?(s=await a.json(),n=new se(s)):(n={},console.log("api.getDatasetItem -",a.status,a.statusText,await a.text()))}catch(a){n={},console.log("api.getDatasetItem -",a)}return console.log("api.getDatasetItem - Done in",Date.now()-t),n}async function Pe(l,e,s){let n;try{const t=await fetch(`/datasets/${l}/items/${e}/embeddings/${s}`);t.ok?n=await t.json():(n={},console.log("api.getItemEmbeddings -",t.status,t.statusText,await t.text()))}catch(t){n={},console.log("api.getItemEmbeddings -",t)}return n}async function Ae(l,e,s,n){const t=n?`/${l}/${e}/${s.id}`:`/${l}/${e}/${s.table_info.name}/${s.id}`;try{const a=await fetch(t,{method:"DELETE"});a.ok||console.log("api.deleteSchema -",a.status,a.statusText,await a.text())}catch(a){console.log("api.deleteSchema -",a)}}async function Oe(l,e,s,n){const t=n?`/${l}/${e}/${s.id}`:`/${l}/${e}/${s.table_info.name}/${s.id}`;try{const a=await fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)});a.ok||console.log("api.addSchema -",a.status,a.statusText,await a.text())}catch(a){console.log("api.addSchema -",a)}}async function Je(l,e,s,n){const t=n?`/${l}/${e}/${s.id}`:`/${l}/${e}/${s.table_info.name}/${s.id}`;try{const a=await fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(s)});a.ok||console.log("api.updateSchema -",a.status,a.statusText,await a.text())}catch(a){console.log("api.updateSchema -",a)}}function Ue(){const l=le();return e=>{const{originalEvent:s}=e.detail,{cancelable:n}=e,t=s.type;l(t,{originalEvent:s,currentTarget:s.currentTarget},{cancelable:n})||e.preventDefault()}}function ce(l,e){const s=[];return e.builders.forEach(n=>{const t=n.action(l);t&&s.push(t)}),{destroy:()=>{s.forEach(n=>{n.destroy&&n.destroy()})}}}function U(l){const e={};return l.forEach(s=>{Object.keys(s).forEach(n=>{n!=="action"&&(e[n]=s[n])})}),e}function de(l){let e=l[0]?"a":"button",s,n,t=(l[0]?"a":"button")&&B(l);return{c(){t&&t.c(),s=k()},l(a){t&&t.l(a),s=k()},m(a,i){t&&t.m(a,i),D(a,s,i),n=!0},p(a,i){a[0],e?w(e,a[0]?"a":"button")?(t.d(1),t=B(a),e=a[0]?"a":"button",t.c(),t.m(s.parentNode,s)):t.p(a,i):(t=B(a),e=a[0]?"a":"button",t.c(),t.m(s.parentNode,s))},i(a){n||(g(t,a),n=!0)},o(a){b(t,a),n=!1},d(a){a&&y(s),t&&t.d(a)}}}function me(l){let e=l[0]?"a":"button",s,n,t=(l[0]?"a":"button")&&C(l);return{c(){t&&t.c(),s=k()},l(a){t&&t.l(a),s=k()},m(a,i){t&&t.m(a,i),D(a,s,i),n=!0},p(a,i){a[0],e?w(e,a[0]?"a":"button")?(t.d(1),t=C(a),e=a[0]?"a":"button",t.c(),t.m(s.parentNode,s)):t.p(a,i):(t=C(a),e=a[0]?"a":"button",t.c(),t.m(s.parentNode,s))},i(a){n||(g(t,a),n=!0)},o(a){b(t,a),n=!1},d(a){a&&y(s),t&&t.d(a)}}}function B(l){let e,s,n,t,a;const i=l[6].default,u=E(i,l,l[5],null);let o=[{type:s=l[0]?void 0:l[1]},{href:l[0]},{tabindex:"0"},l[4],l[3]],d={};for(let f=0;f<o.length;f+=1)d=v(d,o[f]);return{c(){e=Q(l[0]?"a":"button"),u&&u.c(),this.h()},l(f){e=R(f,((l[0]?"a":"button")||"null").toUpperCase(),{type:!0,href:!0,tabindex:!0});var r=V(e);u&&u.l(r),r.forEach(y),this.h()},h(){T(l[0]?"a":"button")(e,d)},m(f,r){D(f,e,r),u&&u.m(e,null),n=!0,t||(a=[p(e,"click",l[13]),p(e,"change",l[14]),p(e,"keydown",l[15]),p(e,"keyup",l[16]),p(e,"mouseenter",l[17]),p(e,"mouseleave",l[18])],t=!0)},p(f,r){u&&u.p&&(!n||r&32)&&j(u,i,f,f[5],n?N(i,f[5],r,null):z(f[5]),null),T(f[0]?"a":"button")(e,d=O(o,[(!n||r&3&&s!==(s=f[0]?void 0:f[1]))&&{type:s},(!n||r&1)&&{href:f[0]},{tabindex:"0"},r&16&&f[4],f[3]]))},i(f){n||(g(u,f),n=!0)},o(f){b(u,f),n=!1},d(f){f&&y(e),u&&u.d(f),t=!1,q(a)}}}function C(l){let e,s,n,t,a,i;const u=l[6].default,o=E(u,l,l[5],null);let d=[{type:s=l[0]?void 0:l[1]},{href:l[0]},{tabindex:"0"},U(l[2]),l[4],l[3]],f={};for(let r=0;r<d.length;r+=1)f=v(f,d[r]);return{c(){e=Q(l[0]?"a":"button"),o&&o.c(),this.h()},l(r){e=R(r,((l[0]?"a":"button")||"null").toUpperCase(),{type:!0,href:!0,tabindex:!0});var _=V(e);o&&o.l(_),_.forEach(y),this.h()},h(){T(l[0]?"a":"button")(e,f)},m(r,_){D(r,e,_),o&&o.m(e,null),t=!0,a||(i=[p(e,"click",l[7]),p(e,"change",l[8]),p(e,"keydown",l[9]),p(e,"keyup",l[10]),p(e,"mouseenter",l[11]),p(e,"mouseleave",l[12]),oe(n=ce.call(null,e,{builders:l[2]}))],a=!0)},p(r,_){o&&o.p&&(!t||_&32)&&j(o,u,r,r[5],t?N(u,r[5],_,null):z(r[5]),null),T(r[0]?"a":"button")(e,f=O(d,[(!t||_&3&&s!==(s=r[0]?void 0:r[1]))&&{type:s},(!t||_&1)&&{href:r[0]},{tabindex:"0"},_&4&&U(r[2]),_&16&&r[4],r[3]])),n&&ie(n.update)&&_&4&&n.update.call(null,{builders:r[2]})},i(r){t||(g(o,r),t=!0)},o(r){b(o,r),t=!1},d(r){r&&y(e),o&&o.d(r),a=!1,q(i)}}}function _e(l){let e,s,n,t;const a=[me,de],i=[];function u(o,d){return o[2]&&o[2].length?0:1}return e=u(l),s=i[e]=a[e](l),{c(){s.c(),n=k()},l(o){s.l(o),n=k()},m(o,d){i[e].m(o,d),D(o,n,d),t=!0},p(o,[d]){let f=e;e=u(o),e===f?i[e].p(o,d):(re(),b(i[f],1,1,()=>{i[f]=null}),ue(),s=i[e],s?s.p(o,d):(s=i[e]=a[e](o),s.c()),g(s,1),s.m(n.parentNode,n))},i(o){t||(g(s),t=!0)},o(o){b(s),t=!1},d(o){o&&y(n),i[e].d(o)}}}function he(l,e,s){const n=["href","type","builders"];let t=S(e,n),{$$slots:a={},$$scope:i}=e,{href:u=void 0}=e,{type:o=void 0}=e,{builders:d=[]}=e;const f={"data-bits-button-root":""};function r(c){h.call(this,l,c)}function _(c){h.call(this,l,c)}function m(c){h.call(this,l,c)}function M(c){h.call(this,l,c)}function W(c){h.call(this,l,c)}function X(c){h.call(this,l,c)}function Y(c){h.call(this,l,c)}function Z(c){h.call(this,l,c)}function $(c){h.call(this,l,c)}function x(c){h.call(this,l,c)}function ee(c){h.call(this,l,c)}function te(c){h.call(this,l,c)}return l.$$set=c=>{e=v(v({},e),L(c)),s(4,t=S(e,n)),"href"in c&&s(0,u=c.href),"type"in c&&s(1,o=c.type),"builders"in c&&s(2,d=c.builders),"$$scope"in c&&s(5,i=c.$$scope)},[u,o,d,f,t,i,a,r,_,m,M,W,X,Y,Z,$,x,ee,te]}let pe=class extends P{constructor(e){super(),A(this,e,he,_e,w,{href:0,type:1,builders:2})}};function be(l){let e;const s=l[5].default,n=E(s,l,l[8],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,a){n&&n.m(t,a),e=!0},p(t,a){n&&n.p&&(!e||a&256)&&j(n,s,t,t[8],e?N(s,t[8],a,null):z(t[8]),null)},i(t){e||(g(n,t),e=!0)},o(t){b(n,t),e=!1},d(t){n&&n.d(t)}}}function ge(l){let e,s;const n=[{builders:l[3]},{class:I(J({variant:l[1],size:l[2],className:l[0]}))},{type:"button"},l[4]];let t={$$slots:{default:[be]},$$scope:{ctx:l}};for(let a=0;a<n.length;a+=1)t=v(t,n[a]);return e=new pe({props:t}),e.$on("click",l[6]),e.$on("keydown",l[7]),{c(){F(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,i){H(e,a,i),s=!0},p(a,[i]){const u=i&31?O(n,[i&8&&{builders:a[3]},i&7&&{class:I(J({variant:a[1],size:a[2],className:a[0]}))},n[2],i&16&&fe(a[4])]):{};i&256&&(u.$$scope={dirty:i,ctx:a}),e.$set(u)},i(a){s||(g(e.$$.fragment,a),s=!0)},o(a){b(e.$$.fragment,a),s=!1},d(a){K(e,a)}}}function ye(l,e,s){const n=["class","variant","size","builders"];let t=S(e,n),{$$slots:a={},$$scope:i}=e,{class:u=void 0}=e,{variant:o="default"}=e,{size:d="default"}=e,{builders:f=[]}=e;function r(m){h.call(this,l,m)}function _(m){h.call(this,l,m)}return l.$$set=m=>{e=v(v({},e),L(m)),s(4,t=S(e,n)),"class"in m&&s(0,u=m.class),"variant"in m&&s(1,o=m.variant),"size"in m&&s(2,d=m.size),"builders"in m&&s(3,f=m.builders),"$$scope"in m&&s(8,i=m.$$scope)},[u,o,d,f,t,a,r,_,i]}class ve extends P{constructor(e){super(),A(this,e,ye,ge,w,{class:0,variant:1,size:2,builders:3})}}function ke(l){let e;const s=l[2].default,n=E(s,l,l[4],null);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,a){n&&n.m(t,a),e=!0},p(t,a){n&&n.p&&(!e||a&16)&&j(n,s,t,t[4],e?N(s,t[4],a,null):z(t[4]),null)},i(t){e||(g(n,t),e=!0)},o(t){b(n,t),e=!1},d(t){n&&n.d(t)}}}function we(l){let e,s;return e=new ve({props:{disabled:l[1],class:I("font-medium h-10 px-6 border rounded-full transition-colors flex gap-2 ",{"bg-primary hover:bg-primary-foreground border-primary hover:border-primary-foreground text-slate-50":l[0],"bg-white border-primary text-primary hover:bg-primary-light":!l[0]}),$$slots:{default:[ke]},$$scope:{ctx:l}}}),e.$on("click",l[3]),{c(){F(e.$$.fragment)},l(n){G(e.$$.fragment,n)},m(n,t){H(e,n,t),s=!0},p(n,[t]){const a={};t&2&&(a.disabled=n[1]),t&1&&(a.class=I("font-medium h-10 px-6 border rounded-full transition-colors flex gap-2 ",{"bg-primary hover:bg-primary-foreground border-primary hover:border-primary-foreground text-slate-50":n[0],"bg-white border-primary text-primary hover:bg-primary-light":!n[0]})),t&16&&(a.$$scope={dirty:t,ctx:n}),e.$set(a)},i(n){s||(g(e.$$.fragment,n),s=!0)},o(n){b(e.$$.fragment,n),s=!1},d(n){K(e,n)}}}function De(l,e,s){let{$$slots:n={},$$scope:t}=e,{isSelected:a=!1}=e,{disabled:i=!1}=e;function u(o){h.call(this,l,o)}return l.$$set=o=>{"isSelected"in o&&s(0,a=o.isSelected),"disabled"in o&&s(1,i=o.disabled),"$$scope"in o&&s(4,t=o.$$scope)},[a,i,n,u,t]}class Qe extends P{constructor(e){super(),A(this,e,De,we,w,{isSelected:0,disabled:1})}}export{ve as B,Qe as P,je as a,Ne as b,Ue as c,Pe as d,ze as e,Ce as f,Be as g,Ae as h,Oe as i,Je as u};
