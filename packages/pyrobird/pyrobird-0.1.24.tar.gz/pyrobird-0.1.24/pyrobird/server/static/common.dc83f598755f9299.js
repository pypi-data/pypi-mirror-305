"use strict";(self.webpackChunkfirebird=self.webpackChunkfirebird||[]).push([[2076],{7497:(E,y,f)=>{f.d(y,{a:()=>h});var s=f(4438),g=f(177);const C=["leftPaneContainer"],M=["rightPaneContainer"],v=[[["","header",""]],[["","centralPane",""]],[["","footer",""]],[["","leftPane",""]],[["","rightPane",""]]],d=["[header]","[centralPane]","[footer]","[leftPane]","[rightPane]"],l=r=>({"flex-basis":r});function P(r,c){}function m(r,c){if(1&r&&(s.j41(0,"div",11),s.SdG(1,3),s.DNE(2,P,0,0,"ng-template",null,0,s.C5r),s.k0s()),2&r){const t=s.XpG();s.Aen(s.eq3(2,l,t.leftPaneWidth+"px"))}}function o(r,c){if(1&r){const t=s.RV6();s.j41(0,"div",12),s.bIt("mousedown",function(a){s.eBV(t);const u=s.XpG();return s.Njj(u.onMouseDownLeft(a))}),s.k0s()}}function n(r,c){if(1&r){const t=s.RV6();s.j41(0,"div",13),s.bIt("mousedown",function(a){s.eBV(t);const u=s.XpG();return s.Njj(u.onMouseDownRight(a))}),s.k0s()}}function e(r,c){}function i(r,c){if(1&r&&(s.j41(0,"div",14),s.SdG(1,4),s.DNE(2,e,0,0,"ng-template",null,1,s.C5r),s.k0s()),2&r){const t=s.XpG();s.Aen(s.eq3(2,l,t.rightPaneWidth+"px"))}}let h=(()=>{class r{constructor(){this.onEndResizeLeft=new s.bkB,this.onEndResizeRight=new s.bkB,this.onVisibilityChangeRight=new s.bkB,this.onVisibilityChangeLeft=new s.bkB,this.isResizingLeft=!1,this.isResizingRight=!1,this.leftPaneWidth=250,this.rightPaneWidth=250,this.isLeftPaneVisible=!1,this.isRightPaneVisible=!1}onMouseDownLeft(t){this.isResizingLeft=!0,t.preventDefault()}onMouseDownRight(t){this.isResizingRight=!0,t.preventDefault()}onMouseMove(t){if(this.isResizingLeft){const a=window.innerWidth-this.rightPaneWidth-100;this.leftPaneWidth=Math.max(100,Math.min(t.clientX,a)),t.preventDefault()}else if(this.isResizingRight){const a=window.innerWidth-this.leftPaneWidth-100;let u=window.innerWidth-t.clientX;this.rightPaneWidth=Math.max(100,Math.min(u,a)),t.preventDefault()}}onMouseUp(){this.isResizingLeft&&(this.isResizingLeft=!1,this.onEndResizeLeft.emit(this.leftPaneWidth)),this.isResizingRight&&(this.isResizingRight=!1,this.onEndResizeRight.emit(this.rightPaneWidth))}addComponentToLeftPane(t,_){this.leftPaneContainer.clear();const a=this.leftPaneContainer.createComponent(t);return _&&Object.assign(a.instance,_),a}addComponentToRightPane(t,_){this.rightPaneContainer.clear();const a=this.rightPaneContainer.createComponent(t);return _&&Object.assign(a.instance,_),a}toggleLeftPane(){this.isLeftPaneVisible=!this.isLeftPaneVisible,this.onVisibilityChangeLeft.emit(this.isLeftPaneVisible)}toggleRightPane(){this.isRightPaneVisible=!this.isRightPaneVisible,this.onVisibilityChangeRight.emit(this.isRightPaneVisible)}static{this.\u0275fac=function(_){return new(_||r)}}static{this.\u0275cmp=s.VBU({type:r,selectors:[["app-display-shell"]],viewQuery:function(_,a){if(1&_&&(s.GBs(C,7,s.c1b),s.GBs(M,7,s.c1b)),2&_){let u;s.mGM(u=s.lsd())&&(a.leftPaneContainer=u.first),s.mGM(u=s.lsd())&&(a.rightPaneContainer=u.first)}},hostBindings:function(_,a){1&_&&s.bIt("mousemove",function(b){return a.onMouseMove(b)},!1,s.EBC)("mouseup",function(){return a.onMouseUp()},!1,s.EBC)},outputs:{onEndResizeLeft:"onEndResizeLeft",onEndResizeRight:"onEndResizeRight",onVisibilityChangeRight:"onVisibilityChangeRight",onVisibilityChangeLeft:"onVisibilityChangeLeft"},standalone:!0,features:[s.aNF],ngContentSelectors:d,decls:12,vars:4,consts:[["leftPaneContainer",""],["rightPaneContainer",""],[1,"display-shell"],[1,"header"],[1,"main-content"],["class","pane left-pane",3,"style",4,"ngIf"],["class","divider left-divider",3,"mousedown",4,"ngIf"],[1,"central-pane"],["class","divider right-divider",3,"mousedown",4,"ngIf"],["class","pane right-pane",3,"style",4,"ngIf"],[1,"footer"],[1,"pane","left-pane"],[1,"divider","left-divider",3,"mousedown"],[1,"divider","right-divider",3,"mousedown"],[1,"pane","right-pane"]],template:function(_,a){1&_&&(s.NAR(v),s.j41(0,"div",2)(1,"div",3),s.SdG(2),s.k0s(),s.j41(3,"div",4),s.DNE(4,m,4,4,"div",5)(5,o,1,0,"div",6),s.j41(6,"div",7),s.SdG(7,1),s.k0s(),s.DNE(8,n,1,0,"div",8)(9,i,4,4,"div",9),s.k0s(),s.j41(10,"div",10),s.SdG(11,2),s.k0s()()),2&_&&(s.R7$(4),s.Y8G("ngIf",a.isLeftPaneVisible),s.R7$(),s.Y8G("ngIf",a.isLeftPaneVisible),s.R7$(3),s.Y8G("ngIf",a.isRightPaneVisible),s.R7$(),s.Y8G("ngIf",a.isRightPaneVisible))},dependencies:[g.MD,g.bT],styles:[".display-shell[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100%;overflow:hidden;box-sizing:border-box}.header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;min-height:50px;box-sizing:border-box}.main-content[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex:1;overflow:hidden}.pane[_ngcontent-%COMP%]{overflow:auto;min-width:0}.central-pane[_ngcontent-%COMP%]{flex:1;overflow:auto}.divider[_ngcontent-%COMP%]{width:5px;cursor:col-resize;background-color:#000;-webkit-user-select:none;user-select:none}.left-divider[_ngcontent-%COMP%], .right-divider[_ngcontent-%COMP%]{cursor:col-resize}"]})}}return r})()},2695:(E,y,f)=>{f.r(y),f.d(y,{TLinePainter:()=>P});var s=f(467),g=f(6998),C=f(6224),M=f(9025),v=f(6714),d=f(6370);const l=(0,g.BIT)(14);class P extends C.JW{moveStart(o,n){const e=Math.sqrt((this.x1-this.x2)**2+(this.y1-this.y2)**2),i=Math.sqrt((o-this.x1)**2+(n-this.y1)**2)/e,h=Math.sqrt((o-this.x2)**2+(n-this.y2)**2)/e;this.side=i>.9?1:h>.9?-1:0}moveDrag(o,n){1!==this.side&&(this.x1+=o,this.y1+=n),-1!==this.side&&(this.x2+=o,this.y2+=n),this.draw_g.select("path").attr("d",this.createPath())}moveEnd(o){if(o)return;const n=this.getObject();let e="";n.fX1=this.svgToAxis("x",this.x1,this.isndc),n.fX2=this.svgToAxis("x",this.x2,this.isndc),n.fY1=this.svgToAxis("y",this.y1,this.isndc),n.fY2=this.svgToAxis("y",this.y2,this.isndc),1!==this.side&&(e+=`SetX1(${n.fX1});;SetY1(${n.fY1});;`),-1!==this.side&&(e+=`SetX2(${n.fX2});;SetY2(${n.fY2});;`),this.submitCanvExec(e+"Notify();;")}prepareDraw(){const o=this.getObject();this.isndc=o.TestBit(l);const n=this.getAxisToSvgFunc(this.isndc,!0,!0);this.x1=n.x(o.fX1),this.y1=n.y(o.fY1),this.x2=n.x(o.fX2),this.y2=n.y(o.fY2),this.createAttLine({attr:o})}createPath(){const o=Math.round(this.x1),n=Math.round(this.x2),e=Math.round(this.y1),i=Math.round(this.y2);return`M${o},${e}`+(o===n?`V${i}`:e===i?`H${n}`:`L${n},${i}`)}addExtras(){}redraw(){this.createG(),this.prepareDraw();const o=this.draw_g.append("svg:path").attr("d",this.createPath()).call(this.lineatt.func);return this.getObject()?.$do_not_draw?o.remove():(this.addExtras(o),(0,v.X2)(this),(0,d.wh)(this,d.Ew)),this}static draw(o,n,e){return(0,s.A)(function*(){const i=new P(o,n,e);return(0,M.ensureTCanvas)(i,!1).then(()=>i.redraw())})()}}},9109:(E,y,f)=>{f.d(y,{Y:()=>M});var s=f(467),g=f(6998),C=f(1069);function M(){return v.apply(this,arguments)}function v(){return(v=(0,s.A)(function*(){const d=this.$fp||this.getFramePainter();if(delete this.$fp,!((0,g.isObject)(d)&&d.grx&&d.gry&&d.grz))return this;const l=this.getObject(),m=l.fP;let o=1,n=0;for(let t=0;t<m.length;t+=3)m[t]<d.scale_xmin||m[t]>d.scale_xmax||m[t+1]<d.scale_ymin||m[t+1]>d.scale_ymax||m[t+2]<d.scale_zmin||m[t+2]>d.scale_zmax||++n;g.settings.OptimizeDraw>0&&n>5e4&&(o=Math.floor(n/5e4),o<=2&&(o=2));const e=Math.floor(n/o),i=new C._l(e,d.webgl,d.size_x3d/100),h=new Int32Array(e);let r=0,c=0;for(let t=0;t<m.length;t+=3)m[t]<d.scale_xmin||m[t]>d.scale_xmax||m[t+1]<d.scale_ymin||m[t+1]>d.scale_ymax||m[t+2]<d.scale_zmin||m[t+2]>d.scale_zmax||o>1&&(r=(r+1)%o,0!==r)||(h[c++]=t,i.addPoint(d.grx(m[t]),d.gry(m[t+1]),d.grz(m[t+2])));return i.createPoints({color:this.getColor(l.fMarkerColor),style:l.fMarkerStyle}).then(t=>(t.tip_color=3===l.fMarkerColor?16711680:65280,t.tip_name=l.fName||"Poly3D",t.poly=l,t.fp=d,t.scale0=.7*i.scale,t.index=h,d.add3DMesh(t,this,!0),t.tooltip=function(_){let a=Math.floor(_.index/this.nvertex);if(a<0||a>=this.index.length)return null;a=this.index[a];const u=this.fp,b=u.grx(this.poly.fP[a]),x=u.gry(this.poly.fP[a+1]),p=u.grz(this.poly.fP[a+2]);return{x1:b-this.scale0,x2:b+this.scale0,y1:x-this.scale0,y2:x+this.scale0,z1:p-this.scale0,z2:p+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+a/3,"x: "+u.axisAsText("x",this.poly.fP[a]),"y: "+u.axisAsText("y",this.poly.fP[a+1]),"z: "+u.axisAsText("z",this.poly.fP[a+2])]}},d.render3D(100),this))})).apply(this,arguments)}},230:(E,y,f)=>{f.r(y),f.d(y,{TF1Painter:()=>o,produceTAxisLogScale:()=>P,scanTF1Options:()=>m});var s=f(467),g=f(6998),C=f(9041),M=f(6224),v=f(3277),d=f(2953),l=f(3693);function P(n,e,i,h){let r,c;h>0?(c=Math.log(h),r=i>0?Math.log(i):c-5):(c=-10,r=-15),n.fNbins=e,n.fXbins=new Array(e+1);for(let t=0;t<=e;++t)n.fXbins[t]=Math.exp(r+t/e*(c-r));n.fXmin=Math.exp(r),n.fXmax=Math.exp(c)}function m(n){(0,g.isStr)(n)||(n="");let e=n.indexOf(";webcanv_hist"),i=!1,h=0;return e>=0&&(i=!0,n=n.slice(0,e)),e=n.indexOf(";force_saved"),e>=0&&(h=2,n=n.slice(0,e)),e=n.indexOf(";prefer_saved"),e>=0&&(h=1,n=n.slice(0,e)),{opt:n,webcanv_hist:i,use_saved:h}}class o extends d.N{getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??g.clTF1}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(e){if(!e||this.getClassName()!==e._typename)return!1;delete e.evalPar;const i=this.getHisto();if(this.webcanv_hist){const h=this.getPadPainter()?.findInPrimitives("Func",g.clTH1D);h&&this.updateAxes(i,h,this.getFramePainter())}return this.$func=e,this.createTF1Histogram(e,i),this.scanContent(),!0}redraw(e){return!this._use_saved_points&&("logx"===e||"zoom"===e)&&(this.createTF1Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(e)}createTF1Histogram(e,i){const h=this.getFramePainter(),r=this.getPadPainter()?.getRootPad(!0),c=r?.fLogx,t=h?.getGrFuncs(this.second_x,this.second_y);let _=e.fXmin,a=e.fXmax,u=Math.max(e.fNpx,100);if(t?.zoom_xmin!==t?.zoom_xmax){const x=(a-_)/u;_<t.zoom_xmin&&t.zoom_xmin<a&&(_=Math.max(_,t.zoom_xmin-x)),_<t.zoom_xmax&&t.zoom_xmax<a&&(a=Math.min(a,t.zoom_xmax+x))}this._use_saved_points=e.fSave.length>3&&(g.settings.PreferSavedPoints||this.use_saved>1);const b=x=>{i.fNcells!==x+2&&(i.fNcells=x+2,i.fArray=new Float32Array(i.fNcells)),i.fArray.fill(0),i.fXaxis.fNbins=x,i.fXaxis.fXbins=[]};if(delete this._fail_eval,!this._use_saved_points){let x=!1;if(!e.evalPar)try{(0,l.Dx)(e)||(x=!0)}catch{x=!0}b(u),c?P(i.fXaxis,u,_,a):(i.fXaxis.fXmin=_,i.fXaxis.fXmax=a);for(let p=0;p<u&&!x;p++){const D=i.fXaxis.GetBinCenter(p+1);let T=0;try{T=e.evalPar(D)}catch{x=!0}x||i.setBinContent(p+1,Number.isFinite(T)?T:0)}x&&(this._fail_eval=!0),x&&e.fSave.length>3&&(this._use_saved_points=!0)}if(this._use_saved_points){u=e.fSave.length-3;let x=null;if(_=e.fSave[u+1],a=e.fSave[u+2],_===a){const p=this.getMainPainter();(0,g.isFunc)(p?.getHisto)&&(x=p?.getHisto()?.fXaxis)}if(x){b(i.fXaxis.fNbins),Object.assign(i.fXaxis,x);for(let p=0;p<u;++p){const D=e.fSave[p];i.setBinContent(p+1,Number.isFinite(D)?D:0)}}else{b(e.fNpx),i.fXaxis.fXmin=e.fXmin,i.fXaxis.fXmax=e.fXmax;for(let p=0;p<e.fNpx;++p){const D=(0,l.YI)(e,i.fXaxis.GetBinCenter(p+1));i.setBinContent(p+1,Number.isFinite(D)?D:0)}}}i.fName="Func",(0,g.setHistogramTitle)(i,e.fTitle),i.fMinimum=e.fMinimum,i.fMaximum=e.fMaximum,i.fLineColor=e.fLineColor,i.fLineStyle=e.fLineStyle,i.fLineWidth=e.fLineWidth,i.fFillColor=e.fFillColor,i.fFillStyle=e.fFillStyle,i.fMarkerColor=e.fMarkerColor,i.fMarkerStyle=e.fMarkerStyle,i.fMarkerSize=e.fMarkerSize,i.fBits|=g.kNoStats}extractAxesProperties(e){super.extractAxesProperties(e);const i=this.$func,h=i?.fSave.length??0;h>3&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,i.fSave[h-2]),this.xmax=Math.max(this.xmax,i.fSave[h-1])),i&&(this.xmin=Math.min(this.xmin,i.fXmin),this.xmax=Math.max(this.xmax,i.fXmax))}canZoomInside(e,i,h){const r=this.$func?.fSave.length??0;if(r>3&&this._use_saved_points&&"x"===e){const c=r-2;return Math.abs(this.$func.fSave[r-1]-this.$func.fSave[r-2])/c<Math.abs(h-i)}return"x"===e||"y"===e}getTF1Tooltips(e){delete this.$tmp_tooltip;const i=[this.getObjectHint()],h=this.getFramePainter()?.getGrFuncs(this.options.second_x,this.options.second_y);if(!h||!(0,g.isFunc)(this.$func?.evalPar))return i.push("grx = "+e.x,"gry = "+e.y),i;const r=h.revertAxis("x",e.x);let c=0,t=0,_=!1;try{c=this.$func.evalPar(r),t=Math.round(h.gry(c))}catch{_=!0}return i.push("x = "+h.axisAsText("x",r),"value = "+(_?"<fail>":(0,C.lg)(c,g.gStyle.fStatFormat))),_||(this.$tmp_tooltip={y:c,gry:t}),i}processTooltipEvent(e){if(this._use_saved_points)return super.processTooltipEvent(e);let i=this.draw_g?.selectChild(".tooltip_bin");if(!this.draw_g||!e)return i?.remove(),null;const h={name:this.$func?.fName,title:this.$func?.fTitle,x:e.x,y:e.y,color1:this.lineatt?.color??"green",color2:this.fillatt?.getFillColorAlt("blue")??"blue",lines:this.getTF1Tooltips(e),exact:!0,menu:!0};return e.disabled?i.remove():(i.empty()&&(i=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").style("fill","none").attr("r",(this.lineatt?.width??1)+4)),i.attr("cx",e.x).attr("cy",this.$tmp_tooltip.gry??e.y).call(this.lineatt?.func)),h}fillWebObjectOptions(e){e.fcust=this._fail_eval&&!this.use_saved?"func_fail":""}static draw(e,i,h){return(0,s.A)(function*(){const r=m(h);let c;h=r.opt,delete r.opt,r.webcanv_hist&&(c=new M.JW(e).getPadPainter()?.findInPrimitives("Func",g.clTH1D)),c||(c=(0,g.createHistogram)(g.clTH1D,100),c.fBits|=g.kNoStats),!h&&(0,M.Nn)(e)&&(h="same");const t=new o(e,c);return t.$func=i,Object.assign(t,r),t.createTF1Histogram(i,c),v.mf._drawHist(t,h)})()}}},895:(E,y,f)=>{f.d(y,{k:()=>v});var s=f(467),g=f(4693),C=f(1516),M=f(1069);class v extends g.TGraphPainter{drawBins3D(l,P){if(!(l.mode3d&&l.grx&&l.gry&&l.grz&&l.toplevel))return console.log("Frame painter missing base 3d elements");if(l.zoom_xmin!==l.zoom_xmax&&(this.options.pos3d<l.zoom_xmin||this.options.pos3d>l.zoom_xmax))return;this.createGraphDrawAttributes(!0);const m=this.optimizeBins(1e3);let o=0,n=m.length-1;if(l.zoom_ymin!==l.zoom_ymax){for(;o<n&&m[o].x<l.zoom_ymin;)o++;for(;o<n&&m[n].x>l.zoom_ymax;)n--}if(o===n)return;const e=[],i=l.grx(this.options.pos3d);let h=m[o];for(let c=o+1;c<=n;++c){const t=m[c];e.push(i,l.gry(h.x),l.grz(h.y),i,l.gry(t.x),l.grz(t.y)),h=t}const r=(0,M.Fc)(e,(0,M.DH)(this,P));l.add3DMesh(r,this,!0),l.render3D(100)}drawAxisHisto(){var l=this;return(0,s.A)(function*(){return C.TH1Painter.draw(l.getDom(),l.createHistogram(),l.options.Axis)})()}static draw(l,P,m){return(0,s.A)(function*(){return v._drawGraph(new v(l,P),m)})()}}}}]);