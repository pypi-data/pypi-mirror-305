"use strict";(self.webpackChunkfirebird=self.webpackChunkfirebird||[]).push([[9902],{9902:(C,p,m)=>{m.r(p),m.d(p,{TMultiGraphPainter:()=>w});var l=m(467),x=m(6998),X=m(9041),O=m(6224),H=m(3277),T=m(2953),D=m(4693);class g extends O.JW{constructor(a,r){super(a,r),this.firstpainter=null,this.autorange=!1,this.painters=[]}cleanup(){this.painters=[],super.cleanup()}updateObject(a){if(!this.matchObjectType(a))return!1;const r=this.getObject(),i=a.fGraphs,s=this.getPadPainter();r.fTitle=a.fTitle;let t=!1;if(this.firstpainter){let n=a.fHistogram;this.autorange&&!n&&(n=this.scanGraphsRange(i)),this.firstpainter.updateObject(n)&&(t=!0)}const e=Math.min(i.arr.length,this.painters.length);for(let n=0;n<e;++n)this.painters[n].updateObject(i.arr[n],(i.opt[n]||this._restopt)+this._auto)&&(t=!0);return this._funcHandler=new H.eP(this,s,a.fFunctions),t}redraw(a){var r=this;return(0,l.A)(function*(){const i=r.firstpainter?.redraw(a)??Promise.resolve(!0),s=function(){var t=(0,l.A)(function*(e){return e>=r.painters.length?r:r.painters[e].redraw(a).then(()=>s(e+1))});return function(n){return t.apply(this,arguments)}}();return i.then(()=>s(0)).then(()=>{const t=r._funcHandler?.drawNext(0)??r;return delete r._funcHandler,t})})()}scanGraphsRange(a,r,i){const s=this.getObject(),t={xmin:0,xmax:0,ymin:0,ymax:0,first:!0};let e,n,h=!1,o=!1,P=!1,G="";i&&(h=i.fLogx,o=i.fLogv??i.fLogy,t.xmin=i.fUxmin,t.xmax=i.fUxmax,t.ymin=i.fUymin,t.ymax=i.fUymax,t.first=!1),this._3d&&r&&!r.fXaxis.fLabels&&(r=null),r||(this.autorange=!0,a.arr[0]?.fHistogram?.fXaxis?.fTimeDisplay&&(P=!0,G=a.arr[0].fHistogram.fXaxis.fTimeFormat)),a.arr.forEach(f=>{if(0!==f.fNpoints){t.first&&(t.xmin=t.xmax=f.fX[0],t.ymin=t.ymax=f.fY[0],t.first=!1);for(let c=0;c<f.fNpoints;++c)t.xmin=Math.min(t.xmin,f.fX[c]),t.xmax=Math.max(t.xmax,f.fX[c]),t.ymin=Math.min(t.ymin,f.fY[c]),t.ymax=Math.max(t.ymax,f.fY[c])}}),t.xmin===t.xmax&&(t.xmax+=1),t.ymin===t.ymax&&(t.ymax+=1);const M=.05*(t.xmax-t.xmin),A=.05*(t.ymax-t.ymin);let d=t.xmin-M,y=t.xmax+M;o?(t.ymin<=0&&(t.ymin=.001*t.ymax),n=t.ymin/(1+.5*Math.log10(t.ymax/t.ymin)),e=t.ymax*(1+.2*Math.log10(t.ymax/t.ymin))):(n=t.ymin-A,e=t.ymax+A),n<0&&t.ymin>=0&&(n=0),e>0&&t.ymax<=0&&(e=0);const F=n,b=e;if(d<0&&t.xmin>=0&&(d=h?.9*t.xmin:0),y>0&&t.xmax<=0&&(y=h?1.1*t.xmax:0),s.fMinimum!==x.kNoZoom&&(t.ymin=n=s.fMinimum),s.fMaximum!==x.kNoZoom&&(t.ymax=e=s.fMaximum),n<0&&t.ymin>=0&&o&&(n=.9*t.ymin),e>0&&t.ymax<=0&&o&&(e=1.1*t.ymax),n<=0&&o&&(n=.001*e),!o&&n>0&&n<.05*e&&(n=0),d<=0&&h&&(d=y>1e3?1:.001*y),!r){let f,c;if(this._3d){f=(r=(0,x.createHistogram)(x.clTH2I,a.arr.length,10)).fXaxis,f.fXmin=0,f.fXmax=a.arr.length,f.fLabels=(0,x.create)(x.clTHashList);for(let u=0;u<a.arr.length;u++){const v=(0,x.create)(x.clTObjString);v.fString=a.arr[u].fTitle||`gr${u}`,v.fUniqueID=a.arr.length-u,f.fLabels.Add(v,"")}f=r.fYaxis,c=r.fZaxis}else f=(r=(0,x.createHistogram)(x.clTH1I,10)).fXaxis,c=r.fYaxis;if(r.fTitle=s.fTitle,r.fTitle.indexOf(";")>=0){const u=r.fTitle.split(";");r.fTitle=u[0],u[1]&&(f.fTitle=u[1]),u[2]&&(c.fTitle=u[2])}f.fXmin=d,f.fXmax=y,f.fTimeDisplay=P,P&&(f.fTimeFormat=G)}const N=this._3d?r.fZaxis:r.fYaxis;return N.fXmin=Math.min(n,F),N.fXmax=Math.max(e,b),r.fMinimum=n,r.fMaximum=e,r.fBits|=x.kNoStats,r}drawAxisHist(a,r){var i=this;return(0,l.A)(function*(){return T.N.draw(i.getDom(),a,r)})()}drawGraph(a,r){var i=this;return(0,l.A)(function*(){return D.TGraphPainter.draw(i.getDom(),a,r)})()}drawNextGraph(a){var r=this;return(0,l.A)(function*(){const i=r.getObject().fGraphs;if(a>=i.arr.length)return r;const s=i.arr[a],t=(i.opt[a]||r._restopt)+r._auto;return r._auto&&(s.$num_graphs=i.arr.length),r.drawGraph(s,t,i.arr.length-a).then(e=>(e&&(e.setSecondaryId(r,`graphs_${a}`),r.painters.push(e)),r.drawNextGraph(a+1)))})()}static _drawMG(a,r){return(0,l.A)(function*(){const i=new X.nC(r);a._3d=i.check("3D"),a._auto="",["PFC","PLC","PMC"].forEach(e=>{i.check(e)&&(a._auto+=" "+e)});let s="";i.check("FB")&&a._3d&&(s+="FB"),T.c.forEach(e=>{i.check(e)&&(s+=";"+e)}),a._restopt=i.remain();let t=Promise.resolve(!0);if(i.check("A")||!a.getMainPainter()){const e=a.getObject(),n=a.scanGraphsRange(e.fGraphs,e.fHistogram,a.getPadPainter()?.getRootPad(!0));t=a.drawAxisHist(n,s).then(h=>{h.setSecondaryId(a,"hist"),a.firstpainter=h})}return t.then(()=>(a.addToPadPrimitives(),a.drawNextGraph(0))).then(()=>new H.eP(a,a.getPadPainter(),a.getObject().fFunctions,!0).drawNext(0))})()}static draw(a,r,i){return(0,l.A)(function*(){return g._drawMG(new g(a,r),i)})()}}var L=m(4149),j=m(895);class w extends g{drawAxisHist(a,r){var i=this;return(0,l.A)(function*(){return i._3d?L.TH2Painter.draw(i.getDom(),a,"LEGO"+r):T.N.draw(i.getDom(),a,r)})()}drawGraph(a,r,i){var s=this;return(0,l.A)(function*(){return s._3d&&(r+="pos3d_"+i),j.k.draw(s.getDom(),a,r)})()}static draw(a,r,i){return(0,l.A)(function*(){return w._drawMG(new w(a,r),i)})()}}}}]);