(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9284],{82136:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]/[subfieldUrn]",function(){return a(39331)}])},60262:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var l=a(24246);let i=(0,a(6173).IUT)({displayName:"FieldIcon",viewBox:"0 0 16 16",path:(0,l.jsx)("path",{d:"M12.6667 12.6667V10.6667H3.33333V12.6667H12.6667ZM12.6667 9.33333V6.66667H3.33333V9.33333H12.6667ZM12.6667 5.33333V3.33333H3.33333V5.33333H12.6667ZM3.33333 14C2.96667 14 2.65278 13.8694 2.39167 13.6083C2.13056 13.3472 2 13.0333 2 12.6667V3.33333C2 2.96667 2.13056 2.65278 2.39167 2.39167C2.65278 2.13056 2.96667 2 3.33333 2H12.6667C13.0333 2 13.3472 2.13056 13.6083 2.39167C13.8694 2.65278 14 2.96667 14 3.33333V12.6667C14 13.0333 13.8694 13.3472 13.6083 13.6083C13.3472 13.8694 13.0333 14 12.6667 14H3.33333Z",fill:"currentColor"})})},39331:function(e,t,a){"use strict";a.r(t);var l=a(24246),i=a(92222),s=a(59003),o=a(6173),n=a(30454),d=a.n(n),r=a(47215),c=a.n(r),u=a(86677),m=a(27378),x=a(90824),f=a(62257),g=a(60262),h=a(29137),b=a(43124),j=a(11032),p=a(37541),v=a(52850),C=a(19906),w=a(52987),_=a(64712),k=a(39006),y=a(89955),R=a(5067);let M=(0,i.Cl)(),V=()=>(0,l.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsx)(o.gCW,{children:(0,l.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,u.useRouter)(),[t]=(0,w.TG)(),a=e.query.datasetId,n=e.query.collectionName,r=e.query.subfieldUrn||"",N=r.split("."),{isLoading:z,data:H}=(0,w.oM)(a),S=(0,m.useMemo)(()=>(null==H?void 0:H.collections)||[],[H]).find(e=>e.name===n),T=(0,m.useMemo)(()=>(null==S?void 0:S.fields)||[],[S]),U=(0,m.useMemo)(()=>{let e=T;return N.forEach(t=>{let a=e.find(e=>e.name===t);e=(null==a?void 0:a.fields)||[]}),e},[T,N]),[Z,F]=(0,m.useState)(),q=(0,m.useCallback)(e=>{let{dataCategory:a,field:l}=e,i=l.data_categories||[],s=(0,R.Fk)({dataset:H,collectionName:n,subfieldUrn:"".concat(r).concat(_.UP).concat(null==l?void 0:l.name)}),o=d()(H);c()(o,"".concat(s,".data_categories"),[...i,a]),t(o)},[H,t,n,r]),E=(0,m.useCallback)(e=>{let{dataCategory:a,field:l}=e,i=l.data_categories||[],s=(0,R.Fk)({dataset:H,collectionName:n,subfieldUrn:"".concat(r).concat(_.UP).concat(null==l?void 0:l.name)}),o=d()(H);c()(o,"".concat(s,".data_categories"),i.filter(e=>e!==a)),t(o)},[H,t,n,r]),I=(0,m.useCallback)(t=>{e.push({pathname:j.y1,query:{datasetId:a,collectionName:n,subfieldUrn:"".concat(r,".").concat(t.name)}})},[a,e,n,r]),P=(0,m.useMemo)(()=>[M.accessor(e=>e.name,{id:"name",cell:e=>{var t;let a=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,l.jsx)(v.G3,{fontWeight:a?"semibold":"normal",value:e.getValue()})},header:e=>(0,l.jsx)(v.Rr,{value:"Field Name",...e}),size:180}),M.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,l.jsx)(v.A4,{value:e.getValue()}):(0,l.jsx)(v.G3,{value:void 0}),header:e=>(0,l.jsx)(v.Rr,{value:"Type",...e}),size:80}),M.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(v.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(v.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),M.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{let t=e.row.original;return(0,l.jsx)(C.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>q({dataCategory:e,field:t}),onRemoveTaxonomy:e=>E({dataCategory:e,field:t})})},header:e=>(0,l.jsx)(v.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),M.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,l.jsx)(o.Ugi,{spacing:0,"data-testid":"field-".concat(a.name),children:(0,l.jsx)(o.wpx,{size:"small",icon:(0,l.jsx)(o.dY8,{}),onClick:()=>{L(a),D(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[q,E]),A=(0,m.useMemo)(()=>Z?U.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())):U,[U,Z]),G=(0,s.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:P,data:A,columnResizeMode:"onChange"}),[W,D]=(0,m.useState)(!1),[O,L]=(0,m.useState)(),$=(0,m.useMemo)(()=>[{title:"All datasets",icon:(0,l.jsx)(x.V,{boxSize:4}),link:j.$m},{title:a,link:{pathname:j.o5,query:{datasetId:a}},icon:(0,l.jsx)(f.l,{boxSize:5})},{title:n,icon:(0,l.jsx)(h.$,{boxSize:5}),link:{pathname:j.RF,query:{datasetId:a,collectionName:n}}},...N.map((e,t)=>({title:e,link:{pathname:j.y1,query:{datasetId:a,collectionName:n,subfieldUrn:N.slice(0,t+1).join(".")}},icon:(0,l.jsx)(g.f,{boxSize:5})}))],[a,n,N]);return(0,l.jsxs)(b.Z,{title:"Dataset - ".concat(a),mainProps:{paddingTop:0},children:[(0,l.jsx)(p.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,l.jsx)(k.Z,{breadcrumbs:$})}),z?(0,l.jsx)(v.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(o.xuv,{"data-testid":"fields-table",children:[(0,l.jsx)(v.Q$,{children:(0,l.jsx)(v.HO,{globalFilter:Z,setGlobalFilter:F,placeholder:"Search",testid:"fields-search"})}),(0,l.jsx)(v.ZK,{tableInstance:G,emptyTableNotice:(0,l.jsx)(V,{}),onRowClick:I,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,l.jsx)(y.Z,{isOpen:W,onClose:()=>{D(!1),L(void 0)},field:O,dataset:H,collectionName:n,subfieldUrn:r})]})]})}}},function(e){e.O(0,[6451,4554,2866,9278,1995,2850,7096,6711,2888,9774,179],function(){return e(e.s=82136)}),_N_E=e.O()}]);