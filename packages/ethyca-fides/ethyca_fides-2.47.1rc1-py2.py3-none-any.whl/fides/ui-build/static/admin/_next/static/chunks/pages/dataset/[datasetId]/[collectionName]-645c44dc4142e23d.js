(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6556],{59972:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]",function(){return t(82969)}])},82969:function(e,a,t){"use strict";t.r(a);var l=t(24246),i=t(92222),s=t(59003),o=t(6173),n=t(86677),d=t(27378),r=t(90824),c=t(62257),u=t(29137),x=t(43124),m=t(11032),g=t(37541),f=t(52850),h=t(19906),j=t(52987),v=t(39006),b=t(89955),p=t(5067);let w=(0,i.Cl)(),_=()=>(0,l.jsx)(o.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,l.jsx)(o.gCW,{children:(0,l.jsx)(o.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});a.default=()=>{let e=(0,n.useRouter)(),[a]=(0,j.TG)(),t=e.query.datasetId,C=e.query.collectionName,{isLoading:R,data:k}=(0,j.oM)(t),y=(0,d.useMemo)(()=>(null==k?void 0:k.collections)||[],[k]),M=y.find(e=>e.name===C),N=(0,d.useMemo)(()=>(null==M?void 0:M.fields)||[],[M]),[z,S]=(0,d.useState)(),T=(0,d.useCallback)(e=>{let{dataCategory:t,field:l}=e,i=l.data_categories||[],s={...l,data_categories:[...i,t]},o=y.indexOf(M),n=M.fields.indexOf(l);a((0,p._n)(k,s,o,n))},[M,y,k,a]),O=(0,d.useCallback)(e=>{var t;let{dataCategory:l,field:i}=e,s={...i,data_categories:null===(t=i.data_categories)||void 0===t?void 0:t.filter(e=>e!==l)},o=y.indexOf(M),n=M.fields.indexOf(i);a((0,p._n)(k,s,o,n))},[M,y,k,a]),E=(0,d.useCallback)(a=>{e.push({pathname:m.y1,query:{datasetId:t,collectionName:C,subfieldUrn:a.name}})},[t,e,C]),V=(0,d.useMemo)(()=>[w.accessor(e=>e.name,{id:"name",cell:e=>{var a;let t=e.row.original.fields&&(null===(a=e.row.original.fields)||void 0===a?void 0:a.length)>0;return(0,l.jsx)(f.G3,{fontWeight:t?"semibold":"normal",value:e.getValue()})},header:e=>(0,l.jsx)(f.Rr,{value:"Field Name",...e}),size:180}),w.accessor(e=>{var a;return null===(a=e.fides_meta)||void 0===a?void 0:a.data_type},{id:"type",cell:e=>e.getValue()?(0,l.jsx)(f.A4,{value:e.getValue()}):(0,l.jsx)(f.G3,{value:void 0}),header:e=>(0,l.jsx)(f.Rr,{value:"Type",...e}),size:80}),w.accessor(e=>e.description,{id:"description",cell:e=>(0,l.jsx)(f.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,l.jsx)(f.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),w.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{let a=e.row.original;return(0,l.jsx)(h.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>T({dataCategory:e,field:a}),onRemoveTaxonomy:e=>O({dataCategory:e,field:a})})},header:e=>(0,l.jsx)(f.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),w.display({id:"actions",header:"Actions",cell:e=>{let{row:a}=e,t=a.original;return(0,l.jsx)(o.Ugi,{spacing:0,"data-testid":"field-".concat(t.name),children:(0,l.jsx)(o.wpx,{size:"small",icon:(0,l.jsx)(o.dY8,{}),onClick:()=>{q(t),I(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[T,O]),Z=(0,d.useMemo)(()=>z?N.filter(e=>e.name.toLowerCase().includes(z.toLowerCase())):N,[N,z]),A=(0,s.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:V,data:Z,columnResizeMode:"onChange"}),[G,I]=(0,d.useState)(!1),[W,q]=(0,d.useState)(),D=(0,d.useMemo)(()=>[{title:"All datasets",icon:(0,l.jsx)(r.V,{boxSize:4}),link:m.$m},{title:t,link:{pathname:m.o5,query:{datasetId:t}},icon:(0,l.jsx)(c.l,{boxSize:5})},{title:C,icon:(0,l.jsx)(u.$,{boxSize:5})}],[t,C]);return(0,l.jsxs)(x.Z,{title:"Dataset - ".concat(t),mainProps:{paddingTop:0},children:[(0,l.jsx)(g.Z,{breadcrumbs:[{title:"Datasets"}],children:(0,l.jsx)(v.Z,{breadcrumbs:D})}),R?(0,l.jsx)(f.I4,{rowHeight:36,numRows:15}):(0,l.jsxs)(o.xuv,{"data-testid":"fields-table",children:[(0,l.jsx)(f.Q$,{children:(0,l.jsx)(f.HO,{globalFilter:z,setGlobalFilter:S,placeholder:"Search",testid:"fields-search"})}),(0,l.jsx)(f.ZK,{tableInstance:A,emptyTableNotice:(0,l.jsx)(_,{}),onRowClick:E,getRowIsClickable:e=>{var a;return!!(e.fields&&(null===(a=e.fields)||void 0===a?void 0:a.length)>0)}}),(0,l.jsx)(b.Z,{isOpen:G,onClose:()=>{I(!1),q(void 0)},field:W,dataset:k,collectionName:C})]})]})}}},function(e){e.O(0,[6451,4554,2866,9278,1995,2850,7096,6711,2888,9774,179],function(){return e(e.s=59972)}),_N_E=e.O()}]);