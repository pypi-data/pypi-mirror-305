(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9196],{95372:function(e){e.exports=function(e,t,a,s){for(var r=e.length,i=a+(s?1:-1);s?i--:++i<r;)if(t(e[i],i,e))return i;return -1}},74833:function(e,t,a){var s=a(56127),r=/^\s+/;e.exports=function(e){return e?e.slice(0,s(e)+1).replace(r,""):e}},56632:function(e,t,a){var s=a(89278),r=a(80068),i=a(50098);e.exports=function(e){return function(t,a,l){var n=Object(t);if(!r(t)){var o=s(a,3);t=i(t),a=function(e){return o(n[e],e,n)}}var d=e(t,a,l);return d>-1?n[o?t[d]:d]:void 0}}},56127:function(e){var t=/\s/;e.exports=function(e){for(var a=e.length;a--&&t.test(e.charAt(a)););return a}},64925:function(e,t,a){var s=a(56632)(a(66259));e.exports=s},66259:function(e,t,a){var s=a(95372),r=a(89278),i=a(47991),l=Math.max;e.exports=function(e,t,a){var n=null==e?0:e.length;if(!n)return -1;var o=null==a?0:i(a);return o<0&&(o=l(n+o,0)),s(e,r(t,3),o)}},94919:function(e,t,a){var s=a(91936),r=1/0;e.exports=function(e){return e?(e=s(e))===r||e===-r?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},47991:function(e,t,a){var s=a(94919);e.exports=function(e){var t=s(e),a=t%1;return t==t?a?t-a:t:0}},91936:function(e,t,a){var s=a(74833),r=a(11611),i=a(55193),l=0/0,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,d=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var a=o.test(e);return a||d.test(e)?c(e.slice(2),a?2:8):n.test(e)?l:+e}},86548:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reporting/datamap",function(){return a(83595)}])},81836:function(e,t,a){"use strict";var s=a(24246),r=a(27378),i=a(6173),l=a(79894),n=a.n(l);t.Z=e=>{let{breadcrumbs:t,fontSize:a="2xl",fontWeight:l="semibold",separator:o="->",lastItemStyles:d={color:"black"},normalItemStyles:c={color:"gray.500"},...u}=e;return(0,s.jsx)(i.aGc,{separator:o,fontSize:a,fontWeight:l,"data-testid":"breadcrumbs",...u,children:t.map((e,a)=>{let l=a+1===t.length;return e.title?(0,r.createElement)(i.gN6,{...c,...l?d:{},key:e.title,children:[(null==e?void 0:e.icon)&&(0,s.jsx)(i.xuv,{mr:2,children:e.icon}),e.link?(0,s.jsx)(i.Atw,{as:n(),href:e.link,isCurrentPage:l,children:e.title}):(0,s.jsx)(i.Atw,{_hover:{textDecoration:"none",cursor:"default"},isCurrentPage:l,children:e.title})]}):null})})}},72809:function(e,t,a){"use strict";var s=a(24246),r=a(6173),i=a(27378);let l=e=>{let t=e.split("."),a=[];return t.forEach(e=>{let t=a.length>0?a[a.length-1]:null;t?a.push("".concat(t,".").concat(e)):a.push(e)}),a},n=(e,t)=>{let a=l(t).filter(e=>e!==t);return e.filter(e=>a.includes(e)).length>0},o=(e,t)=>!!(e===t||e.startsWith("".concat(t,"."))),d=(e,t,a)=>{let s=null!=a?a:[];return e.forEach(e=>{e.children&&d(e.children,t,s),o(e.value,t)&&s.push(e)}),s},c=e=>{let{node:t,isChecked:a,onChecked:i,isExpanded:l,onExpanded:n,isIndeterminate:o,isDisabled:d,children:c}=e,{value:u,label:p}=t,x=!!t.children&&t.children.length>0;return(0,s.jsxs)(r.xuv,{children:[(0,s.jsxs)(r.xuv,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:()=>n(t),minHeight:8,children:[(0,s.jsx)(r.XZJ,{colorScheme:"complimentary",value:u,isChecked:!o&&a,isIndeterminate:o,isDisabled:d,onChange:()=>i(t),mx:2,"data-testid":"checkbox-".concat(p),children:p}),x?(0,s.jsx)(r.wpx,{"data-testid":"expand-".concat(p),"aria-label":l?"collapse":"expand",icon:(0,s.jsx)(r.v4q,{boxSize:5}),type:"text",onClick:()=>n(t),className:l?"rotate-180":void 0}):null]}),c&&(0,s.jsx)(r.xuv,{ml:5,children:c})]})};t.ZP=e=>{let{nodes:t,selected:a,onSelected:u,...p}=e,[x,_]=(0,i.useState)([]),[m,g]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=Array.from(new Set([...a.map(e=>l(e)).reduce((e,t)=>e.concat(t),[]),...a.map(e=>d(t,e)).reduce((e,t)=>e.concat(t),[]).map(e=>e.value)]));g(e),_(e)},[a,t]);let h=e=>{let s=[],r=[];x.indexOf(e.value)>=0?(s=x.filter(t=>!o(t,e.value)),r=a.filter(t=>!o(t,e.value))):(s=[...x,...d(t,e.value).map(e=>e.value)],r=[...a,e.value]),_(s),u(r)},f=e=>{m.indexOf(e.value)>=0?g(m.filter(t=>!o(t,e.value))):g([...m,e.value])},v=e=>{if(e.children){let r=x.indexOf(e.value)>=0,l=m.indexOf(e.value)>=0,o=d(t,e.value),u=r&&e.children.length>0&&x.filter(t=>t.startsWith("".concat(e.value,"."))).length+1!==o.length,p=n(a,e.value);return(0,s.jsx)(c,{node:e,isChecked:r,onChecked:h,isExpanded:l,onExpanded:f,isDisabled:p,isIndeterminate:u,children:l?e.children.map(e=>(0,s.jsx)(i.Fragment,{children:v(e)},e.value)):void 0})}return null};return(0,s.jsx)(r.xuv,{...p,children:t.map(e=>(0,s.jsx)(r.xuv,{children:v(e)},e.value))})}},65464:function(e,t,a){"use strict";var s=a(24246),r=a(6173),i=a(88038),l=a.n(i);a(27378),t.Z=e=>{let{children:t,title:a,mainProps:i}=e;return(0,s.jsxs)(r.kCb,{"data-testid":a,direction:"column",height:"calc(100vh - 48px)",width:"calc(100vw - 200px)",children:[(0,s.jsxs)(l(),{children:[(0,s.jsxs)("title",{children:["Fides Admin UI - ",a]}),(0,s.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(r.kCb,{pt:6,as:"main",overflow:"auto",direction:"column",flex:1,minWidth:0,...i,children:t})]})}},79711:function(e,t,a){"use strict";a.d(t,{q:function(){return r}});var s=a(24246);let r=(0,a(6173).IUT)({displayName:"TrashCanOutlineIcon",viewBox:"0 0 11 12",path:(0,s.jsx)("path",{d:"M4.5166 1.60859L4.1084 2.21875H7.22363L6.81543 1.60859C6.7832 1.56133 6.72949 1.53125 6.67148 1.53125H4.6584C4.60039 1.53125 4.54668 1.55918 4.51445 1.60859H4.5166ZM7.6748 1.03711L8.46328 2.21875H8.75977H9.79102H9.96289C10.2486 2.21875 10.4785 2.44863 10.4785 2.73438C10.4785 3.02012 10.2486 3.25 9.96289 3.25H9.79102V9.78125C9.79102 10.7309 9.02188 11.5 8.07227 11.5H3.25977C2.31016 11.5 1.54102 10.7309 1.54102 9.78125V3.25H1.36914C1.0834 3.25 0.853516 3.02012 0.853516 2.73438C0.853516 2.44863 1.0834 2.21875 1.36914 2.21875H1.54102H2.57227H2.86875L3.65723 1.03496C3.88066 0.701953 4.25664 0.5 4.6584 0.5H6.67148C7.07324 0.5 7.44922 0.701953 7.67266 1.03496L7.6748 1.03711ZM2.57227 3.25V9.78125C2.57227 10.1615 2.87949 10.4688 3.25977 10.4688H8.07227C8.45254 10.4688 8.75977 10.1615 8.75977 9.78125V3.25H2.57227ZM4.29102 4.625V9.09375C4.29102 9.28281 4.13633 9.4375 3.94727 9.4375C3.7582 9.4375 3.60352 9.28281 3.60352 9.09375V4.625C3.60352 4.43594 3.7582 4.28125 3.94727 4.28125C4.13633 4.28125 4.29102 4.43594 4.29102 4.625ZM6.00977 4.625V9.09375C6.00977 9.28281 5.85508 9.4375 5.66602 9.4375C5.47695 9.4375 5.32227 9.28281 5.32227 9.09375V4.625C5.32227 4.43594 5.47695 4.28125 5.66602 4.28125C5.85508 4.28125 6.00977 4.43594 6.00977 4.625ZM7.72852 4.625V9.09375C7.72852 9.28281 7.57383 9.4375 7.38477 9.4375C7.1957 9.4375 7.04102 9.28281 7.04102 9.09375V4.625C7.04102 4.43594 7.1957 4.28125 7.38477 4.28125C7.57383 4.28125 7.72852 4.43594 7.72852 4.625Z",fill:"currentColor"})})},37541:function(e,t,a){"use strict";var s=a(24246),r=a(6173),i=a(19785),l=a.n(i),n=a(27378),o=a(81836);t.Z=e=>{let{breadcrumbs:t,isSticky:a=!0,children:i,rightContent:d,...c}=e;return(0,s.jsxs)(r.xuv,{bgColor:"white",paddingY:5,...a?{position:"sticky",top:0,left:0,zIndex:10}:{},...c,children:[(0,s.jsxs)(r.kCb,{alignItems:"flex-start",children:[(0,s.jsxs)(r.xuv,{flex:1,children:[l()(t)&&(0,s.jsx)(r.xuv,{marginBottom:i?4:0,children:(0,s.jsx)(o.Z,{breadcrumbs:t})}),(0,n.isValidElement)(t)&&t]}),d&&(0,s.jsx)(r.xuv,{children:d})]}),i]})}},38615:function(e,t,a){"use strict";a.d(t,{Tg:function(){return l}});var s=a(24246),r=a(44296),i=a(96451);let l=e=>(0,r.C)(i.uu).filter(t=>e.includes(t)).length>0;t.ZP=e=>{let{scopes:t,children:a}=e;return l(t)?(0,s.jsx)(s.Fragment,{children:a}):null}},91591:function(e,t,a){"use strict";a.d(t,{d:function(){return r}});var s=a(24246);let r=(0,a(6173).IUT)({displayName:"AddIcon",viewBox:"0 0 10 10",path:(0,s.jsx)("path",{d:"M4.33331 4.33398V0.333984H5.66665V4.33398H9.66665V5.66732H5.66665V9.66732H4.33331V5.66732H0.333313V4.33398H4.33331Z",fill:"currentColor"})})},19310:function(e,t,a){"use strict";var s=a(24246),r=a(64925),i=a.n(r),l=a(44296),n=a(91650),o=a(79851),d=a(47411);let c=()=>{let{isLoading:e}=(0,o.fd)(),t=(0,l.C)(o.U3),{isLoading:a}=(0,d.MO)(),s=(0,l.C)(d.qb),{isLoading:r}=(0,n.te)();return{dataUses:t,dataSubjects:(0,l.C)(n.ZL),dataCategories:s,isLoading:e||a||r}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:a,isLoading:r}=c(),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},n=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t(e);if(!r)return e;let i=t(l(e,a));return r.parent_key&&(null==i?void 0:i.name)!==r.name?(0,s.jsxs)("span",{children:[(0,s.jsxs)("strong",{children:[null==i?void 0:i.name,":"]})," ",r.name]},e):(0,s.jsx)("strong",{children:r.name},e)},o=t=>i()(e,{fides_key:t}),d=e=>i()(t,{fides_key:e}),u=e=>i()(a,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:o,getDataUseDisplayName:e=>n(e,o,1),getDataCategories:()=>t,getDataCategoryByKey:d,getDataCategoryDisplayName:e=>n(e,d,2),getDataSubjects:()=>a,getDataSubjectByKey:u,getDataSubjectDisplayName:e=>{let t=u(e);return t?t.name:e},getPrimaryKey:l,isLoading:r}}},62091:function(e,t,a){"use strict";a.d(t,{C:function(){return s},P:function(){return r}});let s=(e,t)=>{let a;if(null==t&&e.every(e=>void 0===e.parent_key))a=e;else{let s=null!=t?t:null;a=e.filter(e=>e.parent_key===s)}return a.map(t=>{var a,r;let i=t.fides_key;return{value:t.fides_key,label:""===t.name||null==t.name?t.fides_key:t.name,description:t.description,children:s(e,i),is_default:null!==(a=t.is_default)&&void 0!==a&&a,active:null!==(r=t.active)&&void 0!==r&&r}})},r=e=>{let t=e.split(".");return 1===t.length?"":t.slice(0,t.length-1).join(".")}},83595:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eo}});var s,r,i=a(24246),l=a(27378),n=a(65464),o=a(37541),d=a(56721),c=a(68636),u=a(31404),p=a(92222),x=a(52850),_=a(98784),m=a.n(_),g=a(98320);let h=(0,p.Cl)();(s=r||(r={})).SYSTEM_NAME="system_name",s.DATA_USE="data_use",s.DATA_CATEGORY="data_categories",s.DATA_SUBJECT="data_subjects",s.LEGAL_NAME="legal_name",s.DPO="dpo",s.LEGAL_BASIS_FOR_PROCESSING="legal_basis_for_processing",s.ADMINISTRATING_DEPARTMENT="administrating_department",s.COOKIE_MAX_AGE_SECONDS="cookie_max_age_seconds",s.PRIVACY_POLICY="privacy_policy",s.LEGAL_ADDRESS="legal_address",s.COOKIE_REFRESH="cookie_refresh",s.DATA_SECURITY_PRACTICES="data_security_practices",s.DATA_SHARED_WITH_THIRD_PARTIES="DATA_SHARED_WITH_THIRD_PARTIES",s.DATA_STEWARDS="data_stewards",s.DECLARATION_NAME="declaration_name",s.DESCRIPTION="description",s.DOES_INTERNATIONAL_TRANSFERS="does_international_transfers",s.DPA_LOCATION="dpa_location",s.DESTINATIONS="egress",s.EXEMPT_FROM_PRIVACY_REGULATIONS="exempt_from_privacy_regulations",s.FEATURES="features",s.FIDES_KEY="fides_key",s.FLEXIBLE_LEGAL_BASIS_FOR_PROCESSING="flexible_legal_basis_for_processing",s.IMPACT_ASSESSMENT_LOCATION="impact_assessment_location",s.SOURCES="ingress",s.JOINT_CONTROLLER_INFO="joint_controller_info",s.LEGAL_BASIS_FOR_PROFILING="legal_basis_for_profiling",s.LEGAL_BASIS_FOR_TRANSFERS="legal_basis_for_transfers",s.LEGITIMATE_INTEREST_DISCLOSURE_URL="legitimate_interest_disclosure_url",s.LINK_TO_PROCESSOR_CONTRACT="link_to_processor_contract",s.PROCESSES_PERSONAL_DATA="processes_personal_data",s.REASON_FOR_EXEMPTION="reason_for_exemption",s.REQUIRES_DATA_PROTECTION_ASSESSMENTS="requires_data_protection_assessments",s.RESPONSIBILITY="responsibility",s.RETENTION_PERIOD="retention_period",s.SHARED_CATEGORIES="shared_categories",s.SPECIAL_CATEGORY_LEGAL_BASIS="special_category_legal_basis",s.SYSTEM_DEPENDENCIES="system_dependencies",s.THIRD_COUNTRY_SAFEGUARDS="third_country_safeguards",s.THIRD_PARTIES="third_parties",s.COOKIES="cookies",s.USES_COOKIES="uses_cookies",s.USES_NON_COOKIE_ACCESS="uses_non_cookie_access",s.USES_PROFILING="uses_profiling",s.SYSTEM_UNDECLARED_DATA_CATEGORIES="system_undeclared_data_categories",s.DATA_USE_UNDECLARED_DATA_CATEGORIES="data_use_undeclared_data_categories";let f=(e,t)=>{var a;let s=(null==e?void 0:null===(a=e.items)||void 0===a?void 0:a.length)?Object.keys(e.items[0]):[],l=Object.values(r);return s.filter(e=>!l.includes(e)).filter(e=>e.startsWith("privacy_declaration_")||e.startsWith("system_")).map(e=>{let a=t.find(t=>e.includes(m().snakeCase(t.name))),s=e.replace(/^(system_|privacy_declaration_)/,""),r=m().upperFirst(s.replaceAll("_"," "));return h.accessor(t=>t[e],{id:e,cell:e=>Array.isArray(e.getValue())?(0,i.jsx)(x.WP,{value:e.getValue(),ignoreZero:!0,...e}):(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:r,...e}),meta:{displayText:r,showHeaderMenu:(null==a?void 0:a.field_type)==="string[]"}})})},v=e=>{let{onSelectRow:t,getDataUseDisplayName:a,getDataCategoryDisplayName:s,getDataSubjectDisplayName:r,datamapReport:l,customFields:n}=e,o=f(l,n);return[h.accessor(e=>e.system_name,{enableGrouping:!0,id:"system_name",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"System",...e}),meta:{displayText:"System",onCellClick:t}}),h.accessor(e=>e.data_uses,{id:"data_use",cell:e=>{let t=e.getValue();return(0,i.jsx)(x.WP,{suffix:"data uses",ignoreZero:!0,value:(0,_.isArray)(t)?(0,_.map)(t,a):a(t||""),badgeProps:{variant:"outline"},...e})},header:e=>(0,i.jsx)(x.Rr,{value:"Data use",...e}),meta:{displayText:"Data use",width:"auto"}}),h.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{let t=e.getValue();if(!t||0===t.length)return null;let a=(0,_.isArray)(t)?t.map(e=>({label:s(e),key:e})):[{label:s(t),key:t}];return(0,i.jsx)(g.mb,{values:a,cellProps:e,variant:"outline"})},header:e=>(0,i.jsx)(x.Rr,{value:"Data categories",...e}),meta:{displayText:"Data categories",showHeaderMenu:!0,showHeaderMenuWrapOption:!0,width:"auto",overflow:"hidden"}}),h.accessor(e=>e.data_subjects,{id:"data_subjects",cell:e=>{let t=e.getValue();return(0,i.jsx)(x.WP,{suffix:"data subjects",ignoreZero:!0,value:(0,_.isArray)(t)?(0,_.map)(t,r):r(t||""),...e})},header:e=>(0,i.jsx)(x.Rr,{value:"Data subject",...e}),meta:{displayText:"Data subject",showHeaderMenu:!0}}),h.accessor(e=>e.legal_name,{id:"legal_name",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Legal name",...e}),meta:{displayText:"Legal name"}}),h.accessor(e=>e.dpo,{id:"dpo",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Data privacy officer",...e}),meta:{displayText:"Data privacy officer"}}),h.accessor(e=>e.legal_basis_for_processing,{id:"legal_basis_for_processing",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Legal basis for processing",...e}),meta:{displayText:"Legal basis for processing"}}),h.accessor(e=>e.administrating_department,{id:"administrating_department",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Administrating department",...e}),meta:{displayText:"Administrating department"}}),h.accessor(e=>e.cookie_max_age_seconds,{id:"cookie_max_age_seconds",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Cookie max age seconds",...e}),meta:{displayText:"Cookie max age seconds"}}),h.accessor(e=>e.privacy_policy,{id:"privacy_policy",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Privacy policy",...e}),meta:{displayText:"Privacy policy"}}),h.accessor(e=>e.legal_address,{id:"legal_address",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Legal address",...e}),meta:{displayText:"Legal address"}}),h.accessor(e=>e.cookie_refresh,{id:"cookie_refresh",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Cookie refresh",table:e.table,header:e.header,column:e.column}),meta:{displayText:"Cookie refresh"}}),h.accessor(e=>e.data_security_practices,{id:"data_security_practices",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Data security practices",...e}),meta:{displayText:"Data security practices"}}),h.accessor(e=>e.data_shared_with_third_parties,{id:"DATA_SHARED_WITH_THIRD_PARTIES",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Data shared with third parties",...e}),meta:{displayText:"Data shared with third parties"}}),h.accessor(e=>e.data_stewards,{id:"data_stewards",cell:e=>(0,i.jsx)(x.WP,{suffix:"data stewards",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Data stewards",...e}),meta:{displayText:"Data stewards",showHeaderMenu:!0}}),h.accessor(e=>e.declaration_name,{id:"declaration_name",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Declaration name",...e}),meta:{displayText:"Declaration name"}}),h.accessor(e=>e.does_international_transfers,{id:"does_international_transfers",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Does international transfers",...e}),meta:{displayText:"Does international transfers"}}),h.accessor(e=>e.dpa_location,{id:"dpa_location",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"DPA Location",...e}),meta:{displayText:"DPA Location"}}),h.accessor(e=>e.egress,{id:"egress",cell:e=>(0,i.jsx)(x.WP,{suffix:"destinations",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Destinations",...e}),meta:{displayText:"Destinations",showHeaderMenu:!0}}),h.accessor(e=>e.exempt_from_privacy_regulations,{id:"exempt_from_privacy_regulations",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Exempt from privacy regulations",...e}),meta:{displayText:"Exempt from privacy regulations"}}),h.accessor(e=>e.features,{id:"features",cell:e=>(0,i.jsx)(x.WP,{suffix:"features",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Features",...e}),meta:{displayText:"Features",showHeaderMenu:!0}}),h.accessor(e=>e.fides_key,{id:"fides_key",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Fides key",...e}),meta:{displayText:"Fides key"}}),h.accessor(e=>e.flexible_legal_basis_for_processing,{id:"flexible_legal_basis_for_processing",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Flexible legal basis for processing",...e}),meta:{displayText:"Flexible legal basis for processing"}}),h.accessor(e=>e.impact_assessment_location,{id:"impact_assessment_location",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Impact assessment location",...e}),meta:{displayText:"Impact assessment location"}}),h.accessor(e=>e.ingress,{id:"ingress",cell:e=>(0,i.jsx)(x.WP,{suffix:"sources",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Sources",...e}),meta:{displayText:"Sources",showHeaderMenu:!0}}),h.accessor(e=>e.joint_controller_info,{id:"joint_controller_info",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Joint controller info",...e}),meta:{displayText:"Joint controller info"}}),h.accessor(e=>e.legal_basis_for_profiling,{id:"legal_basis_for_profiling",cell:e=>(0,i.jsx)(x.WP,{suffix:"profiles",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Legal basis for profiling",...e}),meta:{displayText:"Legal basis for profiling",showHeaderMenu:!0}}),h.accessor(e=>e.legal_basis_for_transfers,{id:"legal_basis_for_transfers",cell:e=>(0,i.jsx)(x.WP,{suffix:"transfers",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Legal basis for transfers",...e}),meta:{displayText:"Legal basis for transfers",showHeaderMenu:!0}}),h.accessor(e=>e.legitimate_interest_disclosure_url,{id:"legitimate_interest_disclosure_url",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Legitimate interest disclosure url",...e}),meta:{displayText:"Legitimate interest disclosure url"}}),h.accessor(e=>e.link_to_processor_contract,{id:"link_to_processor_contract",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Link to processor contract",...e}),meta:{displayText:"Link to processor contract"}}),h.accessor(e=>e.processes_personal_data,{id:"processes_personal_data",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Processes personal data",...e}),meta:{displayText:"Processes personal data"}}),h.accessor(e=>e.reason_for_exemption,{id:"reason_for_exemption",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Reason for exemption",...e}),meta:{displayText:"Reason for exemption"}}),h.accessor(e=>e.requires_data_protection_assessments,{id:"requires_data_protection_assessments",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Requires data protection assessments",...e}),meta:{displayText:"Requires data protection assessments"}}),h.accessor(e=>e.responsibility,{id:"responsibility",cell:e=>(0,i.jsx)(x.WP,{suffix:"responsibilities",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Responsibility",...e}),meta:{displayText:"Responsibility",showHeaderMenu:!0}}),h.accessor(e=>e.retention_period,{id:"retention_period",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Retention period",...e}),meta:{displayText:"Retention period"}}),h.accessor(e=>e.shared_categories,{id:"shared_categories",cell:e=>(0,i.jsx)(x.WP,{suffix:"shared categories",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Shared categories",...e}),meta:{displayText:"Shared categories",showHeaderMenu:!0}}),h.accessor(e=>e.special_category_legal_basis,{id:"special_category_legal_basis",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Special category legal basis",...e}),meta:{displayText:"Special category legal basis"}}),h.accessor(e=>e.system_dependencies,{id:"system_dependencies",cell:e=>(0,i.jsx)(x.WP,{suffix:"dependencies",ignoreZero:!0,value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"System dependencies",...e}),meta:{displayText:"System dependencies",showHeaderMenu:!0}}),h.accessor(e=>e.third_country_safeguards,{id:"third_country_safeguards",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Third country safeguards",...e}),meta:{displayText:"Third country safeguards"}}),h.accessor(e=>e.third_parties,{id:"third_parties",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Third parties",...e}),meta:{displayText:"Third parties"}}),h.accessor(e=>e.system_undeclared_data_categories,{id:"system_undeclared_data_categories",cell:e=>{let t=e.getValue();return(0,i.jsx)(x.WP,{ignoreZero:!0,suffix:"system undeclared data categories",value:(0,_.isArray)(t)?(0,_.map)(t,s):s(t||""),...e})},header:e=>(0,i.jsx)(x.Rr,{value:"System undeclared data categories",...e}),meta:{displayText:"System undeclared data categories",showHeaderMenu:!0}}),h.accessor(e=>e.data_use_undeclared_data_categories,{id:"data_use_undeclared_data_categories",cell:e=>{let t=e.getValue();return(0,i.jsx)(x.WP,{ignoreZero:!0,suffix:"data use undeclared data categories",value:(0,_.isArray)(t)?(0,_.map)(t,s):s(t||""),...e})},header:e=>(0,i.jsx)(x.Rr,{value:"Data use undeclared data categories",...e}),meta:{displayText:"Data use undeclared data categories",showHeaderMenu:!0}}),h.accessor(e=>e.cookies,{id:"cookies",cell:e=>(0,i.jsx)(x.WP,{ignoreZero:!0,suffix:"cookies",value:e.getValue(),...e}),header:e=>(0,i.jsx)(x.Rr,{value:"Cookies",...e}),meta:{displayText:"Cookies",showHeaderMenu:!0}}),h.accessor(e=>e.uses_cookies,{id:"uses_cookies",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Uses cookies",...e}),meta:{displayText:"Uses cookies"}}),h.accessor(e=>e.uses_non_cookie_access,{id:"uses_non_cookie_access",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Uses non cookie access",...e}),meta:{displayText:"Uses non cookie access"}}),h.accessor(e=>e.uses_profiling,{id:"uses_profiling",cell:e=>(0,i.jsx)(x.G3,{value:e.getValue()}),header:e=>(0,i.jsx)(x.Rr,{value:"Uses profiling",...e}),meta:{displayText:"Uses profiling"}}),...o]},j=e=>e===c.fI.DATA_USE_SYSTEM?[r.DATA_USE]:[r.SYSTEM_NAME],S=e=>{let t=[];return c.fI.SYSTEM_DATA_USE===e&&(t=[r.SYSTEM_NAME,r.DATA_USE,r.DATA_CATEGORY,r.DATA_SUBJECT]),c.fI.DATA_USE_SYSTEM===e&&(t=[r.DATA_USE,r.SYSTEM_NAME,r.DATA_CATEGORY,r.DATA_SUBJECT]),t},T=e=>{let t=[];return c.fI.SYSTEM_DATA_USE===e&&(t=[r.SYSTEM_NAME,r.DATA_USE]),c.fI.DATA_USE_SYSTEM===e&&(t=[r.DATA_USE,r.SYSTEM_NAME]),t},y=(0,l.createContext)({}),C=e=>{let{children:t}=e,[a,s]=(0,d._)(u.Pn.CUSTOM_REPORT_ID,""),[n,o]=(0,d._)(u.Pn.GROUP_BY,c.fI.SYSTEM_DATA_USE),[p,x]=(0,d._)(u.Pn.FILTERS,{dataUses:[],dataSubjects:[],dataCategories:[]}),[_,m]=(0,d._)(u.Pn.COLUMN_ORDER,S(n)),[g,h]=(0,d._)(u.Pn.COLUMN_VISIBILITY,{[r.SYSTEM_UNDECLARED_DATA_CATEGORIES]:!1,[r.DATA_USE_UNDECLARED_DATA_CATEGORIES]:!1}),[f,v]=(0,d._)(u.Pn.COLUMN_SIZING,{}),j=(0,l.useMemo)(()=>({savedCustomReportId:a,setSavedCustomReportId:s,groupBy:n,setGroupBy:o,selectedFilters:p,setSelectedFilters:x,columnOrder:_,setColumnOrder:m,columnVisibility:g,setColumnVisibility:h,columnSizing:f,setColumnSizing:v}),[a,s,n,o,p,x,_,m,g,h,f,v]);return(0,i.jsx)(y.Provider,{value:j,children:t})},E=()=>{let e=(0,l.useContext)(y);if(!e||0===Object.keys(e).length)throw Error("useDatamapReport must be used within a DatamapReportProvider");return e};var A=a(59003),R=a(6173),b=a(44296),D=a(19310),O=a(62528),I=a(94167),k=a(12003),w=a(54321),P=e=>{let{children:t,heading:a,onCancel:s,onConfirm:r,isLoading:l,cancelButtonText:n,continueButtonText:o,"data-testid":d="standard-dialog",...c}=e,{onClose:u}=c;return(0,i.jsxs)(R.u_l,{closeOnOverlayClick:l,...c,children:[(0,i.jsx)(R.ZAr,{}),(0,i.jsxs)(R.hzk,{"data-testid":d,children:[a&&(0,i.jsx)(R.xBx,{children:a}),(0,i.jsx)(R.olH,{isDisabled:l,"data-testid":"standard-dialog-close-btn"}),t&&(0,i.jsx)(R.fef,{children:t}),(0,i.jsxs)(R.mzw,{gap:3,width:"100%",sx:{"& button":{width:"100%"}},children:[(0,i.jsx)(R.wpx,{onClick:()=>{s&&s(),u()},"data-testid":"".concat(d?"".concat(d,"-"):"","cancel-btn"),disabled:l,children:n||"Cancel"}),(0,i.jsx)(R.wpx,{onClick:r,type:"primary","data-testid":"".concat(d?"".concat(d,"-"):"","continue-btn"),loading:l,children:o||"Continue"})]})]})]})},M=e=>{let[t,a]=(0,l.useState)(u.T2.csv),{onConfirm:s}=e;return(0,i.jsx)(P,{heading:"Export report",continueButtonText:"Download",size:"xl",...e,onConfirm:()=>s(t),"data-testid":"export-modal",children:(0,i.jsxs)(R.kCb,{direction:"column",gap:3,pb:3,children:[(0,i.jsx)(R.xvT,{textAlign:"left",children:"Export your data map report using the options below. Depending on the number of rows, the file may take a few minutes to process."}),(0,i.jsxs)(R.NIc,{children:[(0,i.jsx)(R.lXp,{children:"Choose Format"}),(0,i.jsxs)(R.PhF,{value:t,onChange:e=>a(e.target.value),"data-testid":"export-format-select",children:[(0,i.jsx)("option",{value:u.T2.csv,children:"CSV"}),(0,i.jsx)("option",{value:u.T2.xlsx,children:"XLSX"})]})]})]})})},N=a(72809),L=a(91650),V=a(79851),U=a(62091),G=a(35249);let H=e=>{let{label:t,children:a,...s}=e;return(0,i.jsxs)(R.Qdk,{...s,children:[(0,i.jsx)(R.X6q,{children:(0,i.jsxs)(R.KFZ,{height:"100%","data-testid":"filter-modal-accordion-button",textAlign:"left",fontWeight:600,children:[(0,i.jsx)(R.xuv,{flex:1,children:t}),(0,i.jsx)(R.XEm,{boxSize:7})]})}),(0,i.jsx)(R.Hk3,{children:a})]})},Z=e=>{let{selectedFilters:t,onFilterChange:a,onClose:s,...r}=e;(0,V.fd)(),(0,L.te)(),(0,G.MO)();let{dataUses:n,dataSubjects:o,dataCategories:d}=t,c=(0,b.C)(V.U3),u=(0,b.C)(L.ZL),p=(0,b.C)(G.qb),[x,_]=(0,l.useState)(n),[m,g]=(0,l.useState)(o),[h,f]=(0,l.useState)(d);(0,l.useEffect)(()=>{_(n)},[n]),(0,l.useEffect)(()=>{g(o)},[o]),(0,l.useEffect)(()=>{f(d)},[d]);let v=(0,l.useMemo)(()=>(0,U.C)(c),[c]),j=(0,l.useMemo)(()=>(0,U.C)(u),[u]),S=(0,l.useMemo)(()=>(0,U.C)(p),[p]);return(0,i.jsx)(P,{heading:"Filter Datamap Report",...r,onCancel:()=>{_([]),g([]),f([]),a({dataUses:[],dataSubjects:[],dataCategories:[]}),s()},onConfirm:()=>{a({dataUses:x,dataSubjects:m,dataCategories:h}),s()},onClose:s,cancelButtonText:"Reset filters",continueButtonText:"Done","data-testid":"datamap-report-filter-modal",children:(0,i.jsxs)(R.UQy,{allowToggle:!0,children:[(0,i.jsx)(H,{label:"Data uses",children:(0,i.jsx)(N.ZP,{nodes:v,selected:x,onSelected:_,"data-testid":"filter-modal-checkbox-tree-uses"})}),(0,i.jsx)(H,{label:"Data categories",children:(0,i.jsx)(N.ZP,{nodes:S,selected:h,onSelected:f,"data-testid":"filter-modal-checkbox-tree-categories"})}),(0,i.jsx)(H,{label:"Data subjects",children:(0,i.jsx)(N.ZP,{nodes:j,selected:m,onSelected:g,"data-testid":"filter-modal-checkbox-tree-subjects"})})]})})};var Y=a(96878),F=a(34090),z=a(91591),W=a(60136),q=a(79711),B=a(38615);let{useGetMinimalCustomReportsQuery:X,useLazyGetCustomReportByIdQuery:K,usePostCustomReportMutation:J,useDeleteCustomReportMutation:Q}=a(21618).u.injectEndpoints({endpoints:e=>({getMinimalCustomReports:e.query({query:e=>{let{pageIndex:t=1,pageSize:a=50,report_type:s=c.C2.DATAMAP}=e,r="page=".concat(t,"&size=").concat(a,"&report_type=").concat(s);return{url:"plus/custom-report/minimal?".concat(r)}},providesTags:["Custom Reports"]}),getCustomReportById:e.query({query:e=>({url:"plus/custom-report/".concat(e)}),providesTags:(e,t,a)=>[{type:"Custom Reports",id:a}]}),postCustomReport:e.mutation({query:e=>({method:"POST",url:"plus/custom-report",body:e}),invalidatesTags:["Custom Reports"]}),deleteCustomReport:e.mutation({query:e=>({method:"DELETE",url:"plus/custom-report/".concat(e)}),invalidatesTags:["Custom Reports"]})})});var $=a(59389),ee=a(34803);let et="Report name",ea=e=>{let{isOpen:t,handleClose:a,tableStateToSave:s,columnMapToSave:r,unavailableNames:n,onCreateCustomReport:o}=e,d=(0,R.pmc)(),[u]=J(),p=(0,l.useMemo)(()=>$.Ry().shape({reportName:$.Z_().label(et).required("Please provide a name for this report").test("is-unique","",async(e,t)=>null==n||!n.includes(e)||t.createError({message:"This name already exists"})).max(80,"Report name is too long (max 80 characters)")}),[n]),x=async e=>{try{let t={name:e.trim(),type:c.C2.DATAMAP,config:{column_map:r,table_state:s}},i=await u(t);if((0,W.D4)(i))throw i.error;o(i.data),a()}catch(e){d({status:"error",description:(0,W.e$)(e,"A problem occurred while creating the report.")})}};return(0,i.jsxs)(R.u_l,{size:"lg",isOpen:t,onClose:a,motionPreset:"none",children:[(0,i.jsx)(R.ZAr,{}),(0,i.jsxs)(R.hzk,{children:[(0,i.jsx)(R.xBx,{pb:0,children:"Create a report"}),(0,i.jsx)(F.J9,{initialValues:{reportName:""},onSubmit:e=>x(e.reportName),onReset:a,validateOnBlur:!1,validationSchema:p,children:e=>{let{dirty:t,isValid:a}=e;return(0,i.jsxs)(F.l0,{"data-testid":"custom-report-form",children:[(0,i.jsxs)(R.fef,{children:[(0,i.jsx)(R.xvT,{fontSize:"sm",color:"gray.600",pb:6,children:"Customize and save your current filter settings for easy access in the future. This saved report will include the column layout and currently applied filter settings."}),(0,i.jsx)(ee.j0,{id:"reportName",name:"reportName",isRequired:!0,label:et,placeholder:"Enter a name for the report...",variant:"stacked",maxLength:80})]}),(0,i.jsxs)(R.mzw,{gap:2,children:[(0,i.jsx)(R.wpx,{size:"small",htmlType:"reset",children:"Cancel"}),(0,i.jsx)(R.wpx,{size:"small",disabled:!t||!a,type:"primary","data-testid":"custom-report-form-submit",htmlType:"submit",children:"Save"})]})]})}})]})]})},es="Report",er="Reports",ei=e=>{var t;let{reportType:a,savedReportId:s,tableStateToSave:r,currentColumnMap:n,onCustomReportSaved:o,onSavedReportDeleted:d}=e,u=(0,B.Tg)([c.Sh.CUSTOM_REPORT_READ]),p=(0,B.Tg)([c.Sh.CUSTOM_REPORT_CREATE]),x=(0,B.Tg)([c.Sh.CUSTOM_REPORT_DELETE]),_=(0,R.pmc)({id:"custom-report-toast"}),{data:m,isLoading:g}=X({report_type:a}),[h,f]=(0,l.useState)(),[v]=K(),[j]=Q(),{isOpen:S,onToggle:T,onOpen:y,onClose:C}=(0,R.qY0)(),{isOpen:E,onOpen:A,onClose:b}=(0,R.qY0)(),{isOpen:D,onOpen:O,onClose:I}=(0,R.qY0)(),[k,w]=(0,l.useState)(),[P,M]=(0,l.useState)(),[N,L]=(0,l.useState)(),[V,U]=(0,l.useState)(!1),G=(0,l.useMemo)(()=>{var e;let t=null==m?void 0:null===(e=m.items.find(e=>e.id===s))||void 0===e?void 0:e.name;return null!=t?t:er},[null==m?void 0:m.items,s]),H=!g&&!(null==m?void 0:null===(t=m.items)||void 0===t?void 0:t.length),Z=e=>{f(null==m?void 0:m.items.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())))},Y=async e=>{w(e);let{data:t,isError:a,error:s}=await v(e);if(a){let e=(0,W.e$)(s,"A problem occurred while fetching the ".concat(es,"."));e.includes("not found")&&d(),_({status:"error",description:e})}else M(t)},J=()=>{w(""),M(void 0),U(!1)},$=()=>{P?(U(!1),P.id!==s&&o(P),C()):k?U(!0):(o(null),C())},ee=async e=>{e===(null==P?void 0:P.id)&&(J(),d()),j(e)};(0,l.useEffect)(()=>{m&&f(m.items)},[m]),(0,l.useEffect)(()=>{V&&(U(!1),$())},[P]),(0,l.useEffect)(()=>{s?Y(s):J()},[s]),(0,l.useEffect)(()=>{N&&O()},[O,N]);let et=!P&&!s||(null==P?void 0:P.id)===s;return u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(R.J2e,{placement:"bottom-end",isOpen:S,onClose:$,id:"custom-reports-selection",children:[(0,i.jsx)(R.xol,{children:(0,i.jsx)(R.wpx,{size:"small",className:"max-w-40",icon:(0,i.jsx)(R.v4q,{}),iconPosition:"end","data-testid":"custom-reports-trigger",onClick:T,children:(0,i.jsx)(R.xvT,{noOfLines:1,display:"inline-block",children:G})})}),(0,i.jsx)(R.h_i,{children:(0,i.jsxs)(R.yky,{"data-testid":"custom-reports-popover",children:[(0,i.jsx)(R.QHN,{}),(0,i.jsx)(F.J9,{initialValues:{},onSubmit:$,onReset:J,children:(0,i.jsxs)(F.l0,{children:[(0,i.jsx)(R.wpx,{size:"small",disabled:H,htmlType:"reset",className:"absolute left-2 top-2","data-testid":"custom-reports-reset-button",children:"Reset"}),(0,i.jsxs)(R.Ytg,{textAlign:"center",children:[(0,i.jsx)(R.xvT,{fontSize:"sm",children:er}),(0,i.jsx)(R.BZy,{size:"sm",mt:3,children:(0,i.jsx)(R.IIB,{type:"text",borderRadius:"md",placeholder:"Search...",onChange:e=>Z(e.target.value)})})]}),(0,i.jsx)(R.usR,{top:2,onClick:()=>{s?Y(s):J(),C()},"data-testid":"custom-report-popover-cancel"}),(0,i.jsxs)(R.baG,{px:6,pt:3,pb:1,children:[H&&(0,i.jsxs)(R.gCW,{px:2,pt:6,pb:3,"data-testid":"custom-reports-empty-state",children:[(0,i.jsx)(R.hU,{variant:"primary",backgroundColor:"gray.500",isRound:!0,size:"xs","aria-label":"add ".concat(es),icon:(0,i.jsx)(z.d,{}),onClick:A,"data-testid":"add-report-button"}),(0,i.jsxs)(R.xvT,{fontSize:"sm",textAlign:"center",color:"gray.500",children:["No ",er.toLowerCase()," have been created. Start by applying your preferred filter and column settings, then create a"," ",es.toLowerCase()," for easy access later."]})]}),!H&&(g?(0,i.jsxs)(R.gCW,{pb:2,children:[(0,i.jsx)(R.OdW,{width:"100%",height:R.rSc.space[4]}),(0,i.jsx)(R.OdW,{width:"100%",height:R.rSc.space[4]}),(0,i.jsx)(R.OdW,{width:"100%",height:R.rSc.space[4]})]}):(0,i.jsx)(R.FXm,{onChange:Y,value:k,children:null==h?void 0:h.map(e=>(0,i.jsxs)(R.Ugi,{justifyContent:x?"space-between":"flex-start","min-height":R.rSc.space[6],children:[(0,i.jsx)(R.Y8K,{name:"custom-report-id",value:e.id,"data-testid":"custom-report-item",children:(0,i.jsx)(R.xvT,{fontSize:"xs",children:e.name})}),x&&(0,i.jsx)(R.hU,{variant:"ghost",size:"xs","aria-label":"delete ".concat(es),icon:(0,i.jsx)(q.q,{fontSize:16}),onClick:()=>{L(e)},"data-testid":"delete-report-button"})]},e.id))}))]}),(0,i.jsx)(R.DT9,{border:"none",px:6,children:(0,i.jsxs)(R.Ugi,{children:[p&&r&&(0,i.jsxs)(R.wpx,{size:"small",onClick:A,className:"w-full","data-testid":"create-report-button",htmlType:"button",children:["+ Create ",es.toLowerCase()]}),(0,i.jsx)(R.wpx,{size:"small",type:"primary",loading:V,disabled:et,className:"w-full","data-testid":"apply-report-button",htmlType:"submit",children:"Apply"})]})})]})})]})})]}),(0,i.jsx)(ea,{isOpen:E,handleClose:()=>{b(),setTimeout(()=>{y()},100)},tableStateToSave:r,columnMapToSave:n,unavailableNames:null==m?void 0:m.items.map(e=>e.name),onCreateCustomReport:o}),(0,i.jsx)(R.cVQ,{isOpen:D,onClose:()=>{L(void 0),I()},onConfirm:()=>{N&&ee(N.id),I()},title:"Delete ".concat(es),message:(0,i.jsxs)(R.xvT,{children:["You are about to permanently delete the"," ",es.toLowerCase()," named"," ",(0,i.jsx)("strong",{children:null==N?void 0:N.name}),". Are you sure you would like to continue?"]})})]}):null},el={items:[],total:0,page:1,size:25,pages:1},en=()=>{let{isLoading:e}=(0,Y.x8)(),{PAGE_SIZES:t,pageSize:a,setPageSize:s,onPreviousPageClick:r,isPreviousPageDisabled:n,onNextPageClick:o,isNextPageDisabled:d,startRange:_,endRange:m,pageIndex:g,setTotalPages:h,resetPageIndexToDefault:f}=(0,x.oi)(),S=(0,R.pmc)({id:"datamap-report-toast"}),{isOpen:y,onClose:C,onOpen:P}=(0,R.qY0)(),{getDataUseDisplayName:N,getDataCategoryDisplayName:L,getDataSubjectDisplayName:V,isLoading:U}=(0,D.Z)(),[G,H]=(0,l.useState)(),{savedCustomReportId:F,setSavedCustomReportId:z,groupBy:W,setGroupBy:q,selectedFilters:B,setSelectedFilters:X,columnOrder:K,setColumnOrder:J,columnVisibility:Q,setColumnVisibility:$,columnSizing:ee,setColumnSizing:et}=E(),[ea,es]=(0,l.useState)(!1),er=e=>{z(""),q(e),es(!0),f()},[en,eo]=(0,l.useState)(""),ed=(0,l.useCallback)(e=>{f(),eo(e)},[f,eo]),ec={pageIndex:g,pageSize:a,groupBy:W,search:en,dataUses:(0,I.du)(B.dataUses,"data_uses"),dataSubjects:(0,I.du)(B.dataSubjects,"data_subjects"),dataCategories:(0,I.du)(B.dataCategories,"data_categories")},{data:eu,isLoading:ep,isFetching:ex}=(0,k.tH)(ec),[e_,{isLoading:em,isSuccess:eg}]=(0,k.Eo)(),{data:eh,totalRows:ef}=(0,l.useMemo)(()=>{let e=eu||el,t=e.items;return ea&&es(!1),h(e.pages),{totalRows:e.total,data:t}},[eu]);(0,Y.GH)();let ev=(0,b.C)(Y.fN),ej=(0,l.useMemo)(()=>v({onSelectRow:e=>H(e.fides_key),getDataUseDisplayName:N,getDataCategoryDisplayName:L,getDataSubjectDisplayName:V,datamapReport:eu,customFields:ev}),[N,V,L,eu,ev]),{isOpen:eS,onOpen:eT,onClose:ey}=(0,R.qY0)(),{isOpen:eC,onOpen:eE,onClose:eA}=(0,R.qY0)(),eR=(0,A.b7)({getCoreRowModel:(0,p.sC)(),getGroupedRowModel:(0,p.qe)(),getExpandedRowModel:(0,p.rV)(),manualPagination:!0,enableColumnResizing:!0,columnResizeMode:"onChange",columns:ej,data:eh,initialState:{expanded:!0,columnSizing:ee,columnOrder:K,columnVisibility:Q,grouping:j(W)}});return((0,l.useEffect)(()=>{let e=j(W);eu&&eR.setGrouping(e)},[eu]),(0,l.useEffect)(()=>{let e=eR.getState().columnSizing;e&&et(e)},[eR.getState().columnSizing]),ep||e||U)?(0,i.jsx)(x.I4,{rowHeight:36,numRows:15}):(0,i.jsxs)(R.kCb,{flex:1,direction:"column",overflow:"auto",children:[(0,i.jsx)(Z,{selectedFilters:B,isOpen:y,onClose:C,onFilterChange:e=>{z(""),X(e)}}),(0,i.jsx)(x.F1,{isOpen:eS,onClose:ey,headerText:"Data map settings",prefixColumns:T(W),tableInstance:eR,savedCustomReportId:F,onColumnOrderChange:e=>{z(""),eR.setColumnOrder(e),J(e)},onColumnVisibilityChange:e=>{z(""),eR.setColumnVisibility(e),$(e)}}),(0,i.jsx)(M,{isOpen:eC,onClose:eA,onConfirm:e=>{e_({...ec,format:e,report_id:F}).then(()=>{eg&&eA()})},isLoading:em}),(0,i.jsxs)(x.Q$,{children:[(0,i.jsx)(x.HO,{globalFilter:en,setGlobalFilter:ed,placeholder:"System name, Fides key, or ID"}),(0,i.jsxs)(R.kCb,{alignItems:"center",gap:2,children:[(0,i.jsx)(ei,{reportType:c.C2.DATAMAP,savedReportId:F,tableStateToSave:{groupBy:W,filters:B,columnOrder:K,columnVisibility:Q},onCustomReportSaved:e=>{if(!e){z("");return}try{var t;if(null===(t=e.config)||void 0===t?void 0:t.table_state){let{groupBy:t,filters:a,columnOrder:s,columnVisibility:r}=e.config.table_state;t&&(q(t),eR.setGrouping(j(t))),a&&X(a),s&&(J(s),eR.setColumnOrder(s)),r&&($(r),eR.setColumnVisibility(r))}z(e.id),S({status:"success",description:"Report applied successfully."})}catch(e){S({status:"error",description:"There was a problem applying report."})}},onSavedReportDeleted:()=>{z("")}}),(0,i.jsxs)(R.v2r,{children:[(0,i.jsxs)(R.j2t,{as:R.wpx,size:"small",icon:(0,i.jsx)(R.v4q,{}),iconPosition:"end",loading:ea,"data-testid":"group-by-menu",children:["Group by ",(()=>{switch(W){case c.fI.SYSTEM_DATA_USE:return"system";case c.fI.DATA_USE_SYSTEM:return"data use";default:return"system"}})()]}),(0,i.jsxs)(R.qyq,{zIndex:11,"data-testid":"group-by-menu-list",children:[(0,i.jsx)(R.iiZ,{onClick:()=>{er(c.fI.SYSTEM_DATA_USE)},isChecked:c.fI.SYSTEM_DATA_USE===W,value:c.fI.SYSTEM_DATA_USE,"data-testid":"group-by-system-data-use",children:"System"}),(0,i.jsx)(R.iiZ,{onClick:()=>{er(c.fI.DATA_USE_SYSTEM)},isChecked:c.fI.DATA_USE_SYSTEM===W,value:c.fI.DATA_USE_SYSTEM,"data-testid":"group-by-data-use-system",children:"Data use"})]})]}),(0,i.jsx)(R.wpx,{onClick:eT,"data-testid":"edit-columns-btn",size:"small",children:"Edit columns"}),(0,i.jsx)(R.wpx,{"data-testid":"filter-multiple-systems-btn",size:"small",onClick:P,children:"Filter"}),(0,i.jsx)(R.wpx,{"aria-label":"Export report","data-testid":"export-btn",size:"small",onClick:eE,icon:(0,i.jsx)(O.nM,{})})]})]}),(0,i.jsx)(x.ZK,{tableInstance:eR,columnExpandStorageKey:u.Pn.COLUMN_EXPANSION_STATE,columnWrapStorageKey:u.Pn.WRAPPING_COLUMNS}),(0,i.jsx)(x.s8,{totalRows:ef||0,pageSizes:t,setPageSize:s,onPreviousPageClick:r,isPreviousPageDisabled:n||ex,onNextPageClick:o,isNextPageDisabled:d||ex,startRange:_,endRange:m}),(0,i.jsx)(w.Z,{selectedSystemId:G,resetSelectedSystemId:()=>H(void 0)})]})};var eo=()=>(0,i.jsxs)(n.Z,{title:"Datamap Report",mainProps:{padding:"0 40px 24px"},children:[(0,i.jsx)(o.Z,{"data-testid":"datamap-report-heading",breadcrumbs:[{title:"Data map report"}]}),(0,i.jsx)(C,{children:(0,i.jsx)(en,{})})]})}},function(e){e.O(0,[8033,6451,4554,2866,9278,2850,7827,2017,4321,2888,9774,179],function(){return e(e.s=86548)}),_N_E=e.O()}]);