(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22dbb5"],{f96b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",[r("SelectScrapydServer",{attrs:{value:e.scrapydServerId},on:{"update:value":function(t){e.scrapydServerId=t},"on-init":e.handleSelectScrapydServerInit,change:e.handleScrapydServerChange}}),e._v(" "),e.hasScrapydServerIdInit?r("ProjectSelect",{ref:"ProjectSelect",staticClass:"ml-sm",attrs:{scrapydServerId:e.scrapydServerId,value:e.project},on:{"update:value":function(t){e.project=t},"on-init":e.handleProjectSelectInit,change:e.resetData}}):e._e()],1),e._v(" "),r("div",{staticStyle:{height:"20px"}}),e._v(" "),r("SpiderTable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,scrapydServerId:e.scrapydServerId,project:e.project}})],1)},n=[],c=r("6194"),s=(r("5dce"),r("29ca")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mo-table",e._g(e._b({},"mo-table",e.$attrs,!1),e.$listeners),[r("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.$index+1)+"\n    ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"Spider名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.row.spider)+"\n    ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"调度日志",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{name:"schedule-log-list",query:{scrapydServerId:e.scrapydServerId,project:e.project,spider:t.row.spider}},target:"_blank"}},[r("i",{staticClass:"el-icon-document"}),e._v(" 日志")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"运行统计",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{name:"stats-list",query:{scrapydServerId:e.scrapydServerId,project:e.project,spider:t.row.spider}},target:"_blank"}},[r("i",{staticClass:"el-icon-document"}),e._v(" 统计")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"运行日志",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{name:"logs-project-spider",query:{scrapydServerId:e.scrapydServerId,project:e.project,spider:t.row.spider}},target:"_blank"}},[r("i",{staticClass:"el-icon-document"}),e._v(" 日志")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"添加任务",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("ScheduleAdd",{attrs:{type:"table-add",spider:t.row.spider,project:e.project,scrapydServerId:e.scrapydServerId}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"运行",align:"center",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("SpiderExecute",{attrs:{spider:t.row.spider,project:e.project,scrapydServerId:e.scrapydServerId},on:{"on-success":function(t){return e.$emit("success")}}})]}}])})],1)},i=[],l=r("e982"),o=r("63d3"),p={name:"",props:{project:{type:String,default:""},scrapydServerId:{type:String,default:""}},components:{ScheduleAdd:o["a"],SpiderExecute:l["a"]},data:function(){return{}},computed:{},methods:{getData:function(){var e=Object(s["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getData()}},u=p,S=r("c9cd"),v=Object(S["a"])(u,d,i,!1,null,"0fb648d7",null),h=v.exports,f=r("1c5f"),y=r("61e0"),j={name:"",props:[],components:{SpiderTable:h,ProjectSelect:f["a"],SelectScrapydServer:y["a"]},data:function(){return{scrapydServerId:"",hasScrapydServerIdInit:!1,project:"",list:[],loading:!0}},computed:{},methods:{resetData:function(){this.getData()},getData:function(){var e=Object(s["a"])(Object(c["a"])().mark((function e(){var t;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.scrapydServerId||!this.project){e.next=3;break}e.next=4;break;case 3:return e.abrupt("return");case 4:return this.loading=!0,e.next=7,this.$Http.scrapydlistSpiders({scrapydServerId:this.scrapydServerId,project:this.project});case 7:t=e.sent,this.list=t.data,this.loading=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleProjcetChange:function(e){e&&(this.project=e,localStorage.setItem("project",e),this.getData())},handleScrapydServerChange:function(){var e=this;this.project=null,this.$nextTick((function(){e.$refs.ProjectSelect&&e.$refs.ProjectSelect.resetData()}))},handleSelectScrapydServerInit:function(e){this.scrapydServerId||e.list&&e.list.length>0&&(this.scrapydServerId=e.list[0].value),this.hasScrapydServerIdInit=!0},handleProjectSelectInit:function(e){this.project||e&&e.length>0&&(this.project=e[0].project),this.resetData()}},created:function(){this.scrapydServerId=this.$route.query.scrapydServerId,this.project=this.$route.query.project}},b=j,g=Object(S["a"])(b,a,n,!1,null,"5fb054fd",null);t["default"]=g.exports}}]);