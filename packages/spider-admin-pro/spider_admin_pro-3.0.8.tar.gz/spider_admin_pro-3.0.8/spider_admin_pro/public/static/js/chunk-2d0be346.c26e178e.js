(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0be346"],{"2eeb":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("ProjectTool",{on:{success:e.getData}}),e._v(" "),r("div",{staticStyle:{height:"20px"}}),e._v(" "),r("ProjectTable",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list},on:{success:e.getData}})],1)},s=[],a=r("6194"),i=(r("5dce"),r("29ca")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("mo-table",e._g(e._b({},"mo-table",e.$attrs,!1),e.$listeners),[r("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"服务名称",align:"center",prop:"server_name"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.server_name)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"服务地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.server_url)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"用户名",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.username||"-")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"密码",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.password?r("span",[e._v("***")]):r("span",[e._v("-")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"查看项目",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("router-link",{attrs:{to:{path:"/project/list",query:{scrapydServerId:t.row.id}}}},[r("i",{staticClass:"el-icon-tickets"}),e._v(" 项目\n        ")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"启用/禁用",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("mo-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(r){return e.handleStatusChange(t.row,r)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"编辑",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("ProjectAdd",{attrs:{type:"edit",row:t.row},on:{success:function(t){return e.$emit("success")}}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"删除",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("ProjectDelete",{attrs:{row:t.row},on:{success:function(t){return e.$emit("success")}}})]}}])})],1)],1)},o=[],u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popconfirm",{attrs:{title:"确定删除？"},on:{confirm:e.handleDelete}},[r("el-button",e._b({staticClass:"color--danger",attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},"el-button",e.$attrs,!1),[e._v("删除")])],1)},l=[],p={name:"",props:{row:{type:Object}},components:{},data:function(){return{}},computed:{},methods:{handleDelete:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$Http.deleteScrapydServer({scrapyd_server_id:this.row.id});case 2:t=e.sent,t.ok&&(this.$message.success("删除成功"),this.$emit("success"));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){}},d=p,f=r("c9cd"),m=Object(f["a"])(d,u,l,!1,null,"92a41e16",null),v=m.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},["edit"==e.type?r("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"text"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("编辑")]):r("el-button",{attrs:{size:"mini",icon:"el-icon-document-add",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),e._v(" "),r("el-dialog",{attrs:{title:("edit"==e.type?"编辑":"添加")+"Scrapyd服务",visible:e.dialogVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogVisible=t},open:e.handleOpen}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"status-icon":"","label-width":"80px",size:"small"}},[r("el-form-item",{attrs:{label:"服务名称",prop:"server_name"}},[r("el-input",{model:{value:e.form.server_name,callback:function(t){e.$set(e.form,"server_name",t)},expression:"form.server_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"服务地址",prop:"server_url"}},[r("el-input",{model:{value:e.form.server_url,callback:function(t){e.$set(e.form,"server_url",t)},expression:"form.server_url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"启用/禁用",prop:"status"}},[r("mo-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),e._v(" "),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},b=[],_=r("d1c7"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-autocomplete",e._b({attrs:{"fetch-suggestions":e.querySearch},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[r("span",[e._v(e._s(n.project))])]}}]),model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},"el-autocomplete",e.$attrs,!1))},g=[],j={name:"",props:{value:{type:String}},components:{},data:function(){return{list:[]}},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("update:value",e)}}},methods:{querySearch:function(e,t){var r=e?this.filterItem(e):this.list;t(r)},filterItem:function(e){return this.list.filter((function(t){return 0==t.project.toLowerCase().indexOf(e.toLowerCase())}))},handleSelect:function(e){this._value=e.project},getData:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$Http.scrapydListProjects();case 2:t=e.sent,this.list=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getData()}},y=j,S=Object(f["a"])(y,w,g,!1,null,"87366e98",null),x=S.exports,O={name:"",props:{type:{type:String,default:"add"},project:{type:String,default:null},row:{type:Object,default:null}},components:{ProjectSearch:x},data:function(){return{dialogVisible:!1,form:{server_name:"",server_url:"",username:"",password:"",status:1},rules:{server_name:[{required:!0,message:"请输入服务名称",trigger:"blur"}],server_url:[{required:!0,message:"请输入服务地址",trigger:"blur"}]}}},computed:{},watch:{},methods:{handleOpen:function(){this.getData()},getData:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.row&&this.row.id)for(t in this.form)this.form[t]=this.row[t];case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=this;this.$refs.form.validate((function(t){t&&e.handleSubmit()}))},handleSubmit:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={server_name:this.form.server_name,server_url:this.form.server_url,username:this.form.username,password:this.form.password,status:this.form.status},this.row&&this.row.id?this.updateScrapydServer(Object(_["a"])(Object(_["a"])({},t),{},{scrapyd_server_id:this.row.id})):this.addScrapydServer(t);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addScrapydServer:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){var r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$Http.addScrapydServer(t);case 2:r=e.sent,r.ok&&(this.$message.success("添加成功"),this.$emit("success"),this.dialogVisible=!1);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateScrapydServer:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t){var r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$Http.updateScrapydServer(t);case 2:r=e.sent,r.ok&&(this.$message.success("更新成功"),this.$emit("success"),this.dialogVisible=!1);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},created:function(){}},k=O,$=Object(f["a"])(k,h,b,!1,null,"1f5bcb9a",null),D=$.exports,P={name:"",props:[],components:{ProjectDelete:v,ProjectAdd:D},data:function(){return{}},computed:{},methods:{getData:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),handleStatusChange:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(t,r){var n,s;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={scrapyd_server_id:t.id,status:r},e.next=3,this.$Http.updateScrapydServerStatus(n);case 3:s=e.sent,0==s.code?this.$message.success("更新成功"):this.$message.error(s.msg);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},created:function(){this.getData()}},L=P,V=Object(f["a"])(L,c,o,!1,null,"77966d16",null),C=V.exports,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("ProjectAdd",{on:{success:function(t){return e.$emit("success")}}})],1)},E=[],H={name:"",props:[],components:{ProjectAdd:D},data:function(){return{}},computed:{},methods:{getData:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getData()}},q=H,A=Object(f["a"])(q,z,E,!1,null,"7a46adb1",null),T=A.exports,I={components:{ProjectTable:C,ProjectTool:T},data:function(){return{list:null,listLoading:!0}},created:function(){this.getData()},methods:{getData:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,this.$Http.getScrapydServerPage();case 3:t=e.sent,this.listLoading=!1,this.list=t.data.list;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},J=I,N=Object(f["a"])(J,n,s,!1,null,"381eecdb",null);t["default"]=N.exports}}]);