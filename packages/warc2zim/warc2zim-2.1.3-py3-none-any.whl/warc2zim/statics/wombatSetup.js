var wombatSetup=function(e){const r=[{match:".*googlevideo.com/(videoplayback(?=\\?)).*[?&](id=[^&]+).*",replace:"youtube.fuzzy.replayweb.page/$1?$2"},{match:"(?:www\\.)?youtube(?:-nocookie)?\\.com/(get_video_info\\?).*(video_id=[^&]+).*",replace:"youtube.fuzzy.replayweb.page/$1$2"},{match:"i\\.ytimg\\.com\\/vi\\/(.*?)\\/.*?\\.(\\w*?)(?:\\?.*|$)",replace:"i.ytimg.com.fuzzy.replayweb.page/vi/$1/thumbnail.$2"},{match:"([^?]+)\\?[\\d]+$",replace:"$1"},{match:"(?:www\\.)?youtube(?:-nocookie)?\\.com\\/(youtubei\\/[^?]+).*(videoId[^&]+).*",replace:"youtube.fuzzy.replayweb.page/$1?$2"},{match:"(?:www\\.)?youtube(?:-nocookie)?\\.com/embed/([^?]+).*",replace:"youtube.fuzzy.replayweb.page/embed/$1"},{match:".*(?:gcs-vimeo|vod|vod-progressive|vod-adaptive)\\.akamaized\\.net.*\\/(.+?.mp4)\\?.*range=(.*?)(?:&.*|$)",replace:"vimeo-cdn.fuzzy.replayweb.page/$1?range=$2"},{match:".*(?:gcs-vimeo|vod|vod-progressive)\\.akamaized\\.net.*?\\/([\\d/]+.mp4)$",replace:"vimeo-cdn.fuzzy.replayweb.page/$1"},{match:".*player.vimeo.com\\/(video\\/[\\d]+)\\?.*",replace:"vimeo.fuzzy.replayweb.page/$1"},{match:".*i\\.vimeocdn\\.com\\/(.*)\\?.*",replace:"i.vimeocdn.fuzzy.replayweb.page/$1"},{match:"cheatography\\.com\\/scripts\\/(.*).js.*[?&](v=[^&]+).*",replace:"cheatography.com.fuzzy.replayweb.page/scripts/$1.js?$2"},{match:"blogger.googleusercontent.com\\/img\\/(.*\\.jpg)=.*",replace:"blogger.googleusercontent.com.fuzzy.replayweb.page/img/$1.resized"},{match:"(iranwire\\.com\\/questions\\/detail\\/.*)\\?.*",replace:"$1"}];"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o={exports:{}};
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */!function(e,r){!function(e){function r(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length>1){r[0]=r[0].slice(0,-1);for(var o=r.length-1,n=1;n<o;++n)r[n]=r[n].slice(1,-1);return r[o]=r[o].slice(1),r.join("")}return r[0]}function t(e){return"(?:"+e+")"}function o(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function a(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function i(e,r){var t=e;if(r)for(var o in r)t[o]=r[o];return t}function s(e){var o="[A-Za-z]",n="[0-9]",a=r(n,"[A-Fa-f]"),i=t(t("%[EFef]"+a+"%"+a+a+"%"+a+a)+"|"+t("%[89A-Fa-f]"+a+"%"+a+a)+"|"+t("%"+a+a)),s="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=r("[\\:\\/\\?\\#\\[\\]\\@]",s),c=e?"[\\uE000-\\uF8FF]":"[]",p=r(o,n,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");t(o+r(o,n,"[\\+\\-\\.]")+"*"),t(t(i+"|"+r(p,s,"[\\:]"))+"*");var l=t(t("25[0-5]")+"|"+t("2[0-4]"+n)+"|"+t("1"+n+n)+"|"+t("0?[1-9]"+n)+"|0?0?"+n),h=t(l+"\\."+l+"\\."+l+"\\."+l),f=t(a+"{1,4}"),d=t(t(f+"\\:"+f)+"|"+h),v=t(t(f+"\\:")+"{6}"+d),m=t("\\:\\:"+t(f+"\\:")+"{5}"+d),g=t(t(f)+"?\\:\\:"+t(f+"\\:")+"{4}"+d),y=t(t(t(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+t(f+"\\:")+"{3}"+d),E=t(t(t(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+t(f+"\\:")+"{2}"+d),C=t(t(t(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+d),w=t(t(t(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+d),b=t(t(t(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),S=t(t(t(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),_=t([v,m,g,y,E,C,w,b,S].join("|")),A=t(t(p+"|"+i)+"+");t("[vV]"+a+"+\\."+r(p,s,"[\\:]")+"+"),t(t(i+"|"+r(p,s))+"*");var D=t(i+"|"+r(p,s,"[\\:\\@]"));return t(t(i+"|"+r(p,s,"[\\@]"))+"+"),t(t(D+"|"+r("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(r("[^]",o,n,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",p,s),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",p,s),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",p,s),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",p,s),"g"),NOT_QUERY:new RegExp(r("[^\\%]",p,s,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",p,s,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",p,s),"g"),UNRESERVED:new RegExp(p,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",p,u),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_+")"+t(t("\\%25|\\%(?!"+a+"{2})")+"("+A+")")+"?\\]?$")}}var u=s(!1),c=s(!0),p=function(){function e(e,r){var t=[],o=!0,n=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(t.push(i.value),!r||t.length!==r);o=!0);}catch(e){n=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw a}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)},h=2147483647,f=36,d=1,v=26,m=38,g=700,y=72,E=128,C="-",w=/^xn--/,b=/[^\0-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=f-d,D=Math.floor,x=String.fromCharCode;function R(e){throw new RangeError(_[e])}function O(e,r){for(var t=[],o=e.length;o--;)t[o]=r(e[o]);return t}function I(e,r){var t=e.split("@"),o="";return t.length>1&&(o=t[0]+"@",e=t[1]),o+O((e=e.replace(S,".")).split("."),r).join(".")}function z(e){for(var r=[],t=0,o=e.length;t<o;){var n=e.charCodeAt(t++);if(n>=55296&&n<=56319&&t<o){var a=e.charCodeAt(t++);56320==(64512&a)?r.push(((1023&n)<<10)+(1023&a)+65536):(r.push(n),t--)}else r.push(n)}return r}var F=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:f},N=function(e,r){return e+22+75*(e<26)-((0!=r)<<5)},T=function(e,r,t){var o=0;for(e=t?D(e/g):e>>1,e+=D(e/r);e>A*v>>1;o+=f)e=D(e/A);return D(o+(A+1)*e/(e+m))},P=function(e){var r=[],t=e.length,o=0,n=E,a=y,i=e.lastIndexOf(C);i<0&&(i=0);for(var s=0;s<i;++s)e.charCodeAt(s)>=128&&R("not-basic"),r.push(e.charCodeAt(s));for(var u=i>0?i+1:0;u<t;){for(var c=o,p=1,l=f;;l+=f){u>=t&&R("invalid-input");var m=F(e.charCodeAt(u++));(m>=f||m>D((h-o)/p))&&R("overflow"),o+=m*p;var g=l<=a?d:l>=a+v?v:l-a;if(m<g)break;var w=f-g;p>D(h/w)&&R("overflow"),p*=w}var b=r.length+1;a=T(o-c,b,0==c),D(o/b)>h-n&&R("overflow"),n+=D(o/b),o%=b,r.splice(o++,0,n)}return String.fromCodePoint.apply(String,r)},$=function(e){var r=[],t=(e=z(e)).length,o=E,n=0,a=y,i=!0,s=!1,u=void 0;try{for(var c,p=e[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var l=c.value;l<128&&r.push(x(l))}}catch(e){s=!0,u=e}finally{try{!i&&p.return&&p.return()}finally{if(s)throw u}}var m=r.length,g=m;for(m&&r.push(C);g<t;){var w=h,b=!0,S=!1,_=void 0;try{for(var A,O=e[Symbol.iterator]();!(b=(A=O.next()).done);b=!0){var I=A.value;I>=o&&I<w&&(w=I)}}catch(e){S=!0,_=e}finally{try{!b&&O.return&&O.return()}finally{if(S)throw _}}var F=g+1;w-o>D((h-n)/F)&&R("overflow"),n+=(w-o)*F,o=w;var P=!0,$=!1,j=void 0;try{for(var q,U=e[Symbol.iterator]();!(P=(q=U.next()).done);P=!0){var H=q.value;if(H<o&&++n>h&&R("overflow"),H==o){for(var L=n,k=f;;k+=f){var M=k<=a?d:k>=a+v?v:k-a;if(L<M)break;var V=L-M,W=f-M;r.push(x(N(M+V%W,0))),L=D(V/W)}r.push(x(N(L,0))),a=T(n,F,g==m),n=0,++g}}}catch(e){$=!0,j=e}finally{try{!P&&U.return&&U.return()}finally{if($)throw j}}++n,++o}return r.join("")},j=function(e){return I(e,(function(e){return w.test(e)?P(e.slice(4).toLowerCase()):e}))},q=function(e){return I(e,(function(e){return b.test(e)?"xn--"+$(e):e}))},U={version:"2.1.0",ucs2:{decode:z,encode:function(e){return String.fromCodePoint.apply(String,l(e))}},decode:P,encode:$,toASCII:q,toUnicode:j},H={};function L(e){var r=e.charCodeAt(0);return r<16?"%0"+r.toString(16).toUpperCase():r<128?"%"+r.toString(16).toUpperCase():r<2048?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function k(e){for(var r="",t=0,o=e.length;t<o;){var n=parseInt(e.substr(t+1,2),16);if(n<128)r+=String.fromCharCode(n),t+=3;else if(n>=194&&n<224){if(o-t>=6){var a=parseInt(e.substr(t+4,2),16);r+=String.fromCharCode((31&n)<<6|63&a)}else r+=e.substr(t,6);t+=6}else if(n>=224){if(o-t>=9){var i=parseInt(e.substr(t+4,2),16),s=parseInt(e.substr(t+7,2),16);r+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&s)}else r+=e.substr(t,9);t+=9}else r+=e.substr(t,3),t+=3}return r}function M(e,r){function t(e){var t=k(e);return t.match(r.UNRESERVED)?t:e}return e.scheme&&(e.scheme=String(e.scheme).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(r.PCT_ENCODED,t).replace(r.NOT_USERINFO,L).replace(r.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(r.PCT_ENCODED,t).toLowerCase().replace(r.NOT_HOST,L).replace(r.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(r.PCT_ENCODED,t).replace(e.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,L).replace(r.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(r.PCT_ENCODED,t).replace(r.NOT_QUERY,L).replace(r.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(r.PCT_ENCODED,t).replace(r.NOT_FRAGMENT,L).replace(r.PCT_ENCODED,n)),e}function V(e){return e.replace(/^0*(.*)/,"$1")||"0"}function W(e,r){var t=e.match(r.IPV4ADDRESS)||[],o=p(t,2)[1];return o?o.split(".").map(V).join("."):e}function Z(e,r){var t=e.match(r.IPV6ADDRESS)||[],o=p(t,3),n=o[1],a=o[2];if(n){for(var i=n.toLowerCase().split("::").reverse(),s=p(i,2),u=s[0],c=s[1],l=c?c.split(":").map(V):[],h=u.split(":").map(V),f=r.IPV4ADDRESS.test(h[h.length-1]),d=f?7:8,v=h.length-d,m=Array(d),g=0;g<d;++g)m[g]=l[g]||h[v+g]||"";f&&(m[d-1]=W(m[d-1],r));var y=m.reduce((function(e,r,t){if(!r||"0"===r){var o=e[e.length-1];o&&o.index+o.length===t?o.length++:e.push({index:t,length:1})}return e}),[]).sort((function(e,r){return r.length-e.length}))[0],E=void 0;if(y&&y.length>1){var C=m.slice(0,y.index),w=m.slice(y.index+y.length);E=C.join(":")+"::"+w.join(":")}else E=m.join(":");return a&&(E+="%"+a),E}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Q=void 0==="".match(/(){0}/)[1];function Y(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={},o=!1!==r.iri?c:u;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);var n=e.match(G);if(n){Q?(t.scheme=n[1],t.userinfo=n[3],t.host=n[4],t.port=parseInt(n[5],10),t.path=n[6]||"",t.query=n[7],t.fragment=n[8],isNaN(t.port)&&(t.port=n[5])):(t.scheme=n[1]||void 0,t.userinfo=-1!==e.indexOf("@")?n[3]:void 0,t.host=-1!==e.indexOf("//")?n[4]:void 0,t.port=parseInt(n[5],10),t.path=n[6]||"",t.query=-1!==e.indexOf("?")?n[7]:void 0,t.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(t.port)&&(t.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),t.host&&(t.host=Z(W(t.host,o),o)),void 0!==t.scheme||void 0!==t.userinfo||void 0!==t.host||void 0!==t.port||t.path||void 0!==t.query?void 0===t.scheme?t.reference="relative":void 0===t.fragment?t.reference="absolute":t.reference="uri":t.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==t.reference&&(t.error=t.error||"URI is not a "+r.reference+" reference.");var a=H[(r.scheme||t.scheme||"").toLowerCase()];if(r.unicodeSupport||a&&a.unicodeSupport)M(t,o);else{if(t.host&&(r.domainHost||a&&a.domainHost))try{t.host=U.toASCII(t.host.replace(o.PCT_ENCODED,k).toLowerCase())}catch(e){t.error=t.error||"Host's domain name can not be converted to ASCII via punycode: "+e}M(t,u)}a&&a.parse&&a.parse(t,r)}else t.error=t.error||"URI can not be parsed.";return t}function B(e,r){var t=!1!==r.iri?c:u,o=[];return void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(Z(W(String(e.host),t),t).replace(t.IPV6ADDRESS,(function(e,r,t){return"["+r+(t?"%25"+t:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(o.push(":"),o.push(String(e.port))),o.length?o.join(""):void 0}var J=/^\.\.?\//,K=/^\/\.(\/|$)/,X=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function re(e){for(var r=[];e.length;)if(e.match(J))e=e.replace(J,"");else if(e.match(K))e=e.replace(K,"/");else if(e.match(X))e=e.replace(X,"/"),r.pop();else if("."===e||".."===e)e="";else{var t=e.match(ee);if(!t)throw new Error("Unexpected dot segment condition");var o=t[0];e=e.slice(o.length),r.push(o)}return r.join("")}function te(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.iri?c:u,o=[],n=H[(r.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,r),e.host)if(t.IPV6ADDRESS.test(e.host));else if(r.domainHost||n&&n.domainHost)try{e.host=r.iri?U.toUnicode(e.host):U.toASCII(e.host.replace(t.PCT_ENCODED,k).toLowerCase())}catch(t){e.error=e.error||"Host's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+t}M(e,t),"suffix"!==r.reference&&e.scheme&&(o.push(e.scheme),o.push(":"));var a=B(e,r);if(void 0!==a&&("suffix"!==r.reference&&o.push("//"),o.push(a),e.path&&"/"!==e.path.charAt(0)&&o.push("/")),void 0!==e.path){var i=e.path;r.absolutePath||n&&n.absolutePath||(i=re(i)),void 0===a&&(i=i.replace(/^\/\//,"/%2F")),o.push(i)}return void 0!==e.query&&(o.push("?"),o.push(e.query)),void 0!==e.fragment&&(o.push("#"),o.push(e.fragment)),o.join("")}function oe(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={};return arguments[3]||(e=Y(te(e,t),t),r=Y(te(r,t),t)),!(t=t||{}).tolerant&&r.scheme?(o.scheme=r.scheme,o.userinfo=r.userinfo,o.host=r.host,o.port=r.port,o.path=re(r.path||""),o.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(o.userinfo=r.userinfo,o.host=r.host,o.port=r.port,o.path=re(r.path||""),o.query=r.query):(r.path?("/"===r.path.charAt(0)?o.path=re(r.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+r.path:o.path=r.path:o.path="/"+r.path,o.path=re(o.path)),o.query=r.query):(o.path=e.path,void 0!==r.query?o.query=r.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=r.fragment,o}function ne(e,r,t){var o=i({scheme:"null"},t);return te(oe(Y(e,o),Y(r,o),o,!0),o)}function ae(e,r){return"string"==typeof e?e=te(Y(e,r),r):"object"===o(e)&&(e=Y(te(e,r),r)),e}function ie(e,r,t){return"string"==typeof e?e=te(Y(e,t),t):"object"===o(e)&&(e=te(e,t)),"string"==typeof r?r=te(Y(r,t),t):"object"===o(r)&&(r=te(r,t)),e===r}function se(e,r){return e&&e.toString().replace(r&&r.iri?c.ESCAPE:u.ESCAPE,L)}function ue(e,r){return e&&e.toString().replace(r&&r.iri?c.PCT_ENCODED:u.PCT_ENCODED,k)}var ce={scheme:"http",domainHost:!0,parse:function(e,r){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,r){var t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},pe={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function le(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var he={scheme:"ws",domainHost:!0,parse:function(e,r){var t=e;return t.secure=le(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t},serialize:function(e,r){if(e.port!==(le(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var t=e.resourceName.split("?"),o=p(t,2),n=o[0],a=o[1];e.path=n&&"/"!==n?n:void 0,e.query=a,e.resourceName=void 0}return e.fragment=void 0,e}},fe={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},de={},ve="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",me="[0-9A-Fa-f]",ge=t(t("%[EFef]"+me+"%"+me+me+"%"+me+me)+"|"+t("%[89A-Fa-f]"+me+"%"+me+me)+"|"+t("%"+me+me)),ye="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Ee=r("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Ce="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",we=new RegExp(ve,"g"),be=new RegExp(ge,"g"),Se=new RegExp(r("[^]",ye,"[\\.]",'[\\"]',Ee),"g"),_e=new RegExp(r("[^]",ve,Ce),"g"),Ae=_e;function De(e){var r=k(e);return r.match(we)?r:e}var xe={scheme:"mailto",parse:function(e,r){var t=e,o=t.to=t.path?t.path.split(","):[];if(t.path=void 0,t.query){for(var n=!1,a={},i=t.query.split("&"),s=0,u=i.length;s<u;++s){var c=i[s].split("=");switch(c[0]){case"to":for(var p=c[1].split(","),l=0,h=p.length;l<h;++l)o.push(p[l]);break;case"subject":t.subject=ue(c[1],r);break;case"body":t.body=ue(c[1],r);break;default:n=!0,a[ue(c[0],r)]=ue(c[1],r)}}n&&(t.headers=a)}t.query=void 0;for(var f=0,d=o.length;f<d;++f){var v=o[f].split("@");if(v[0]=ue(v[0]),r.unicodeSupport)v[1]=ue(v[1],r).toLowerCase();else try{v[1]=U.toASCII(ue(v[1],r).toLowerCase())}catch(e){t.error=t.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}o[f]=v.join("@")}return t},serialize:function(e,r){var t=e,o=a(e.to);if(o){for(var i=0,s=o.length;i<s;++i){var u=String(o[i]),c=u.lastIndexOf("@"),p=u.slice(0,c).replace(be,De).replace(be,n).replace(Se,L),l=u.slice(c+1);try{l=r.iri?U.toUnicode(l):U.toASCII(ue(l,r).toLowerCase())}catch(e){t.error=t.error||"Email address's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+e}o[i]=p+"@"+l}t.path=o.join(",")}var h=e.headers=e.headers||{};e.subject&&(h.subject=e.subject),e.body&&(h.body=e.body);var f=[];for(var d in h)h[d]!==de[d]&&f.push(d.replace(be,De).replace(be,n).replace(_e,L)+"="+h[d].replace(be,De).replace(be,n).replace(Ae,L));return f.length&&(t.query=f.join("&")),t}},Re=/^([^\:]+)\:(.*)/,Oe={scheme:"urn",parse:function(e,r){var t=e.path&&e.path.match(Re),o=e;if(t){var n=r.scheme||o.scheme||"urn",a=t[1].toLowerCase(),i=t[2],s=n+":"+(r.nid||a),u=H[s];o.nid=a,o.nss=i,o.path=void 0,u&&(o=u.parse(o,r))}else o.error=o.error||"URN can not be parsed.";return o},serialize:function(e,r){var t=r.scheme||e.scheme||"urn",o=e.nid,n=t+":"+(r.nid||o),a=H[n];a&&(e=a.serialize(e,r));var i=e,s=e.nss;return i.path=(o||r.nid)+":"+s,i}},Ie=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ze={scheme:"urn:uuid",parse:function(e,r){var t=e;return t.uuid=t.nss,t.nss=void 0,r.tolerant||t.uuid&&t.uuid.match(Ie)||(t.error=t.error||"UUID is not valid."),t},serialize:function(e,r){var t=e;return t.nss=(e.uuid||"").toLowerCase(),t}};H[ce.scheme]=ce,H[pe.scheme]=pe,H[he.scheme]=he,H[fe.scheme]=fe,H[xe.scheme]=xe,H[Oe.scheme]=Oe,H[ze.scheme]=ze,e.SCHEMES=H,e.pctEncChar=L,e.pctDecChars=k,e.parse=Y,e.removeDotSegments=re,e.serialize=te,e.resolveComponents=oe,e.resolve=ne,e.normalize=ae,e.equal=ie,e.escapeComponent=se,e.unescapeComponent=ue,Object.defineProperty(e,"__esModule",{value:!0})}(r)}(0,o.exports);var n=t(o.exports);function a(e){for(const t of r){const r=e.replace(new RegExp(t.match),t.replace);if(r!=e)return r}return e}function i(e,r,t,o){if(void 0===t.scheme&&o.startsWith("../")){const t=o.split("/"),a=n.resolve(r,t.slice(1).join("/")),i=n.resolve(r,t.slice(2).join("/"));if(a==e&&i!=e){if(t.find((e=>".."!==e)).indexOf(".")>-1)return!0}}return!1}function s(e,r,t,o,s,u,c,p,l){if(!u)return u;if(u=String(u),["#","{","*"].includes(u.substring(0,1)))return u;const h=n.parse(u);if(void 0!==h.scheme&&!["http","https"].includes(h.scheme))return u;u.startsWith(s)&&(u=h.scheme+"://"+u.substring(s.length));try{decodeURIComponent(n.parse(u).path)}catch(e){u=encodeURI(u)}const f=n.resolve(o,u);if(i(f,o,h,u))return u;if(void 0===h.scheme&&u.startsWith("../")){const e=u.split("/"),r=n.resolve(o,e.slice(1).join("/")),t=n.resolve(o,e.slice(2).join("/"));if(r==f&&t!=f){if(e.find((e=>".."!==e)).indexOf(".")>-1)return u}}const d=n.parse(f),v=n.serialize(n.parse("http://"+d.host),{iri:!0}),m=v.substring(7,v.length-1),g=d.path&&0!==d.path.length?decodeURIComponent(d.path):"/",y=d.query&&0!==d.query.length?"?"+decodeURIComponent(d.query).replaceAll("+"," "):"";const E=a(m+(g+y).replace(/\/\/+/g,"/")),C=s+encodeURIComponent(E).replaceAll("%2F","/");return console.debug("urlRewriten:\n\t- current_url: "+e+"\n\t- orig_host: "+r+"\n\t- orig_scheme: "+t+"\n\t- orig_url: "+o+"\n\t- prefix: "+s+"\n\t- url: "+u+"\n\t- useRel: "+c+"\n\t- mod: "+p+"\n\t- doc: "+l+"\n\t- finalUrl: "+C.toString()+"\n\t"),C}function u(e,r,t,o,n){return{rewrite_function:(a,i,u,c)=>s(e,r,t,o,n,a,i,u,c),top_url:e,url:o,timestamp:"",request_ts:"",prefix:n,mod:"",is_framed:!1,is_live:!1,coll:"",proxy_magic:"",static_prefix:n+"_zim_static/",wombat_ts:"",wombat_sec:0,wombat_scheme:t,wombat_host:r,wombat_opts:{},enable_auto_fetch:!0,convert_post_to_get:!0,target_frame:"___wb_replay_top_frame",isSW:!0}}var c={applyFuzzyRules:a,urlRewriteFunction:s,getWombatInfo:u};return e.applyFuzzyRules=a,e.default=c,e.getWombatInfo=u,e.hasAlreadyBeenRewritten=i,e.urlRewriteFunction=s,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
