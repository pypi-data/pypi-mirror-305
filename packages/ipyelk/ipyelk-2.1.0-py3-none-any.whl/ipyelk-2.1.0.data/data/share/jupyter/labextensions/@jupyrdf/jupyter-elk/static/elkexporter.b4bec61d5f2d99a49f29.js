"use strict";(self.webpackChunk_jupyrdf_jupyter_elk=self.webpackChunk_jupyrdf_jupyter_elk||[]).push([[104],{1540:(e,n,t)=>{t.r(n),t.d(n,{ELKExporterModel:()=>d,ELKExporterView:()=>k});var l=t(1513),r=t(8033),i=t(8720),o=t(3101),s=t(1883);const a=`\n  ${o.A}\n  ${s.A}\n  /**\n * Copyright (c) 2024 ipyelk contributors.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*\n  CSS for in-DOM or standalone viewing: all selectors should tolerate having\n  \`.jp-ElkView\` stripped.\n*/\n:root {\n  --jp-elk-stroke-width: 1;\n\n  --jp-elk-node-fill: var(--jp-layout-color1);\n  --jp-elk-node-stroke: var(--jp-border-color0);\n\n  --jp-elk-edge-stroke: var(--jp-border-color0);\n\n  --jp-elk-port-fill: var(--jp-layout-color1);\n  --jp-elk-port-stroke: var(--jp-border-color0);\n\n  --jp-elk-label-color: var(--jp-ui-font-color0);\n  --jp-elk-label-font: var(--jp-content-font-family);\n  --jp-elk-label-font-size: var(--jp-ui-font-size0);\n\n  /* stable states */\n  --jp-elk-color-selected: var(--jp-brand-color2);\n  --jp-elk-stroke-width-selected: 3;\n\n  /* interactive states */\n  --jp-elk-stroke-hover: var(--jp-brand-color3);\n  --jp-elk-stroke-width-hover: 2;\n\n  --jp-elk-stroke-hover-selected: var(--jp-warn-color3);\n\n  /* sugar */\n  --jp-elk-transition: 0.1s ease-in;\n}\n\n/* firefox doesnt apply style correctly with the addition of .jp-ElkView */\nsymbol.elksymbol {\n  overflow: visible;\n}\n\n.jp-ElkView .elknode {\n  stroke: var(--jp-elk-node-stroke);\n  stroke-width: var(--jp-elk-stroke-width);\n  fill: var(--jp-elk-node-fill);\n}\n\n.jp-ElkView .elkport {\n  stroke: var(--jp-elk-port-stroke);\n  stroke-width: var(--jp-elk-stroke-width);\n  fill: var(--jp-elk-port-fill);\n}\n\n.jp-ElkView .elkedge {\n  fill: none;\n  stroke: var(--jp-elk-edge-stroke);\n  stroke-width: var(--jp-elk-stroke-width);\n}\n\n.jp-ElkView .elklabel {\n  stroke-width: 0;\n  stroke: var(--jp-elk-label-color);\n  fill: var(--jp-elk-label-color);\n  font-family: var(--jp-elk-label-font);\n  font-size: var(--jp-elk-label-font-size);\n  dominant-baseline: hanging;\n}\n\n.jp-ElkView .elkjunction {\n  stroke: none;\n  fill: var(--jp-elk-edge-stroke);\n}\n\n/* stable states */\n.jp-ElkView .elknode.selected,\n.jp-ElkView .elkport.selected,\n.jp-ElkView .elkedge.selected,\n.jp-ElkView .elkedge.selected .elkarrow {\n  stroke: var(--jp-elk-color-selected);\n  stroke-width: var(--jp-elk-stroke-width-selected);\n  transition: stroke stroke-width var(--jp-elk-transition);\n}\n\n.jp-ElkView .elklabel.selected {\n  fill: var(--jp-elk-color-selected);\n  transition: fill var(--jp-elk-transition);\n}\n\n/* interactive states: elklabel does not have a mouseover selector/ancestor */\n.jp-ElkView .elknode.mouseover,\n.jp-ElkView .elkport.mouseover,\n.jp-ElkView .elkedge.mouseover {\n  stroke: var(--jp-elk-stroke-hover);\n  stroke-width: var(--jp-elk-stroke-width-hover);\n  transition: stroke stroke-width var(--jp-elk-transition);\n}\n\n.jp-ElkView .elklabel.mouseover {\n  fill: var(--jp-elk-stroke-hover);\n  transition: fill stroke var(--jp-elk-transition);\n}\n\n.jp-ElkView .elknode.selected.mouseover,\n.jp-ElkView .elkport.selected.mouseover,\n.jp-ElkView .elkedge.selected.mouseover,\n.jp-ElkView .elkedge.selected.mouseover .elkarrow {\n  stroke-width: var(--jp-elk-stroke-width-hover);\n  stroke: var(--jp-elk-stroke-hover-selected);\n  transition: fill stroke var(--jp-elk-transition);\n}\n\n.jp-ElkView .elklabel.selected.mouseover {\n  fill: var(--jp-elk-stroke-hover-selected);\n  transition: fill stroke var(--jp-elk-transition);\n}\n\n.elkcontainer.widget {\n  overflow: hidden;\n}\n\n.elkcontainer.widget .jupyter-widgets {\n  transition: transform 0.5s;\n}\n\n`.replace(/\/\*(.|\n)*?\*\//gm," ").replace(/.jp-ElkView /g,"").replace(/\n/g," ").replace(/\s+/g," ").replace(/\}/g,"}\n");class d extends l.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:d.model_name,_model_module_version:i.xv,_view_module:i.o_,_view_name:k.view_name,_view_module_version:i.xv,viewer:null,value:null,enabled:!0,extra_css:"",padding:20,diagram:null,strip_ids:!0,add_xml_header:!0})}get enabled(){return this.get("enabled")||!0}get viewer(){return this.get("viewer")}get diagram(){return this.get("diagram")}get diagram_raw_css(){var e;return(null===(e=this.diagram)||void 0===e?void 0:e.get("raw_css"))||[]}initialize(e,n){super.initialize(e,n),this.on("change:viewer",this._on_viewer_changed,this),this.on("change:diagram",this._on_diagram_changed,this),this._on_viewer_changed(),this._on_diagram_changed()}_on_viewer_changed(){var e;i.XR&&console.warn("[export] viewer changed",arguments),null!=(null===(e=this.viewer)||void 0===e?void 0:e.diagramUpdated)&&(this.viewer.diagramUpdated.connect(this._schedule_update,this),this.enabled&&this._schedule_update())}is_an_elkmodel(e){return e instanceof r.ELKViewerModel}_on_diagram_changed(){i.XR&&console.warn("[export] diagram changed",arguments);const{diagram:e}=this;if(null!=(null==e?void 0:e.on)){e.on("change:raw_css",this._schedule_update,this);const n=e.get("children")||[],t=n.filter(this.is_an_elkmodel);t.length&&t[0].diagramUpdated?t[0].diagramUpdated.connect(this._schedule_update,this):i.XR&&console.warn("[export] no diagram ready",n)}}async a_view(){var e;if(!this.enabled)return;let n=this.viewer.views;if((null===(e=this.diagram)||void 0===e?void 0:e.views)&&(n=Object.assign(Object.assign({},n),this.diagram.views)),Object.keys(n).length)for(const e of Object.values(n)){const n=await e;if(n.el)return await n.displayed,n}}_schedule_update(){this.enabled&&(null!=this._update_timeout&&(window.clearInterval(this._update_timeout),this._update_timeout=null),this._update_timeout=setTimeout((()=>this._on_layout_updated()),1e3))}async _on_layout_updated(){var e;if(!this.enabled)return;const n=await this.a_view(),t=null===(e=null==n?void 0:n.el)||void 0===e?void 0:e.querySelector("svg");if(null==t)return void this._schedule_update();const{outerHTML:l}=t,r=this.get("padding"),i=this.get("strip_ids"),o=this.get("add_xml_header"),s=this.diagram_raw_css,d=`\n      <style type="text/css">\n        <![CDATA[\n          \n        ${a}\n        ${s.join("\n")}\n        ${this.get("extra_css")||""}\n    \n        ]]>\n      </style>`,k=t.querySelector("g");if(null==k)return;let p=1;const c=k.attributes.transform.value.match(/scale\((.*?)\)/);null!=c&&(p=parseFloat(c[1]));const{width:v,height:h}=k.getBoundingClientRect();let u=l.replace(/<svg([^>]+)>/,`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${v/p+r} ${h/p+r}" $1>\n          ${d}\n        `).replace(/ transform=".*?"/,"");i&&(u=u.replace(/\s*id="[^"]*"\s*/g," ")),o&&(u=`<?xml version="1.0" standalone="no"?>\n${u}`),this.set({value:u}),this.save_changes(n.callbacks)}}d.model_name="ELKExporterModel",d.serializers=Object.assign(Object.assign({},l.WidgetModel.serializers),{viewer:{deserialize:l.unpack_models},diagram:{deserialize:l.unpack_models}});class k extends l.WidgetView{}k.view_name="ELKExporterView"}}]);
//# sourceMappingURL=elkexporter.b4bec61d5f2d99a49f29.js.map?v=b4bec61d5f2d99a49f29